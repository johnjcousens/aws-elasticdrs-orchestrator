var Ii=Object.defineProperty,Si=Object.defineProperties;var wi=Object.getOwnPropertyDescriptors;var Ge=Object.getOwnPropertySymbols;var ln=Object.prototype.hasOwnProperty,hn=Object.prototype.propertyIsEnumerable;var fn=Math.pow,un=(e,t,n)=>t in e?Ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))ln.call(t,n)&&un(e,n,t[n]);if(Ge)for(var n of Ge(t))hn.call(t,n)&&un(e,n,t[n]);return e},v=(e,t)=>Si(e,wi(t));var pn=(e,t)=>{var n={};for(var o in e)ln.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Ge)for(var o of Ge(e))t.indexOf(o)<0&&hn.call(e,o)&&(n[o]=e[o]);return n};var f=(e,t,n)=>new Promise((o,i)=>{var s=a=>{try{d(n.next(a))}catch(c){i(c)}},r=a=>{try{d(n.throw(a))}catch(c){i(c)}},d=a=>a.done?o(a.value):Promise.resolve(a.value).then(s,r);d((n=n.apply(e,t)).next())});import"./vendor-react-0O18VZk2.js";import"./vendor-mui-core-DfwLAmRl.js";import"./vendor-mui-extended-CjMQYT6J.js";const vi="Logging",xi="NoHubcallbackProvidedException";var U;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(U||(U={}));const gn={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class O{constructor(t,n=U.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let o=this.level;O.LOG_LEVEL&&(o=O.LOG_LEVEL),typeof window!="undefined"&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);const i=gn[o];if(!(gn[t]>=i))return;let r=console.log.bind(console);t===U.ERROR&&console.error&&(r=console.error.bind(console)),t===U.WARN&&console.warn&&(r=console.warn.bind(console)),O.BIND_ALL_LOG_LEVELS&&(t===U.INFO&&console.info&&(r=console.info.bind(console)),t===U.DEBUG&&console.debug&&(r=console.debug.bind(console)));const d=`[${t}] ${this._ts()} ${this.name}`;let a="";if(n.length===1&&typeof n[0]=="string")a=`${d} - ${n[0]}`,r(a);else if(n.length===1)a=`${d} ${n[0]}`,r(d,n[0]);else if(typeof n[0]=="string"){let c=n.slice(1);c.length===1&&(c=c[0]),a=`${d} - ${n[0]} ${c}`,r(`${d} - ${n[0]}`,c)}else a=`${d} ${n}`,r(d,n);for(const c of this._pluggables){const u={message:a,timestamp:Date.now()};c.pushLogs([u])}}log(...t){this._log(U.INFO,...t)}info(...t){this._log(U.INFO,...t)}warn(...t){this._log(U.WARN,...t)}error(...t){this._log(U.ERROR,...t)}debug(...t){this._log(U.DEBUG,...t)}verbose(...t){this._log(U.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===vi&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}O.LOG_LEVEL=null;O.BIND_ALL_LOG_LEVELS=!1;class M extends Error{constructor({message:t,name:n,recoverySuggestion:o,underlyingError:i,metadata:s}){if(super(t),this.name=n,this.underlyingError=i,this.recoverySuggestion=o,s){const{extendedRequestId:r,httpStatusCode:d,requestId:a}=s;this.metadata={extendedRequestId:r,httpStatusCode:d,requestId:a}}this.constructor=M,Object.setPrototypeOf(this,M.prototype)}}var ce;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(ce||(ce={}));const Pt=(e,t=M)=>(n,o,i)=>{const{message:s,recoverySuggestion:r}=e[o];if(!n)throw new t({name:o,message:i?`${s} ${i}`:s,recoverySuggestion:r})},de=typeof Symbol!="undefined"?Symbol("amplify_default"):"@@amplify_default",be=new O("Hub");class Ri{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const o=this.listeners.get(t);if(!o){be.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...o.filter(({callback:i})=>i!==n)])}dispatch(t,n,o,i){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(i===de||be.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const s={channel:t,payload:g({},n),source:o,patternInfo:[]};try{this._toListeners(s)}catch(r){be.error(r)}}listen(t,n,o="noname"){let i;if(typeof n!="function")throw new M({name:xi,message:"No callback supplied to Hub"});i=n;let s=this.listeners.get(t);return s||(s=[],this.listeners.set(t,s)),s.push({name:o,callback:i}),()=>{this._remove(t,i)}}_toListeners(t){const{channel:n,payload:o}=t,i=this.listeners.get(n);i&&i.forEach(s=>{be.debug(`Dispatching to ${n} with `,o);try{s.callback(t)}catch(r){be.error(r)}})}}const ge=new Ri("__default__"),Ti=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new M({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},Ai=()=>{if(typeof window!="undefined"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new M({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},Ci=()=>{if(typeof window!="undefined"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new M({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},_t={convert(e,t){let n=e;return t!=null&&t.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),Ci()(n)}};var z;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(z||(z={}));const Pi={[z.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[z.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[z.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[z.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[z.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},Nt=Pt(Pi);function R(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,Nt(t,z.AuthUserPoolException)}function Ao(e){var n,o,i,s,r,d,a,c;const t=!!((o=(n=e==null?void 0:e.loginWith)==null?void 0:n.oauth)!=null&&o.domain)&&!!((s=(i=e==null?void 0:e.loginWith)==null?void 0:i.oauth)!=null&&s.redirectSignOut)&&!!((d=(r=e==null?void 0:e.loginWith)==null?void 0:r.oauth)!=null&&d.redirectSignIn)&&!!((c=(a=e==null?void 0:e.loginWith)==null?void 0:a.oauth)!=null&&c.responseType);Nt(t,z.OAuthNotConfigureException)}function Qe(e){const t=!!(e!=null&&e.identityPoolId);Nt(t,z.InvalidIdentityPoolIdException)}function ue(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(_t.convert(o).split("").map(r=>`%${`00${r.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),s=JSON.parse(i);return{toString:()=>e,payload:s}}catch(n){throw new Error("Invalid token payload")}}const Co=e=>{const t=Reflect.ownKeys(e);for(const n of t){const o=e[n];(o&&typeof o=="object"||typeof o=="function")&&Co(o)}return Object.freeze(e)},_i=new O("parseAWSExports"),Ni={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},bi=(e={})=>{var zt,Gt,jt,Yt,Jt,Xt,Zt,Qt,en,tn,nn,on,sn,rn,an;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new M({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:o,aws_appsync_region:i,aws_bots_config:s,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:d,aws_cognito_mfa_configuration:a,aws_cognito_mfa_types:c,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:h,aws_cognito_signup_attributes:l,aws_cognito_social_providers:p,aws_cognito_username_attributes:m,aws_mandatory_sign_in:y,aws_mobile_analytics_app_id:S,aws_mobile_analytics_app_region:w,aws_user_files_s3_bucket:_,aws_user_files_s3_bucket_region:ee,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:ie,aws_user_pools_id:W,aws_user_pools_web_client_id:$e,geo:ze,oauth:Ne,predictions:H,aws_cloud_logic_custom:Et,Notifications:pe,modelIntrospection:Ht}=e,N={};S&&(N.Analytics={Pinpoint:{appId:S,region:w}});const{InAppMessaging:se,Push:re}=pe!=null?pe:{};if(se!=null&&se.AWSPinpoint||re!=null&&re.AWSPinpoint){if(se!=null&&se.AWSPinpoint){const{appId:T,region:ae}=se.AWSPinpoint;N.Notifications={InAppMessaging:{Pinpoint:{appId:T,region:ae}}}}if(re!=null&&re.AWSPinpoint){const{appId:T,region:ae}=re.AWSPinpoint;N.Notifications=v(g({},N.Notifications),{PushNotification:{Pinpoint:{appId:T,region:ae}}})}}if(Array.isArray(s)&&(N.Interactions={LexV1:Object.fromEntries(s.map(T=>[T.name,T]))}),o){const T=Ni[n];T||_i.debug(`Invalid authentication type ${n}. Falling back to IAM.`),N.API={GraphQL:{endpoint:o,apiKey:t,region:i,defaultAuthMode:T!=null?T:"iam"}},Ht&&(N.API.GraphQL.modelIntrospection=Ht)}const hi=a?{status:a&&a.toLowerCase(),totpEnabled:(zt=c==null?void 0:c.includes("TOTP"))!=null?zt:!1,smsEnabled:(Gt=c==null?void 0:c.includes("SMS"))!=null?Gt:!1}:void 0,fi=u?{minLength:u.passwordPolicyMinLength,requireLowercase:(Yt=(jt=u.passwordPolicyCharacters)==null?void 0:jt.includes("REQUIRES_LOWERCASE"))!=null?Yt:!1,requireUppercase:(Xt=(Jt=u.passwordPolicyCharacters)==null?void 0:Jt.includes("REQUIRES_UPPERCASE"))!=null?Xt:!1,requireNumbers:(Qt=(Zt=u.passwordPolicyCharacters)==null?void 0:Zt.includes("REQUIRES_NUMBERS"))!=null?Qt:!1,requireSpecialCharacters:(tn=(en=u.passwordPolicyCharacters)==null?void 0:en.includes("REQUIRES_SYMBOLS"))!=null?tn:!1}:void 0,pi=Array.from(new Set([...h!=null?h:[],...l!=null?l:[]])).reduce((T,ae)=>v(g({},T),{[ae.toLowerCase()]:{required:!0}}),{}),Vt=(nn=m==null?void 0:m.includes("EMAIL"))!=null?nn:!1,$t=(on=m==null?void 0:m.includes("PHONE_NUMBER"))!=null?on:!1;(r||W)&&(N.Auth={Cognito:{identityPoolId:r,allowGuestAccess:y!=="enable",signUpVerificationMethod:d,userAttributes:pi,userPoolClientId:$e,userPoolId:W,mfa:hi,passwordFormat:fi,loginWith:{username:!(Vt||$t),email:Vt,phone:$t}}});const gi=Ne?Object.keys(Ne).length>0:!1,Ei=p?p.length>0:!1;if(N.Auth&&gi&&(N.Auth.Cognito.loginWith=v(g({},N.Auth.Cognito.loginWith),{oauth:g(g({},Di(Ne)),Ei&&{providers:Mi(p)})})),_&&(N.Storage={S3:{bucket:_,region:ee,dangerouslyConnectToHttpEndpointForTesting:ie}}),ze){const{amazon_location_service:T}=ze;N.Geo={LocationService:{maps:T.maps,geofenceCollections:T.geofenceCollections,searchIndices:T.search_indices,region:T.region}}}if(Et&&(N.API=v(g({},N.API),{REST:Et.reduce((T,ae)=>{const{name:mi,endpoint:yi,region:cn,service:dn}=ae;return v(g({},T),{[mi]:g(g({endpoint:yi},dn?{service:dn}:void 0),cn?{region:cn}:void 0)})},{})})),H){const{VoiceId:T}=(an=(rn=(sn=H==null?void 0:H.convert)==null?void 0:sn.speechGenerator)==null?void 0:rn.defaults)!=null?an:{};N.Predictions=T?v(g({},H),{convert:v(g({},H.convert),{speechGenerator:v(g({},H.convert.speechGenerator),{defaults:{voiceId:T}})})}):H}return N},En=e=>{var t;return(t=e==null?void 0:e.split(","))!=null?t:[]},Di=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:o,responseType:i})=>({domain:e,scopes:t,redirectSignIn:En(n),redirectSignOut:En(o),responseType:i}),Mi=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),Ui=Symbol("oauth-listener"),b=[];for(let e=0;e<256;++e)b.push((e+256).toString(16).slice(1));function Oi(e,t=0){return(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase()}let mt;const Fi=new Uint8Array(16);function ki(){if(!mt){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mt=crypto.getRandomValues.bind(crypto)}return mt(Fi)}const Li=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),mn={randomUUID:Li};function Ki(e,t,n){var i,s,r;if(mn.randomUUID&&!t&&!e)return mn.randomUUID();e=e||{};const o=(r=(s=e.random)!=null?s:(i=e.rng)==null?void 0:i.call(e))!=null?r:ki();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(n=n||0,n<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let d=0;d<16;++d)t[n+d]=o[d];return t}return Oi(o)}function Bi(e){const{version:t}=e;return t?t.startsWith("1"):!1}function Wi(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:o}=e;return{S3:{bucket:t,region:n,buckets:o&&Zi(o)}}}function qi(e){var p;if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:o,password_policy:i,mfa_configuration:s,mfa_methods:r,unauthenticated_identities_enabled:d,oauth:a,username_attributes:c,standard_required_attributes:u,groups:h}=e,l={Cognito:{userPoolId:t,userPoolClientId:n,groups:h}};return o&&(l.Cognito=v(g({},l.Cognito),{identityPoolId:o})),i&&(l.Cognito.passwordFormat={requireLowercase:i.require_lowercase,requireNumbers:i.require_numbers,requireUppercase:i.require_uppercase,requireSpecialCharacters:i.require_symbols,minLength:(p=i.min_length)!=null?p:6}),s&&(l.Cognito.mfa={status:Xi(s),smsEnabled:r==null?void 0:r.includes("SMS"),totpEnabled:r==null?void 0:r.includes("TOTP")}),d&&(l.Cognito.allowGuestAccess=d),a&&(l.Cognito.loginWith={oauth:{domain:a.domain,redirectSignIn:a.redirect_sign_in_uri,redirectSignOut:a.redirect_sign_out_uri,responseType:a.response_type==="token"?"token":"code",scopes:a.scopes,providers:Ji(a.identity_providers)}}),c&&(l.Cognito.loginWith=v(g({},l.Cognito.loginWith),{email:c.includes("email"),phone:c.includes("phone_number"),username:c.includes("username")})),u&&(l.Cognito.userAttributes=u.reduce((m,y)=>v(g({},m),{[y]:{required:!0}}),{})),l}function Hi(e){if(!(e!=null&&e.amazon_pinpoint))return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function Vi(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:o,search_indices:i}=e;return{LocationService:{region:t,searchIndices:i,geofenceCollections:n,maps:o}}}function $i(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:o,api_key:i,model_introspection:s}=e;return{GraphQL:{endpoint:o,defaultAuthMode:Po(n),region:t,apiKey:i,modelIntrospection:s}}}function zi(e){if(!(e!=null&&e.events))return;const{url:t,aws_region:n,api_key:o,default_authorization_type:i}=e.events;return{Events:{endpoint:t,defaultAuthMode:Po(i),region:n,apiKey:o}}}function Gi(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:o}=e,i=n.includes("IN_APP_MESSAGING"),s=n.includes("APNS")||n.includes("FCM");if(!(i||s))return;const r={};return i&&(r.InAppMessaging={Pinpoint:{appId:o,region:t}}),s&&(r.PushNotification={Pinpoint:{appId:o,region:t}}),r}function ji(e){const t={};if(e.storage&&(t.Storage=Wi(e.storage)),e.auth&&(t.Auth=qi(e.auth)),e.analytics&&(t.Analytics=Hi(e.analytics)),e.geo&&(t.Geo=Vi(e.geo)),e.data&&(t.API=$i(e.data)),e.custom){const n=zi(e.custom);n&&"Events"in n&&(t.API=g(g({},t.API),n))}return e.notifications&&(t.Notifications=Gi(e.notifications)),t}const Yi={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function Po(e){return Yi[e]}const yn={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function Ji(e=[]){return e.reduce((t,n)=>(yn[n]!==void 0&&t.push(yn[n]),t),[])}function Xi(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function Zi(e){const t={};return e.forEach(({name:n,bucket_name:o,aws_region:i,paths:s})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);const r=s?Object.entries(s).reduce((d,[a,c])=>(c!==void 0&&(d[a]=c),d),{}):void 0;t[n]={bucketName:o,region:i,paths:r}}),t}const _o=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?bi(e):Bi(e)?ji(e):e;function Qi(e,t,n,o){function i(s){return s instanceof n?s:new n(function(r){r(s)})}return new(n||(n=Promise))(function(s,r){function d(u){try{c(o.next(u))}catch(h){r(h)}}function a(u){try{c(o.throw(u))}catch(h){r(h)}}function c(u){u.done?s(u.value):i(u.value).then(d,a)}c((o=o.apply(e,t||[])).next())})}function es(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},o,i,s,r=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return r.next=d(0),r.throw=d(1),r.return=d(2),typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function d(c){return function(u){return a([c,u])}}function a(c){if(o)throw new TypeError("Generator is already executing.");for(;r&&(r=0,c[0]&&(n=0)),n;)try{if(o=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],i=0}finally{o=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var L=64,ts=32,ns=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),os=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],is=Math.pow(2,53)-1,et=(function(){function e(){this.state=Int32Array.from(os),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,o=t.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>is)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[n++],o--,this.bufferLength===L&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(n.setUint8(this.bufferLength++,128),o%L>=L-8){for(var i=this.bufferLength;i<L;i++)n.setUint8(i,0);this.hashBuffer(),this.bufferLength=0}for(var i=this.bufferLength;i<L-8;i++)n.setUint8(i,0);n.setUint32(L-8,Math.floor(t/4294967296),!0),n.setUint32(L-4,t),this.hashBuffer(),this.finished=!0}for(var s=new Uint8Array(ts),i=0;i<8;i++)s[i*4]=this.state[i]>>>24&255,s[i*4+1]=this.state[i]>>>16&255,s[i*4+2]=this.state[i]>>>8&255,s[i*4+3]=this.state[i]>>>0&255;return s},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,o=t.state,i=o[0],s=o[1],r=o[2],d=o[3],a=o[4],c=o[5],u=o[6],h=o[7],l=0;l<L;l++){if(l<16)this.temp[l]=(n[l*4]&255)<<24|(n[l*4+1]&255)<<16|(n[l*4+2]&255)<<8|n[l*4+3]&255;else{var p=this.temp[l-2],m=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10;p=this.temp[l-15];var y=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3;this.temp[l]=(m+this.temp[l-7]|0)+(y+this.temp[l-16]|0)}var S=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&c^~a&u)|0)+(h+(ns[l]+this.temp[l]|0)|0)|0,w=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&s^i&r^s&r)|0;h=u,u=c,c=a,a=d+S|0,d=r,r=s,s=i,i=S+w|0}o[0]+=i,o[1]+=s,o[2]+=r,o[3]+=d,o[4]+=a,o[5]+=c,o[6]+=u,o[7]+=h},e})();const ss=e=>new TextEncoder().encode(e);var rs=typeof Buffer!="undefined"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:ss;function No(e){return e instanceof Uint8Array?e:typeof e=="string"?rs(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function as(e){return typeof e=="string"?e.length===0:e.byteLength===0}var ot=(function(){function e(t){this.secret=t,this.hash=new et,this.reset()}return e.prototype.update=function(t){if(!(as(t)||this.error))try{this.hash.update(No(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Qi(this,void 0,void 0,function(){return es(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new et,this.secret){this.outer=new et;var t=cs(this.secret),n=new Uint8Array(L);n.set(t);for(var o=0;o<L;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}},e})();function cs(e){var t=No(e);if(t.byteLength>L){var n=new et;n.update(t),t=n.digest()}var o=new Uint8Array(L);return o.set(t),o}for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}var C;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(C||(C={}));var wt;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(wt||(wt={}));var In;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(In||(In={}));var Sn;(function(e){e.Record="1",e.IdentifyUser="2"})(Sn||(Sn={}));var wn;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(wn||(wn={}));var Q;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"})(Q||(Q={}));var vn;(function(e){e.Subscribe="1",e.GraphQl="2"})(vn||(vn={}));var xn;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(xn||(xn={}));var Rn;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(Rn||(Rn={}));var Tn;(function(e){e.None="0"})(Tn||(Tn={}));var An;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(An||(An={}));var Cn;(function(e){e.Subscribe="1"})(Cn||(Cn={}));var Pn;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(Pn||(Pn={}));var _n;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"})(_n||(_n={}));const ds="6.15.8",at=()=>typeof global!="undefined",ye=()=>typeof window!="undefined",bo=()=>typeof document!="undefined",bt=()=>typeof process!="undefined",Fe=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var Nn={};function us(){const e=o=>o.startsWith("_react")||o.startsWith("__react"),t=o=>Object.keys(o).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return bo()&&n().some(t)}function ls(){return bt()&&typeof Nn!="undefined"&&!!Object.keys(Nn).find(e=>e.includes("react"))}function hs(){return ye()&&Fe(window,"__VUE")}function fs(){return at()&&Fe(global,"__VUE")}var bn={};function ps(){return ye()&&Fe(window,"__SVELTE")}function gs(){return bt()&&typeof bn!="undefined"&&!!Object.keys(bn).find(e=>e.includes("svelte"))}function Es(){return ye()&&window.next&&typeof window.next=="object"}function ms(){return at()&&(Fe(global,"__next")||Fe(global,"__NEXT"))}function ys(){return ye()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function Is(){return at()&&typeof global.__NUXT_PATHS__!="undefined"}var Dn={};function Ss(){const e=!!(bo()&&document.querySelector("[ng-version]")),t=!!(ye()&&typeof window.ng!="undefined");return e||t}function ws(){var e;return bt()&&typeof Dn=="object"&&((e=Dn.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function vs(){return typeof navigator!="undefined"&&typeof navigator.product!="undefined"&&navigator.product==="ReactNative"}function xs(){return at()&&typeof global.expo!="undefined"}function Rs(){return ye()}const Ts=[{platform:C.Expo,detectionMethod:xs},{platform:C.ReactNative,detectionMethod:vs},{platform:C.NextJs,detectionMethod:Es},{platform:C.Nuxt,detectionMethod:ys},{platform:C.Angular,detectionMethod:Ss},{platform:C.React,detectionMethod:us},{platform:C.VueJs,detectionMethod:hs},{platform:C.Svelte,detectionMethod:ps},{platform:C.WebUnknown,detectionMethod:Rs},{platform:C.NextJsSSR,detectionMethod:ms},{platform:C.NuxtSSR,detectionMethod:Is},{platform:C.ReactSSR,detectionMethod:ls},{platform:C.VueJsSSR,detectionMethod:fs},{platform:C.AngularSSR,detectionMethod:ws},{platform:C.SvelteSSR,detectionMethod:gs}];function As(){var e;return((e=Ts.find(t=>t.detectionMethod()))==null?void 0:e.platform)||C.ServerSideUnknown}let Oe;const yt=[];let vt=!1;const Cs=10,Ps=10,_s=1e3,Do=()=>{var e;if(!Oe){if(Oe=As(),vt)for(;yt.length;)(e=yt.pop())==null||e();else yt.forEach(t=>{t()});Mn(C.ServerSideUnknown,Cs),Mn(C.WebUnknown,Ps)}return Oe};function Ns(){Oe=void 0}function Mn(e,t){Oe===e&&!vt&&setTimeout(()=>{Ns(),vt=!0,setTimeout(Do,_s)},t)}const bs={},Ds=(e,t)=>{var n,o;return(o=(n=bs[e])==null?void 0:n[t])==null?void 0:o.additionalDetails},Ms="aws-amplify",Us=e=>e.replace(/\+.*/,""),Os=({category:e,action:t}={})=>{const n=[[Ms,Us(ds)]];if(e&&n.push([e,t]),n.push(["framework",Do()]),e&&t){const o=Ds(e,t);o&&o.forEach(i=>{n.push(i)})}return n},ct=e=>Os(e).map(([o,i])=>o&&i?`${o}/${i}`:o).join(" "),Mo=()=>typeof window!="undefined"&&typeof window.document!="undefined",Un=new O("Auth");class Fs{configure(t,n){var o,i;this.authConfig=t,this.authOptions=n,t&&((o=t.Cognito)!=null&&o.userPoolEndpoint)&&Un.warn(On("Amazon Cognito User Pool")),t&&((i=t.Cognito)!=null&&i.identityPoolEndpoint)&&Un.warn(On("Amazon Cognito Identity Pool"))}fetchAuthSession(){return f(this,arguments,function*(t={}){var s,r,d,a,c,u;let n,o;const i=yield this.getTokens(t);return i?(o=(r=(s=i.accessToken)==null?void 0:s.payload)==null?void 0:r.sub,n=yield(a=(d=this.authOptions)==null?void 0:d.credentialsProvider)==null?void 0:a.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:i,authenticated:!0,forceRefresh:t.forceRefresh})):n=yield(u=(c=this.authOptions)==null?void 0:c.credentialsProvider)==null?void 0:u.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:i,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:o}})}clearCredentials(){return f(this,null,function*(){var t,n;yield(n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId()})}getTokens(t){return f(this,null,function*(){var n,o,i;return(i=yield(o=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:o.getTokens(t))!=null?i:void 0})}}const On=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;class ks{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Fs}configure(t,n){const o=_o(t);this.resourcesConfig=o,n&&(this.libraryOptions=n),this.resourcesConfig=Co(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),ge.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",de),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[Ui](t){var n,o,i;(o=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&o.oauth?t((i=this.resourcesConfig.Auth)==null?void 0:i.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,o;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((o=this.resourcesConfig.Auth)==null?void 0:o.Cognito),this.oAuthListener=void 0)}}const P=new ks,Ls=(e,t)=>e.Auth.fetchAuthSession(t),sd=e=>Ls(P,e);function Uo(){return P.Auth.clearCredentials()}const dt=e=>{var o,i;const{headers:t,statusCode:n}=e;return v(g({},Ks(e)?e.$metadata:{}),{httpStatusCode:n,requestId:(i=(o=t["x-amzn-requestid"])!=null?o:t["x-amzn-request-id"])!=null?i:t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]})},Ks=e=>typeof(e==null?void 0:e.$metadata)=="object",Le=e=>f(null,null,function*(){var r,d,a,c,u;if(!e||e.statusCode<300)return;const t=yield ut(e),o=(h=>{const[l]=h.toString().split(/[,:]+/);return l.includes("#")?l.split("#")[1]:l})((a=(d=(r=e.headers["x-amzn-errortype"])!=null?r:t.code)!=null?d:t.__type)!=null?a:"UnknownError"),i=(u=(c=t.message)!=null?c:t.Message)!=null?u:"Unknown error",s=new Error(i);return Object.assign(s,{name:o,$metadata:dt(e)})}),ut=e=>f(null,null,function*(){if(!e.body)throw new Error("Missing response payload");const t=yield e.body.json();return Object.assign(t,{$metadata:dt(e)})}),oe=(e,t,n,o)=>(i,s)=>f(null,null,function*(){const r=g(g({},o),i),d=yield r.endpointResolver(r,s),a=yield t(s,d),c=yield e(a,g({},r));return n(c)}),Bs=300*1e3;function Ws(e=Bs){return o=>{const i=fn(2,o)*100+100*Math.random();return i>e?!1:i}}const Oo=3,Fn="amz-sdk-invocation-id",qs="amz-sdk-request",kn=300*1e3,Fo=e=>{const n=Ws(kn)(e);return n===!1?kn:n},Hs=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Vs=e=>!!e&&Hs.includes(e),ko=e=>(t,n)=>f(null,null,function*(){var d;const o=(d=n!=null?n:yield e(t))!=null?d:void 0,i=(o==null?void 0:o.code)||(o==null?void 0:o.name),s=t==null?void 0:t.statusCode;return{retryable:js(n)||Gs(s,i)||Vs(i)||Ys(s,i)}}),$s=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],zs=["TimeoutError","RequestTimeout","RequestTimeoutException"],Gs=(e,t)=>e===429||!!t&&$s.includes(t),js=e=>[ce.NetworkError,"ERR_NETWORK"].includes(e==null?void 0:e.name),Ys=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&zs.includes(t),Lo="cognito-identity",Ko={service:Lo,retryDecider:ko(Le),computeDelay:Fo,cache:"no-store"},Js=({maxAttempts:e=Oo,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(i,s)=>function(d){return f(this,null,function*(){var l,p,m;let a,c=(l=s.attemptsCount)!=null?l:0,u;const h=()=>{if(u)return Ln(u,c),u;throw Ln(a,c),a};for(;!(o!=null&&o.aborted)&&c<e;){try{u=yield i(d),a=void 0}catch(w){a=w,u=void 0}c=((p=s.attemptsCount)!=null?p:0)>c?(m=s.attemptsCount)!=null?m:0:c+1,s.attemptsCount=c;const{isCredentialsExpiredError:y,retryable:S}=yield t(u,a,s);if(S){if(s.isCredentialsExpired=!!y,!(o!=null&&o.aborted)&&c<e){const w=n(c);yield Xs(w,o)}continue}else return h()}if(o!=null&&o.aborted)throw new Error("Request aborted.");return h()})}},Xs=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,o;const i=new Promise(s=>{o=s,n=setTimeout(s,e)});return t==null||t.addEventListener("abort",function s(r){clearTimeout(n),t==null||t.removeEventListener("abort",s),o()}),i},Ln=(e,t)=>{var n;Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata=v(g({},(n=e.$metadata)!=null?n:{}),{attempts:t}))},Zs=Ki,Qs=()=>e=>function(n){return f(this,null,function*(){return n.headers[Fn]||(n.headers[Fn]=Zs()),e(n)})},er=({maxAttempts:e=Oo})=>(t,n)=>function(i){return f(this,null,function*(){var r;const s=(r=n.attemptsCount)!=null?r:0;return i.headers[qs]=`attempt=${s+1}; max=${e}`,t(i)})},tr=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>function(i){return f(this,null,function*(){if(t.trim().length===0)return yield n(i);{const s=e.toLowerCase();return i.headers[s]=i.headers[s]?`${i.headers[s]} ${t}`:t,yield n(i)}})},Dt=(e,t)=>(n,o)=>{const i={};let s=r=>e(r,o);for(let r=t.length-1;r>=0;r--){const d=t[r];s=d(o)(s,i)}return s(n)},It=e=>{let t;return()=>(t||(t=e()),t)},nr=e=>!["HEAD","GET"].includes(e.toUpperCase()),or=(d,a)=>f(null,[d,a],function*({url:e,method:t,headers:n,body:o},{abortSignal:i,cache:s,withCrossDomainCredentials:r}){var p,m;let c;try{c=yield fetch(e,{method:t,headers:n,body:nr(t)?o:void 0,signal:i,cache:s,credentials:r?"include":"same-origin"})}catch(y){throw y instanceof TypeError?new M({name:ce.NetworkError,message:"A network error has occurred.",underlyingError:y}):y}const u={};(p=c.headers)==null||p.forEach((y,S)=>{u[S.toLowerCase()]=y});const h={statusCode:c.status,headers:u,body:null},l=Object.assign((m=c.body)!=null?m:{},{text:It(()=>c.text()),blob:It(()=>c.blob()),json:It(()=>c.json())});return v(g({},h),{body:l})}),Bo=Dt(or,[tr,Qs,Js,er]),ir=()=>e=>function(n){return f(this,null,function*(){return n.headers["cache-control"]="no-store",e(n)})},Wo=Dt(Bo,[ir]),qo=e=>(t,n)=>{const o=sr(e),i=JSON.stringify(t);return rr(n,o,i)},sr=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),rr=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),Kn=e=>oe(Wo,qo("GetCredentialsForIdentity"),ar,v(g(g({},Ko),e),{userAgentValue:ct()})),ar=e=>f(null,null,function*(){if(e.statusCode>=300)throw yield Le(e);const t=yield ut(e);return{IdentityId:t.IdentityId,Credentials:cr(t.Credentials),$metadata:dt(e)}}),cr=(n={})=>{var o=n,{Expiration:e}=o,t=pn(o,["Expiration"]);return v(g({},t),{Expiration:e&&new Date(e*1e3)})},dr=e=>oe(Wo,qo("GetId"),ur,v(g(g({},Ko),e),{userAgentValue:ct()})),ur=e=>f(null,null,function*(){if(e.statusCode>=300)throw yield Le(e);return{IdentityId:(yield ut(e)).IdentityId,$metadata:dt(e)}}),Ho={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},lr={partitions:[Ho,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},Vo=e=>{const{partitions:t}=lr;for(const{regions:n,outputs:o,regionRegex:i}of t){const s=new RegExp(i);if(n.includes(e)||s.test(e))return o.dnsSuffix}return Ho.outputs.dnsSuffix},Ke=URL,hr=({region:e})=>({url:new Ke(`https://${Lo}.${e}.${Vo(e)}`)});class Me extends M{constructor(){super({name:ce.PlatformNotSupported,message:"Function not supported on current platform"})}}class $o{constructor(t){this.storage=t}setItem(t,n){return f(this,null,function*(){if(!this.storage)throw new Me;this.storage.setItem(t,n)})}getItem(t){return f(this,null,function*(){if(!this.storage)throw new Me;return this.storage.getItem(t)})}removeItem(t){return f(this,null,function*(){if(!this.storage)throw new Me;this.storage.removeItem(t)})}clear(){return f(this,null,function*(){if(!this.storage)throw new Me;this.storage.clear()})}}class zo{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){var n;return(n=this.storage.get(t))!=null?n:null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const Go=new O("CoreStorageUtils"),fr=()=>{try{if(typeof window!="undefined"&&window.localStorage)return window.localStorage}catch(e){Go.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new zo},jo=()=>{try{if(typeof window!="undefined"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(e){return Go.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new zo}};class pr extends $o{constructor(){super(fr())}}class gr extends $o{constructor(){super(jo())}}class Er{constructor(t){this._storage=t}get storage(){if(!this._storage)throw new Me;return this._storage}setItem(t,n){this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}}class mr extends Er{constructor(){super(jo())}}function je(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var yr={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function xt(e,t){function n(i,s,r){if(typeof document!="undefined"){r=je({},t,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var a in r)r[a]&&(d+="; "+a,r[a]!==!0&&(d+="="+r[a].split(";")[0]));return document.cookie=i+"="+e.write(s,i)+d}}function o(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],r={},d=0;d<s.length;d++){var a=s[d].split("="),c=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(r[u]=e.read(c,u),i===u)break}catch(h){}}return i?r[i]:r}}return Object.create({set:n,get:o,remove:function(i,s){n(i,"",je({},s,{expires:-1}))},withAttributes:function(i){return xt(this.converter,je({},this.attributes,i))},withConverter:function(i){return xt(je({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ye=xt(yr,{path:"/"});class Ir{constructor(t={}){const{path:n,domain:o,expires:i,sameSite:s,secure:r}=t;if(this.domain=o,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?i:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?r:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!s||!["strict","lax","none"].includes(s))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(s==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=s}}setItem(t,n){return f(this,null,function*(){Ye.set(t,n,this.getData())})}getItem(t){return f(this,null,function*(){const n=Ye.get(t);return n!=null?n:null})}removeItem(t){return f(this,null,function*(){Ye.remove(t,this.getData())})}clear(){return f(this,null,function*(){const t=Ye.get(),n=Object.keys(t).map(o=>this.removeItem(o));yield Promise.all(n)})}getData(){return g({path:this.path,expires:this.expires,domain:this.domain,secure:this.secure},this.sameSite&&{sameSite:this.sameSite})}}const Be=new pr;new gr;const J=new mr,Sr=e=>{let t;return(...n)=>f(null,null,function*(){return t||(t=new Promise((o,i)=>{e(...n).then(s=>{o(s)}).catch(s=>{i(s)}).finally(()=>{t=void 0})}),t)})};function Bn({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}const wr=()=>f(null,null,function*(){const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:i="",fullVersionList:s=[]}=yield e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=s.map(a=>`${a.brand}/${a.version}`).join(";");return[t,n,i,o,t,r].filter(a=>a).join(" ")||navigator.userAgent});function vr(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const ke={convert(e,t={urlSafe:!1,skipPadding:!1}){const n=typeof e=="string"?e:vr(e);let o=Ai()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}};function xr(){return Ti().getRandomValues(new Uint32Array(1))[0]}function Rr(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let i=0;i<n;i++){const s=t[i>>>2]>>>24-i%4*8&255;o.push((s>>>4).toString(16)),o.push((s&15).toString(16))}return o.join("")}class Mt{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(xr());return new Mt(n,t)}toString(){return Rr(this)}}var x;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(x||(x={}));const Tr={[x.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[x.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[x.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[x.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[x.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[x.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[x.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[x.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[x.EmptySignInPassword]:{message:"password is required to signIn"},[x.EmptySignInUsername]:{message:"username is required to signIn"},[x.EmptySignUpPassword]:{message:"password is required to signUp"},[x.EmptySignUpUsername]:{message:"username is required to signUp"},[x.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[x.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[x.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[x.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[x.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var Wn;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(Wn||(Wn={}));var Ee;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(Ee||(Ee={}));class I extends M{constructor(t){super(t),this.constructor=I,Object.setPrototypeOf(this,I.prototype)}}function q(e,t){const{message:n,recoverySuggestion:o}=Tr[t];if(!e)throw new I({name:t,message:n,recoverySuggestion:o})}function F(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new I({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function Rt(e){if(!e||!e.includes(":"))throw new I({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}var qn;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(qn||(qn={}));var Hn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Hn||(Hn={}));var Vn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Vn||(Vn={}));var $n;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})($n||($n={}));var zn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(zn||(zn={}));var Gn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Gn||(Gn={}));var jn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(jn||(jn={}));var Yn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Yn||(Yn={}));var Jn;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Jn||(Jn={}));var Xn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Xn||(Xn={}));var Zn;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(Zn||(Zn={}));var Qn;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(Qn||(Qn={}));var eo;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(eo||(eo={}));var to;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(to||(to={}));var it;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(it||(it={}));var no;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(no||(no={}));var oo;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(oo||(oo={}));var io;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(io||(io={}));var so;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(so||(so={}));var ro;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ro||(ro={}));var ao;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ao||(ao={}));var co;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(co||(co={}));var uo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(uo||(uo={}));var lo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(lo||(lo={}));const lt="UserUnAuthenticatedException",Ar="UserAlreadyAuthenticatedException",Cr="DeviceMetadataNotFoundException",Pr="InvalidRedirectException",_r="InvalidAppSchemeException",Nr="InvalidPreferredRedirectUrlException",br=new I({name:Pr,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new I({name:_r,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new I({name:Nr,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const Dr="InvalidOriginException",Mr=new I({name:Dr,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),Ur="OAuthSignOutException",Or="TokenRefreshException",Fr="UnexpectedSignInInterruptionException";function kr(e){if(!e||!e.accessToken)throw new I({name:lt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function Lr(e){if(!e||!e.idToken)throw new I({name:lt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const Kr=new I({name:Or,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),Br=new I({name:lt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function Yo(e){if(Hr(e))throw Kr;if(!qr(e))throw Br}function Jo(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new I({name:Cr,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const Wr={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function Xo(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function qr(e){return Xo(e)&&(e==null?void 0:e.refreshToken)}function Hr(e){return Xo(e)&&!(e!=null&&e.refreshToken)}const Vr=e=>f(null,null,function*(){var d,a,c;const t=(d=e.getConfig().Auth)==null?void 0:d.Cognito;R(t);const n=yield e.Auth.getTokens({forceRefresh:!1});kr(n);const{"cognito:username":o,sub:i}=(c=(a=n.idToken)==null?void 0:a.payload)!=null?c:{},s={username:o,userId:i},r=$r(n);return r&&(s.signInDetails=r),s});function $r(e){return e==null?void 0:e.signInDetails}const Zo=()=>f(null,null,function*(){return Vr(P)}),he=(e,t)=>ct(g({category:wt.Auth,action:e},t)),Ie=e=>(t,n)=>{const o=zr(e),i=JSON.stringify(t);return Gr(n,o,i)},zr=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),Gr=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function G(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new I({name:ce.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const Se=()=>e=>f(null,null,function*(){if(e.statusCode>=300){const t=yield Le(e);throw G(t),new I({name:t.name,message:t.message,metadata:t.$metadata})}return ut(e)}),jr=()=>(e,t)=>function(o){return f(this,null,function*(){return o.headers["cache-control"]="no-store",e(o)})},we=Dt(Bo,[jr]),Qo="cognito-idp",ve={service:Qo,retryDecider:ko(Le),computeDelay:Fo,get userAgentValue(){return ct()},cache:"no-store"},We=e=>oe(we,Ie("InitiateAuth"),Se(),g(g({},ve),e)),ht=e=>oe(we,Ie("RespondToAuthChallenge"),Se(),g(g({},ve),e)),Yr=e=>oe(we,Ie("AssociateSoftwareToken"),Se(),g(g({},ve),e)),Jr=({region:e})=>({url:new Ke(`https://${Qo}.${e}.${Vo(e)}`)}),k=({endpointOverride:e})=>t=>e?{url:new Ke(e)}:Jr(t),Xr=e=>oe(we,Ie("GetTokensFromRefreshToken"),Se(),g(g({},ve),e)),Zr=i=>f(null,[i],function*({tokens:e,authConfig:t,username:n,clientMetadata:o}){var y,S,w;R(t==null?void 0:t.Cognito);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d}=t.Cognito,a=F(s);Yo(e);const c=Xr({endpointResolver:k({endpointOverride:d})}),{AuthenticationResult:u}=yield c({region:a},{ClientId:r,RefreshToken:e.refreshToken,DeviceKey:(y=e.deviceMetadata)==null?void 0:y.deviceKey,ClientMetadata:o}),h=ue((S=u==null?void 0:u.AccessToken)!=null?S:""),l=u!=null&&u.IdToken?ue(u.IdToken):void 0,{iat:p}=h.payload;if(!p)throw new I({name:"iatNotFoundException",message:"iat not found in access token"});const m=p*1e3-new Date().getTime();return{accessToken:h,idToken:l,clockDrift:m,refreshToken:(w=u==null?void 0:u.RefreshToken)!=null?w:e.refreshToken,username:n}}),Qr=Sr(Zr),ea={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var st;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(st||(st={}));const ta={[st.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},na=Pt(ta),ho="CognitoIdentityServiceProvider";class oa{getKeyValueStorage(){if(!this.keyValueStorage)throw new I({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}loadTokens(){return f(this,null,function*(){var t,n,o;try{const i=yield this.getAuthKeys(),s=yield this.getKeyValueStorage().getItem(i.accessToken);if(!s)throw new I({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=ue(s),d=yield this.getKeyValueStorage().getItem(i.idToken),a=d?ue(d):void 0,c=(t=yield this.getKeyValueStorage().getItem(i.refreshToken))!=null?t:void 0,u=(n=yield this.getKeyValueStorage().getItem(i.clockDrift))!=null?n:"0",h=Number.parseInt(u),l=yield this.getKeyValueStorage().getItem(i.signInDetails),p={accessToken:r,idToken:a,refreshToken:c,deviceMetadata:(o=yield this.getDeviceMetadata())!=null?o:void 0,clockDrift:h,username:yield this.getLastAuthUser()};return l&&(p.signInDetails=JSON.parse(l)),p}catch(i){return null}})}storeTokens(t){return f(this,null,function*(){na(t!==void 0,st.InvalidAuthTokens);const n=t.username;yield this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const o=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(o.accessToken,t.accessToken.toString()),t.idToken?yield this.getKeyValueStorage().setItem(o.idToken,t.idToken.toString()):yield this.getKeyValueStorage().removeItem(o.idToken),t.refreshToken?yield this.getKeyValueStorage().setItem(o.refreshToken,t.refreshToken):yield this.getKeyValueStorage().removeItem(o.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&(yield this.getKeyValueStorage().setItem(o.deviceKey,t.deviceMetadata.deviceKey)),t.deviceMetadata.deviceGroupKey&&(yield this.getKeyValueStorage().setItem(o.deviceGroupKey,t.deviceMetadata.deviceGroupKey)),yield this.getKeyValueStorage().setItem(o.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?yield this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(t.signInDetails)):yield this.getKeyValueStorage().removeItem(o.signInDetails),yield this.getKeyValueStorage().setItem(o.clockDrift,`${t.clockDrift}`)})}clearTokens(){return f(this,null,function*(){const t=yield this.getAuthKeys();yield Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])})}getDeviceMetadata(t){return f(this,null,function*(){const n=yield this.getAuthKeys(t),o=yield this.getKeyValueStorage().getItem(n.deviceKey),i=yield this.getKeyValueStorage().getItem(n.deviceGroupKey),s=yield this.getKeyValueStorage().getItem(n.randomPasswordKey);return s&&i&&o?{deviceKey:o,deviceGroupKey:i,randomPassword:s}:null})}clearDeviceMetadata(t){return f(this,null,function*(){const n=yield this.getAuthKeys(t);yield Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])})}getAuthKeys(t){return f(this,null,function*(){var o;R((o=this.authConfig)==null?void 0:o.Cognito);const n=t!=null?t:yield this.getLastAuthUser();return ia(ho,`${this.authConfig.Cognito.userPoolClientId}.${n}`)})}getLastAuthUserKey(){var n;R((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${ho}.${t}.LastAuthUser`}getLastAuthUser(){return f(this,null,function*(){var n;return(n=yield this.getKeyValueStorage().getItem(this.getLastAuthUserKey()))!=null?n:"username"})}setOAuthMetadata(t){return f(this,null,function*(){const{oauthMetadata:n}=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(n,JSON.stringify(t))})}getOAuthMetadata(){return f(this,null,function*(){const{oauthMetadata:t}=yield this.getAuthKeys(),n=yield this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)})}}const ia=(e,t)=>Ut(ea)(`${e}`,t);function Ut(e){const t=Object.values(g({},e));return(n,o)=>t.reduce((i,s)=>v(g({},i),{[s]:`${n}.${o}.${s}`}),{})}const fo="amplify-signin-with-hostedUI",V="CognitoIdentityServiceProvider";class ei{constructor(t){this.keyValueStorage=t}clearOAuthInflightData(){return f(this,null,function*(){R(this.cognitoConfig);const t=$(V,this.cognitoConfig.userPoolClientId);yield Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])})}clearOAuthData(){return f(this,null,function*(){R(this.cognitoConfig);const t=$(V,this.cognitoConfig.userPoolClientId);return yield this.clearOAuthInflightData(),yield this.keyValueStorage.removeItem(fo),this.keyValueStorage.removeItem(t.oauthSignIn)})}loadOAuthState(){R(this.cognitoConfig);const t=$(V,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){R(this.cognitoConfig);const n=$(V,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){R(this.cognitoConfig);const t=$(V,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){R(this.cognitoConfig);const n=$(V,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}loadOAuthInFlight(){return f(this,null,function*(){R(this.cognitoConfig);const t=$(V,this.cognitoConfig.userPoolClientId);return(yield this.keyValueStorage.getItem(t.inflightOAuth))==="true"})}storeOAuthInFlight(t){return f(this,null,function*(){R(this.cognitoConfig);const n=$(V,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)})}loadOAuthSignIn(){return f(this,null,function*(){var s,r;R(this.cognitoConfig);const t=$(V,this.cognitoConfig.userPoolClientId),n=yield this.keyValueStorage.getItem(fo),[o,i]=(r=(s=yield this.keyValueStorage.getItem(t.oauthSignIn))==null?void 0:s.split(","))!=null?r:[];return{isOAuthSignIn:o==="true"||n==="true",preferPrivateSession:i==="true"}})}storeOAuthSignIn(t,n=!1){return f(this,null,function*(){R(this.cognitoConfig);const o=$(V,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(o.oauthSignIn,`${t},${n}`)})}}const $=(e,t)=>Ut(Wr)(e,t),po=new ei(Be);class sa{constructor(){this.waitForInflightOAuth=Mo()?()=>f(this,null,function*(){if(yield po.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{}),this.inflightPromise)}):()=>f(this,null,function*(){})}setAuthConfig(t){po.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new I({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new I({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(t){this.clientMetadataProvider=t}getTokens(t){return f(this,null,function*(){var r,d,a,c,u,h,l,p,m,y,S;let n;try{R((r=this.authConfig)==null?void 0:r.Cognito)}catch(w){return null}yield this.waitForInflightOAuth(),this.inflightPromise=void 0,n=yield this.getTokenStore().loadTokens();const o=yield this.getTokenStore().getLastAuthUser();if(n===null)return null;const i=!!(n!=null&&n.idToken)&&Bn({expiresAt:((c=(a=(d=n.idToken)==null?void 0:d.payload)==null?void 0:a.exp)!=null?c:0)*1e3,clockDrift:(u=n.clockDrift)!=null?u:0}),s=Bn({expiresAt:((p=(l=(h=n.accessToken)==null?void 0:h.payload)==null?void 0:l.exp)!=null?p:0)*1e3,clockDrift:(m=n.clockDrift)!=null?m:0});return(t!=null&&t.forceRefresh||i||s)&&(n=yield this.refreshTokens({tokens:n,username:o,clientMetadata:(S=t==null?void 0:t.clientMetadata)!=null?S:yield(y=this.clientMetadataProvider)==null?void 0:y.call(this)}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}})}refreshTokens(i){return f(this,arguments,function*({tokens:t,username:n,clientMetadata:o}){try{const{signInDetails:s}=t,r=yield this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n,clientMetadata:o});return r.signInDetails=s,yield this.setTokens({tokens:r}),ge.dispatch("auth",{event:"tokenRefresh"},"Auth",de),r}catch(s){return this.handleErrors(s)}})}handleErrors(t){if(G(t),this.isAuthenticationError(t)&&this.clearTokens(),ge.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",de),t.name.startsWith("NotAuthorizedException"))return null;throw t}isAuthenticationError(t){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(o=>{var i,s;return(s=(i=t==null?void 0:t.name)==null?void 0:i.startsWith)==null?void 0:s.call(i,o)})}setTokens(n){return f(this,arguments,function*({tokens:t}){return this.getTokenStore().storeTokens(t)})}clearTokens(){return f(this,null,function*(){return this.getTokenStore().clearTokens()})}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class ra{constructor(){this.authTokenStore=new oa,this.authTokenStore.setKeyValueStorage(Be),this.tokenOrchestrator=new sa,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(Qr)}getTokens(t={}){return this.tokenOrchestrator.getTokens(t)}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setClientMetadataProvider(t){this.tokenOrchestrator.setClientMetadataProvider(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Ue=new ra,{tokenOrchestrator:B}=Ue;function xe(e){return f(this,null,function*(){if(e.AccessToken){const t=ue(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),i=n>0?n-o:0;let s,r,d;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(s=ue(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(d=e.NewDeviceMetadata);const a={accessToken:t,idToken:s,refreshToken:r,clockDrift:i,deviceMetadata:d,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),yield B.setTokens({tokens:a})}else throw new M({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})})}const aa="Unable to get user session following successful sign-in.",Re=()=>f(null,null,function*(){try{ge.dispatch("auth",{event:"signedIn",data:yield Zo()},"Auth",de)}catch(e){throw e.name===lt?new I({name:Fr,message:aa,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}});function ti(){return{active:!1}}const ca=(e,t)=>{switch(t.type){case"SET_USERNAME":return v(g({},e),{username:t.value});case"SET_SESSION":return v(g({},e),{session:t.value});case"START":return v(g({},e),{active:!0});case"RESET":return ti();default:return e}},da=e=>{let t=e(ti(),{type:"RESET"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},ni=da(ca),ua=180*1e3,Je="CognitoSignInState",X={username:`${Je}.username`,challengeName:`${Je}.challengeName`,signInSession:`${Je}.signInSession`,expiry:`${Je}.expiry`},la=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return Xe({signInSession:t.value}),v(g({},e),{signInSession:t.value});case"SET_SIGN_IN_STATE":return Xe(t.value),g({},t.value);case"SET_CHALLENGE_NAME":return Xe({challengeName:t.value}),v(g({},e),{challengeName:t.value});case"SET_USERNAME":return Xe({username:t.value}),v(g({},e),{username:t.value});case"SET_INITIAL_STATE":return fa();case"RESET_STATE":return oi(),Ot();default:return e}},ha=e=>{const t=Number(e),n=Date.now();return t<=n},j=()=>{ne.dispatch({type:"RESET_STATE"})},oi=()=>{for(const e of Object.values(X))J.removeItem(e)},Ot=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),fa=()=>{var i,s,r;const e=J.getItem(X.expiry);if(!e||ha(e))return oi(),Ot();const t=(i=J.getItem(X.username))!=null?i:void 0,n=(s=J.getItem(X.challengeName))!=null?s:void 0,o=(r=J.getItem(X.signInSession))!=null?r:void 0;return{username:t,challengeName:n,signInSession:o}},pa=e=>{let t=e(Ot(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},ne=pa(la);function Te(e){ne.dispatch({type:"SET_SIGN_IN_STATE",value:e})}const Xe=({challengeName:e,signInSession:t,username:n})=>{n&&J.setItem(X.username,n),e&&J.setItem(X.challengeName,e),t&&(J.setItem(X.signInSession,t),J.setItem(X.expiry,String(Date.now()+ua)))},go="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.";class Z extends M{constructor(t){super(t),this.constructor=Z,Object.setPrototypeOf(this,Z.prototype)}}var A;(function(e){e.PasskeyNotSupported="PasskeyNotSupported",e.PasskeyAlreadyExists="PasskeyAlreadyExists",e.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",e.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",e.RelyingPartyMismatch="RelyingPartyMismatch",e.PasskeyRegistrationFailed="PasskeyRegistrationFailed",e.PasskeyRetrievalFailed="PasskeyRetrievalFailed",e.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",e.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",e.PasskeyOperationAborted="PasskeyOperationAborted"})(A||(A={}));const St="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",Eo="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",rt={[A.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:go},[A.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:Eo},[A.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:Eo},[A.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:go},[A.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[A.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[A.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:St},[A.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:St},[A.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:St},[A.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},Ft=Pt(rt,Z),ga=e=>{if(e instanceof Error){if(e.name==="AbortError"){const{message:t,recoverySuggestion:n}=rt[A.PasskeyOperationAborted];return new Z({name:A.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if(e.name==="SecurityError"){const{message:t,recoverySuggestion:n}=rt[A.RelyingPartyMismatch];return new Z({name:A.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new Z({name:ce.Unknown,message:"An unknown error has occurred.",underlyingError:e})},Ea=e=>{if(e instanceof Z)return e;if(e instanceof Error&&e.name==="NotAllowedError"){const{message:t,recoverySuggestion:n}=rt[A.PasskeyAuthenticationCanceled];return new Z({name:A.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return ga(e)},ma=()=>Mo()&&window.isSecureContext&&"credentials"in navigator&&typeof window.PublicKeyCredential=="function",De=e=>ke.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0}),mo=e=>Uint8Array.from(_t.convert(e,{urlSafe:!0}),t=>t.charCodeAt(0)).buffer,ya=e=>{const t=mo(e.challenge),n=(e.allowCredentials||[]).map(o=>v(g({},o),{id:mo(o.id)}));return v(g({},e),{challenge:t,allowCredentials:n})},Ia=e=>{const t={clientDataJSON:De(e.response.clientDataJSON),authenticatorData:De(e.response.authenticatorData),signature:De(e.response.signature)};e.response.userHandle&&(t.userHandle=De(e.response.userHandle));const n={id:e.id,rawId:De(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n};function Sa(e){Ft(e&&e instanceof PublicKeyCredential&&e.response instanceof AuthenticatorAssertionResponse,A.PasskeyRetrievalFailed)}const wa=e=>f(null,null,function*(){try{const t=ma();Ft(t,A.PasskeyNotSupported);const n=ya(e),o=yield navigator.credentials.get({publicKey:n});return Sa(o),Ia(o)}catch(t){throw Ea(t)}}),va=e=>oe(we,Ie("ConfirmDevice"),Se(),g(g({},ve),e)),tt={convert(e){return new TextEncoder().encode(e)}};function E(e,t){e!=null&&this.fromString(e,t)}function D(){return new E(null,null)}let te;const xa=0xdeadbeefcafe,yo=(xa&16777215)===15715070;function Ra(e,t,n,o,i,s){for(;--s>=0;){const r=t*this[e++]+n[o]+i;i=Math.floor(r/67108864),n[o++]=r&67108863}return i}function Ta(e,t,n,o,i,s){const r=t&32767,d=t>>15;for(;--s>=0;){let a=this[e]&32767;const c=this[e++]>>15,u=d*a+c*r;a=r*a+((u&32767)<<15)+n[o]+(i&1073741823),i=(a>>>30)+(u>>>15)+d*c+(i>>>30),n[o++]=a&1073741823}return i}function Aa(e,t,n,o,i,s){const r=t&16383,d=t>>14;for(;--s>=0;){let a=this[e]&16383;const c=this[e++]>>14,u=d*a+c*r;a=r*a+((u&16383)<<14)+n[o]+i,i=(a>>28)+(u>>14)+d*c,n[o++]=a&268435455}return i}const Io=typeof navigator!="undefined";Io&&yo&&navigator.appName==="Microsoft Internet Explorer"?(E.prototype.am=Ta,te=30):Io&&yo&&navigator.appName!=="Netscape"?(E.prototype.am=Ra,te=26):(E.prototype.am=Aa,te=28);E.prototype.DB=te;E.prototype.DM=(1<<te)-1;E.prototype.DV=1<<te;const kt=52;E.prototype.FV=Math.pow(2,kt);E.prototype.F1=kt-te;E.prototype.F2=2*te-kt;const Ca="0123456789abcdefghijklmnopqrstuvwxyz",ft=[];let Ae,K;Ae=48;for(K=0;K<=9;++K)ft[Ae++]=K;Ae=97;for(K=10;K<36;++K)ft[Ae++]=K;Ae=65;for(K=10;K<36;++K)ft[Ae++]=K;function So(e){return Ca.charAt(e)}function Pa(e,t){const n=ft[e.charCodeAt(t)];return n==null?-1:n}function _a(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function Na(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function Lt(e){const t=D();return t.fromInt(e),t}function ba(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,i=!1,s=0;for(;--o>=0;){const r=Pa(e,o);if(r<0){e.charAt(o)==="-"&&(i=!0);continue}i=!1,s===0?this[this.t++]=r:s+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-s)-1)<<s,this[this.t++]=r>>this.DB-s):this[this.t-1]|=r<<s,s+=n,s>=this.DB&&(s-=this.DB)}this.clamp(),i&&E.ZERO.subTo(this,this)}function Da(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function Ma(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,i=!1,s="",r=this.t,d=this.DB-r*this.DB%t;if(r-- >0)for(d<this.DB&&(o=this[r]>>d)>0&&(i=!0,s=So(o));r>=0;)d<t?(o=(this[r]&(1<<d)-1)<<t-d,o|=this[--r]>>(d+=this.DB-t)):(o=this[r]>>(d-=t)&n,d<=0&&(d+=this.DB,--r)),o>0&&(i=!0),i&&(s+=So(o));return i?s:"0"}function Ua(){const e=D();return E.ZERO.subTo(this,e),e}function Oa(){return this.s<0?this.negate():this}function Fa(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function Kt(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function ka(){return this.t<=0?0:this.DB*(this.t-1)+Kt(this[this.t-1]^this.s&this.DM)}function La(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function Ka(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function Ba(e,t){const n=e%this.DB,o=this.DB-n,i=(1<<o)-1,s=Math.floor(e/this.DB);let r=this.s<<n&this.DM,d;for(d=this.t-1;d>=0;--d)t[d+s+1]=this[d]>>o|r,r=(this[d]&i)<<n;for(d=s-1;d>=0;--d)t[d]=0;t[s]=r,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Wa(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,i=this.DB-o,s=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&s)<<i,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function qa(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function Ha(e,t){const n=this.abs(),o=e.abs();let i=n.t;for(t.t=i+o.t;--i>=0;)t[i]=0;for(i=0;i<o.t;++i)t[i+n.t]=n.am(0,o[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&E.ZERO.subTo(t,t)}function Va(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function $a(e,t,n){const o=e.abs();if(o.t<=0)return;const i=this.abs();if(i.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=D());const s=D(),r=this.s,d=e.s,a=this.DB-Kt(o[o.t-1]);a>0?(o.lShiftTo(a,s),i.lShiftTo(a,n)):(o.copyTo(s),i.copyTo(n));const c=s.t,u=s[c-1];if(u===0)return;const h=u*(1<<this.F1)+(c>1?s[c-2]>>this.F2:0),l=this.FV/h,p=(1<<this.F1)/h,m=1<<this.F2;let y=n.t,S=y-c;const w=t===null?D():t;for(s.dlShiftTo(S,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),E.ONE.dlShiftTo(c,w),w.subTo(s,s);s.t<c;)s[s.t++]=0;for(;--S>=0;){let _=n[--y]===u?this.DM:Math.floor(n[y]*l+(n[y-1]+m)*p);if((n[y]+=s.am(0,_,n,S,0,c))<_)for(s.dlShiftTo(S,w),n.subTo(w,n);n[y]<--_;)n.subTo(w,n)}t!==null&&(n.drShiftTo(c,t),r!==d&&E.ZERO.subTo(t,t)),n.t=c,n.clamp(),a>0&&n.rShiftTo(a,n),r<0&&E.ZERO.subTo(n,n)}function za(e){const t=D();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(E.ZERO)>0&&e.subTo(t,t),t}function Ga(){if(this.t<1)return 0;const e=this[0];if((e&1)===0)return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function ja(e){return this.compareTo(e)===0}function Ya(e,t){let n=0,o=0;const i=Math.min(e.t,this.t);for(;n<i;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function Ja(e){const t=D();return this.addTo(e,t),t}function Xa(e){const t=D();return this.subTo(e,t),t}function Za(e){const t=D();return this.multiplyTo(e,t),t}function Qa(e){const t=D();return this.divRemTo(e,t,null),t}function Ce(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function ec(e){const t=D();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(E.ZERO)>0&&this.m.subTo(t,t),t}function tc(e){const t=D();return e.copyTo(t),this.reduce(t),t}function nc(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function oc(e,t){e.squareTo(t),this.reduce(t)}function ic(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Ce.prototype.convert=ec;Ce.prototype.revert=tc;Ce.prototype.reduce=nc;Ce.prototype.mulTo=ic;Ce.prototype.sqrTo=oc;function sc(e,t,n){let o=e.bitLength(),i,s=Lt(1);const r=new Ce(t);if(o<=0)return s;o<18?i=1:o<48?i=3:o<144?i=4:o<768?i=5:i=6;const d=[];let a=3;const c=i-1,u=(1<<i)-1;if(d[1]=r.convert(this),i>1){const w=D();for(r.sqrTo(d[1],w);a<=u;)d[a]=D(),r.mulTo(w,d[a-2],d[a]),a+=2}let h=e.t-1,l,p=!0,m=D(),y;for(o=Kt(e[h])-1;h>=0;){for(o>=c?l=e[h]>>o-c&u:(l=(e[h]&(1<<o+1)-1)<<c-o,h>0&&(l|=e[h-1]>>this.DB+o-c)),a=i;(l&1)===0;)l>>=1,--a;if((o-=a)<0&&(o+=this.DB,--h),p)d[l].copyTo(s),p=!1;else{for(;a>1;)r.sqrTo(s,m),r.sqrTo(m,s),a-=2;a>0?r.sqrTo(s,m):(y=s,s=m,m=y),r.mulTo(m,d[l],s)}for(;h>=0&&(e[h]&1<<o)===0;)r.sqrTo(s,m),y=s,s=m,m=y,--o<0&&(o=this.DB-1,--h)}const S=r.revert(s);return n(null,S),S}E.prototype.copyTo=_a;E.prototype.fromInt=Na;E.prototype.fromString=ba;E.prototype.clamp=Da;E.prototype.dlShiftTo=La;E.prototype.drShiftTo=Ka;E.prototype.lShiftTo=Ba;E.prototype.rShiftTo=Wa;E.prototype.subTo=qa;E.prototype.multiplyTo=Ha;E.prototype.squareTo=Va;E.prototype.divRemTo=$a;E.prototype.invDigit=Ga;E.prototype.addTo=Ya;E.prototype.toString=Ma;E.prototype.negate=Ua;E.prototype.abs=Oa;E.prototype.compareTo=Fa;E.prototype.bitLength=ka;E.prototype.mod=za;E.prototype.equals=ja;E.prototype.add=Ja;E.prototype.subtract=Xa;E.prototype.multiply=Za;E.prototype.divide=Qa;E.prototype.modPow=sc;E.ZERO=Lt(0);E.ONE=Lt(1);const rc=d=>f(null,[d],function*({a:e,g:t,k:n,x:o,B:i,N:s,U:r}){return new Promise((a,c)=>{t.modPow(o,s,(u,h)=>{if(u){c(u);return}i.subtract(n.multiply(h)).modPow(e.add(r.multiply(o)),s,(l,p)=>{if(l){c(l);return}a(p.mod(s))})})})}),ac="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",ii={},Tt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),ii[e]=t,Tt[t]=e}const me=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in Tt)t[n/2]=Tt[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},Bt=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=ii[e[n]];return t},At=e=>{const t=new ot;t.update(e);const n=t.digestSync(),o=Bt(n);return new Array(64-o.length).join("0")+o},nt=e=>At(me(e)),cc=/^[89a-f]/i,Y=e=>{if(!(e instanceof E))throw new Error("Not a BigInteger");const t=e.compareTo(E.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=cc.test(n)?`00${n}`:n,t){const o=n.split("").map(s=>{const r=~parseInt(s,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new E(o,16).add(E.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},dc=({A:e,B:t})=>{const n=new E(nt(Y(e)+Y(t)),16);if(n.equals(E.ZERO))throw new Error("U cannot be zero.");return n},uc=(e,t,n)=>{const o=new ot(t);o.update(e);const i=o.digestSync(),s=new ot(i);return s.update(n),s.digestSync().slice(0,16)},Wt=e=>{const t=new Mt().random(e).toString();return me(t)},lc=()=>ke.convert(Wt(40));class hc{constructor({userPoolName:t,a:n,g:o,A:i,N:s}){this.encoder=tt,this.userPoolName=t,this.a=n,this.g=o,this.A=i,this.N=s,this.k=new E(nt(`${Y(s)}${Y(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new I({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new I({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new I({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}generateHashDevice(t,n){return f(this,null,function*(){this.randomPassword=lc();const o=`${t}${n}:${this.randomPassword}`,i=At(o),s=Bt(Wt(16));return this.saltToHashDevices=Y(new E(s,16)),new Promise((r,d)=>{this.g.modPow(new E(nt(this.saltToHashDevices+i),16),this.N,(a,c)=>{if(a){d(a);return}this.verifierDevices=Y(c),r()})})})}getPasswordAuthenticationKey(s){return f(this,arguments,function*({username:t,password:n,serverBValue:o,salt:i}){if(o.mod(this.N).equals(E.ZERO))throw new Error("B cannot be zero.");const r=dc({A:this.A,B:o}),d=`${this.userPoolName}${t}:${n}`,a=At(d),c=new E(nt(Y(i)+a),16),u=yield rc({a:this.a,g:this.g,k:this.k,x:c,B:o,N:this.N,U:r}),h=this.encoder.convert("Caldera Derived Key"),l=this.encoder.convert(""),p=new Uint8Array(h.byteLength+l.byteLength);return p.set(h,0),p.set(l,h.byteLength),uc(me(Y(u)),me(Y(r)),p)})}}const fc=o=>f(null,[o],function*({a:e,g:t,N:n}){return new Promise((i,s)=>{t.modPow(e,n,(r,d)=>{if(r){s(r);return}if(d.mod(n).equals(E.ZERO)){s(new Error("Illegal parameter. A mod N cannot be 0."));return}i(d)})})}),pt=e=>f(null,null,function*(){const t=new E(ac,16),n=new E("2",16),o=pc(),i=yield fc({a:o,g:n,N:t});return new hc({userPoolName:e,a:o,g:n,A:i,N:t})}),pc=()=>{const e=Bt(Wt(128));return new E(e,16)};function Pe(i){return f(this,arguments,function*({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:o}){if(!n)return;const s=e.split("_")[1]||"",r=yield pt(s),d=n==null?void 0:n.DeviceKey,a=n==null?void 0:n.DeviceGroupKey;try{yield r.generateHashDevice(a!=null?a:"",d!=null?d:"")}catch(h){return}const c={Salt:ke.convert(me(r.getSaltToHashDevices())),PasswordVerifier:ke.convert(me(r.getVerifierDevices()))},u=r.getRandomPassword();try{return yield va({endpointResolver:k({endpointOverride:t})})({region:F(e)},{AccessToken:o,DeviceName:yield wr(),DeviceKey:n==null?void 0:n.DeviceKey,DeviceSecretVerifierConfig:c}),{deviceKey:d,deviceGroupKey:a,randomPassword:u}}catch(h){return}})}function gc(e){return f(this,null,function*(){var p;const t=(p=P.getConfig().Auth)==null?void 0:p.Cognito;R(t);const{username:n,signInSession:o,signInDetails:i,challengeName:s}=ne.getState();if(s!=="WEB_AUTHN"||!n)throw new I({name:Ee.SignInException,message:"Unable to proceed due to invalid sign in state."});const{CREDENTIAL_REQUEST_OPTIONS:r}=e;Ft(!!r,A.InvalidPasskeyAuthenticationOptions);const d=yield wa(JSON.parse(r)),a=ht({endpointResolver:k({endpointOverride:t.userPoolEndpoint})}),{ChallengeName:c,ChallengeParameters:u,AuthenticationResult:h,Session:l}=yield a({region:F(t.userPoolId),userAgentValue:he(Q.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:n,CREDENTIAL:JSON.stringify(d)},ClientId:t.userPoolClientId,Session:o});if(Te({signInSession:l,username:n,challengeName:c,signInDetails:i}),h)return yield xe(v(g({},h),{username:n,NewDeviceMetadata:yield Pe({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:h.NewDeviceMetadata,accessToken:h.AccessToken}),signInDetails:i})),ne.dispatch({type:"RESET_STATE"}),yield Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if(c==="WEB_AUTHN")throw new I({name:Ee.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:c,challengeParameters:u}})}function fe({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window=="undefined")return;const o=window.AmazonCognitoAdvancedSecurityData;if(typeof o=="undefined")return;const i=o.getData(e,t,n);return i?{EncodedData:i}:{}}const Ec=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],mc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],si=()=>{const e=new Date,t=mc[e.getUTCDay()],n=Ec[e.getUTCMonth()],o=e.getUTCDate();let i=e.getUTCHours();i<10&&(i=`0${i}`);let s=e.getUTCMinutes();s<10&&(s=`0${s}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const d=e.getUTCFullYear();return`${t} ${n} ${o} ${i}:${s}:${r} UTC ${d}`},ri=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:i})=>{const s=tt.convert(e),r=tt.convert(t),d=yc(n.SECRET_BLOCK),a=tt.convert(o),c=new Uint8Array(s.byteLength+r.byteLength+d.byteLength+a.byteLength);c.set(s,0),c.set(r,s.byteLength),c.set(d,s.byteLength+r.byteLength),c.set(a,s.byteLength+r.byteLength+d.byteLength);const u=new ot(i);u.update(c);const h=u.digestSync();return ke.convert(h)},yc=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=_t.convert(n),i=new Uint8Array(o.length);for(let s=0;s<o.length;++s)i[s]=o.charCodeAt(s);return i};function qt(s){return f(this,arguments,function*({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:i}){const{userPoolId:r,userPoolEndpoint:d}=t,a=t.userPoolClientId,c=yield i==null?void 0:i.getDeviceMetadata(e);Jo(c);const u=yield pt(c.deviceGroupKey),h={USERNAME:e,SRP_A:u.A.toString(16),DEVICE_KEY:c.deviceKey},l={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a,ChallengeResponses:h,ClientMetadata:n,Session:o},p=ht({endpointResolver:k({endpointOverride:d})}),{ChallengeParameters:m,Session:y}=yield p({region:F(r)},l);return Ic(e,m,n,y,u,t,i)})}function Ic(c,u,h,l,p,m,y){return f(this,arguments,function*(e,t,n,o,i,{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d},a){var pe;const S=yield a==null?void 0:a.getDeviceMetadata(e);Jo(S);const w=new E(t==null?void 0:t.SRP_B,16),_=new E(t==null?void 0:t.SALT,16),{deviceKey:ee}=S,{deviceGroupKey:ie}=S,W=yield i.getPasswordAuthenticationKey({username:S.deviceKey,password:S.randomPassword,serverBValue:w,salt:_}),$e=si(),ze={USERNAME:(pe=t==null?void 0:t.USERNAME)!=null?pe:e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:$e,PASSWORD_CLAIM_SIGNATURE:ri({username:ee,userPoolName:ie,challengeParameters:t,dateNow:$e,hkdf:W}),DEVICE_KEY:ee},Ne=fe({username:e,userPoolId:s,userPoolClientId:r}),H={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:ze,Session:o,ClientMetadata:n,UserContextData:Ne};return ht({endpointResolver:k({endpointOverride:d})})({region:F(s)},H)})}function ai(e,t,n,o,i,s,r){return f(this,null,function*(){const{userPoolId:d,userPoolClientId:a,userPoolEndpoint:c}=s,u=(d==null?void 0:d.split("_")[1])||"",h=new E(t==null?void 0:t.SRP_B,16),l=new E(t==null?void 0:t.SALT,16),p=t==null?void 0:t.USER_ID_FOR_SRP;if(!p)throw new I({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const m=yield i.getPasswordAuthenticationKey({username:p,password:e,serverBValue:h,salt:l}),y=si(),S={USERNAME:p,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:y,PASSWORD_CLAIM_SIGNATURE:ri({username:p,userPoolName:u,challengeParameters:t,dateNow:y,hkdf:m})},w=yield r.getDeviceMetadata(p);w&&w.deviceKey&&(S.DEVICE_KEY=w.deviceKey);const _=fe({username:p,userPoolId:d,userPoolClientId:a}),ee={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:S,ClientMetadata:n,Session:o,ClientId:a,UserContextData:_},W=yield ht({endpointResolver:k({endpointOverride:c})})({region:F(d)},ee);return W.ChallengeName==="DEVICE_SRP_AUTH"?qt({username:p,config:s,clientMetadata:n,session:W.Session,tokenOrchestrator:r}):W})}function gt(e,t,n,o){return f(this,null,function*(){try{return yield e(...t)}catch(i){if(i instanceof I&&i.name==="ResourceNotFoundException"&&i.message.includes("Device does not exist."))return yield o.clearDeviceMetadata(n),e(...t);throw i}})}function qe(e){const{dispatch:t}=ne;t({type:"SET_USERNAME",value:e})}function ci(d){return f(this,arguments,function*({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:s,preferredChallenge:r}){var W;const{userPoolId:a,userPoolClientId:c,userPoolEndpoint:u}=o,h=(a==null?void 0:a.split("_")[1])||"",l=yield pt(h),p={USERNAME:e,SRP_A:l.A.toString(16)};s==="USER_AUTH"&&r&&(p.PREFERRED_CHALLENGE=r);const m=fe({username:e,userPoolId:a,userPoolClientId:c}),y={AuthFlow:s,AuthParameters:p,ClientMetadata:n,ClientId:c,UserContextData:m},w=yield We({endpointResolver:k({endpointOverride:u})})({region:F(a),userAgentValue:he(Q.SignIn)},y),{ChallengeParameters:_,Session:ee}=w,ie=(W=_==null?void 0:_.USERNAME)!=null?W:e;return qe(ie),w.ChallengeName==="PASSWORD_VERIFIER"?gt(ai,[t,_,n,ee,l,o,i],ie,i):w})}const wo="userAttributes.";function Sc(e){return"isSignedIn"in e&&"nextStep"in e}function wc(e,t,n,o,i){return f(this,null,function*(){var y,S,w,_;const{userPoolClientId:s,userPoolId:r,userPoolEndpoint:d}=o,a={USERNAME:e,PASSWORD:t},c=yield i.getDeviceMetadata(e);c&&c.deviceKey&&(a.DEVICE_KEY=c.deviceKey);const u=fe({username:e,userPoolId:r,userPoolClientId:s}),h={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:n,ClientId:s,UserContextData:u},p=yield We({endpointResolver:k({endpointOverride:d})})({region:F(r),userAgentValue:he(Q.SignIn)},h),m=(_=(w=(y=p.ChallengeParameters)==null?void 0:y.USERNAME)!=null?w:(S=p.ChallengeParameters)==null?void 0:S.USER_ID_FOR_SRP)!=null?_:e;return qe(m),p.ChallengeName==="DEVICE_SRP_AUTH"?qt({username:m,config:o,clientMetadata:n,session:p.Session,tokenOrchestrator:i}):p})}function vc(e,t,n,o,i){return f(this,null,function*(){return ci({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:i,authFlow:"USER_SRP_AUTH"})})}function xc(e,t,n,o){return f(this,null,function*(){var m,y;const{userPoolClientId:i,userPoolId:s,userPoolEndpoint:r}=n,d={USERNAME:e},a=yield o.getDeviceMetadata(e);a&&a.deviceKey&&(d.DEVICE_KEY=a.deviceKey);const c=fe({username:e,userPoolId:s,userPoolClientId:i}),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:d,ClientMetadata:t,ClientId:i,UserContextData:c},l=yield We({endpointResolver:k({endpointOverride:r})})({region:F(s),userAgentValue:he(Q.SignIn)},u),p=(y=(m=l.ChallengeParameters)==null?void 0:m.USERNAME)!=null?y:e;return qe(p),l.ChallengeName==="DEVICE_SRP_AUTH"?qt({username:p,config:n,clientMetadata:t,session:l.Session,tokenOrchestrator:o}):l})}function Rc(e,t,n,o,i){return f(this,null,function*(){var w;R(o);const{userPoolId:s,userPoolClientId:r,userPoolEndpoint:d}=o,a=(s==null?void 0:s.split("_")[1])||"",c=yield pt(a),u={USERNAME:e,SRP_A:c.A.toString(16),CHALLENGE_NAME:"SRP_A"},h=fe({username:e,userPoolId:s,userPoolClientId:r}),l={AuthFlow:"CUSTOM_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:h},p=We({endpointResolver:k({endpointOverride:d})}),{ChallengeParameters:m,Session:y}=yield p({region:F(s),userAgentValue:he(Q.SignIn)},l),S=(w=m==null?void 0:m.USERNAME)!=null?w:e;return qe(S),gt(ai,[t,m,n,y,c,o,i],S,i)})}function _e(e){return f(this,null,function*(){var s;const{challengeName:t,challengeParameters:n,availableChallenges:o}=e,i=(s=P.getConfig().Auth)==null?void 0:s.Cognito;switch(R(i),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:r,username:d}=ne.getState(),a=vo(xo(n.MFAS_CAN_SETUP))||[],c=Pc(a),u=c.includes("TOTP"),h=c.includes("EMAIL");if(u&&h)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:c}};if(h)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(u){const l=Yr({endpointResolver:k({endpointOverride:i.userPoolEndpoint})}),{Session:p,SecretCode:m}=yield l({region:F(i.userPoolId)},{Session:r});return ne.dispatch({type:"SET_SIGN_IN_SESSION",value:p}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Tc(m,d)}}}throw new I({name:Ee.SignInException,message:`Cannot initiate MFA setup from available types: ${a}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:Ac(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:vo(xo(n.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{const r=yield gc(n);return Sc(r)?r:_e(r)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:o}}}throw new I({name:Ee.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})})}function Tc(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const i=`otpauth://totp/${n}:${o!=null?o:t}?secret=${e}&issuer=${n}`;return new Ke(i)}}}function He(e){if(e===it.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===it.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function Ac(e){return e?JSON.parse(e).map(n=>n.includes(wo)?n.replace(wo,""):n):[]}function Cc(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP";if(e==="EMAIL_OTP")return"EMAIL"}function vo(e){if(e)return e.map(Cc).filter(Boolean)}function xo(e){return e?JSON.parse(e):[]}function Pc(e){return e.filter(t=>t==="EMAIL"||t==="TOTP")}function _c(){return f(this,null,function*(){let e;try{e=yield Zo()}catch(t){}if(e&&e.userId&&e.username)throw new I({name:Ar,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})})}function Ve(e){var n;return(n=ne.getState().username)!=null?n:e}function Nc(e){return f(this,null,function*(){var d;const t=(d=P.getConfig().Auth)==null?void 0:d.Cognito;R(t);const{username:n,password:o,options:i}=e,s={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=i==null?void 0:i.clientMetadata;q(!!n,x.EmptySignInUsername),q(!o,x.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:h}=yield gt(xc,[n,r,t,B],n,B),l=Ve(n);return Te({signInSession:h,username:l,challengeName:a,signInDetails:s}),u?(yield xe(v(g({username:l},u),{NewDeviceMetadata:yield Pe({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s})),j(),yield Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):_e({challengeName:a,challengeParameters:c})}catch(a){j(),G(a);const c=He(a.name);if(c)return c;throw a}})}function bc(e){return f(this,null,function*(){var d;const{username:t,password:n,options:o}=e,i={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},s=(d=P.getConfig().Auth)==null?void 0:d.Cognito;R(s);const r=o==null?void 0:o.clientMetadata;q(!!t,x.EmptySignInUsername),q(!!n,x.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:h}=yield Rc(t,n,r,s,B),l=Ve(t);return Te({signInSession:h,username:l,challengeName:a,signInDetails:i}),u?(yield xe(v(g({username:l},u),{NewDeviceMetadata:yield Pe({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i})),j(),yield Re(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):_e({challengeName:a,challengeParameters:c})}catch(a){j(),G(a);const c=He(a.name);if(c)return c;throw a}})}function le(e=!0){ni.dispatch({type:"RESET"})}function Ro(e){return f(this,null,function*(){var r,d;const{username:t,password:n}=e,o=(r=P.getConfig().Auth)==null?void 0:r.Cognito,i={loginId:t,authFlowType:"USER_SRP_AUTH"};R(o);const s=(d=e.options)==null?void 0:d.clientMetadata;q(!!t,x.EmptySignInUsername),q(!!n,x.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:h}=yield vc(t,n,s,o,B),l=Ve(t);return Te({signInSession:h,username:l,challengeName:a,signInDetails:i}),u?(yield xe(v(g({username:l},u),{NewDeviceMetadata:yield Pe({userPoolId:o.userPoolId,userPoolEndpoint:o.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i})),j(),yield Re(),le(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):_e({challengeName:a,challengeParameters:c})}catch(a){j(),le(),G(a);const c=He(a.name);if(c)return c;throw a}})}function Dc(e){return f(this,null,function*(){var d;const{username:t,password:n,options:o}=e,i=(d=P.getConfig().Auth)==null?void 0:d.Cognito,s={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};R(i);const r=o==null?void 0:o.clientMetadata;q(!!t,x.EmptySignInUsername),q(!!n,x.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:c,AuthenticationResult:u,Session:h}=yield gt(wc,[t,n,r,i,B],t,B),l=Ve(t);return Te({signInSession:h,username:l,challengeName:a,signInDetails:s}),u?(yield xe(v(g({},u),{username:l,NewDeviceMetadata:yield Pe({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s})),j(),yield Re(),le(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):_e({challengeName:a,challengeParameters:c})}catch(a){j(),le(),G(a);const c=He(a.name);if(c)return c;throw a}})}function Mc(d){return f(this,arguments,function*({username:e,clientMetadata:t,config:n,tokenOrchestrator:o,preferredChallenge:i,password:s,session:r}){const{userPoolId:a,userPoolClientId:c,userPoolEndpoint:u}=n,h=fe({username:e,userPoolId:a,userPoolClientId:c}),l={USERNAME:e};if(i){if(i==="PASSWORD_SRP")return q(!!s,x.EmptySignInPassword),ci({username:e,password:s,clientMetadata:t,config:n,tokenOrchestrator:o,authFlow:"USER_AUTH",preferredChallenge:i});i==="PASSWORD"&&(q(!!s,x.EmptySignInPassword),l.PASSWORD=s),l.PREFERRED_CHALLENGE=i}const p={AuthFlow:"USER_AUTH",AuthParameters:l,ClientMetadata:t,ClientId:c,UserContextData:h};r&&(p.Session=r);const y=yield We({endpointResolver:k({endpointOverride:u})})({region:F(a),userAgentValue:he(Q.SignIn)},p);return qe(e),y})}function Uc(e){return f(this,null,function*(){var a;const{username:t,password:n,options:o}=e,i=(a=P.getConfig().Auth)==null?void 0:a.Cognito,s={loginId:t,authFlowType:"USER_AUTH"};R(i);const r=o==null?void 0:o.clientMetadata,d=o==null?void 0:o.preferredChallenge;q(!!t,x.EmptySignInUsername);try{const c={username:t,config:i,tokenOrchestrator:B,clientMetadata:r,preferredChallenge:d,password:n},u=ni.getState();u.active&&u.username===t&&(c.session=u.session);const h=yield Mc(c),l=Ve(t);return Te({signInSession:h.Session,username:l,challengeName:h.ChallengeName,signInDetails:s}),h.AuthenticationResult?(yield xe(v(g({username:l},h.AuthenticationResult),{NewDeviceMetadata:yield Pe({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:h.AuthenticationResult.NewDeviceMetadata,accessToken:h.AuthenticationResult.AccessToken}),signInDetails:s})),j(),yield Re(),le(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):_e({challengeName:h.ChallengeName,challengeParameters:h.ChallengeParameters,availableChallenges:"AvailableChallenges"in h?h.AvailableChallenges:void 0})}catch(c){j(),le(),G(c);const u=He(c.name);if(u)return u;throw c}})}function rd(e){return f(this,null,function*(){var n;le(!1);const t=(n=e.options)==null?void 0:n.authFlowType;switch(yield _c(),t){case"USER_SRP_AUTH":return Ro(e);case"USER_PASSWORD_AUTH":return Dc(e);case"CUSTOM_WITHOUT_SRP":return Nc(e);case"CUSTOM_WITH_SRP":return bc(e);case"USER_AUTH":return Uc(e);default:return Ro(e)}})}function Oc(e,t){var n,o;{const i=(n=e==null?void 0:e.find(Fc))!=null?n:e==null?void 0:e.find(kc),s=(o=e==null?void 0:e.find(Kc))!=null?o:e==null?void 0:e.find(Lc);if(i)return i;throw s?Mr:br}}const Fc=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),kc=e=>e.includes(String(window.location.hostname)),Lc=e=>e.startsWith("http://"),Kc=e=>e.startsWith("https://"),Bc=e=>f(null,null,function*(){window!=null&&window.location&&(window.location.href=e.replace("http://","https://"))}),Wc=e=>f(null,null,function*(){yield e.clearOAuthData(),B.clearTokens(),yield Uo(),ge.dispatch("auth",{event:"signedOut"},"Auth",de)}),qc=(e,t=!1,n)=>f(null,null,function*(){Ao(e);const{loginWith:o,userPoolClientId:i}=e,{domain:s,redirectSignOut:r}=o.oauth,d=Oc(r),a=`https://${s}/logout?${Object.entries({client_id:i,logout_uri:encodeURIComponent(d)}).map(([c,u])=>`${c}=${u}`).join("&")}`;return Bc(a)}),Hc=(e,t,n,o)=>f(null,null,function*(){const{isOAuthSignIn:i}=yield t.loadOAuthSignIn(),s=yield n.getOAuthMetadata();if(yield Wc(t),i||s!=null&&s.oauthSignIn)return qc(e,!1)}),Vc=e=>oe(we,Ie("RevokeToken"),Se(),g(g({},ve),e)),$c=new O("Auth");function ad(e){return f(this,null,function*(){var o,i;const t=(o=P.getConfig().Auth)==null?void 0:o.Cognito;R(t),yield zc(t);let n;try{Ao(t),n=!0}catch(s){n=!1}if(n){const s=new ei(Be);s.setAuthConfig(t);const{type:r}=(i=yield Hc(t,s,B))!=null?i:{};if(r==="error")throw new I({name:Ur,message:"An error occurred when attempting to log out from OAuth provider."})}else B.clearTokens(),yield Uo(),ge.dispatch("auth",{event:"signedOut"},"Auth",de)})}function zc(e){return f(this,null,function*(){try{const{userPoolEndpoint:t,userPoolId:n,userPoolClientId:o}=e,i=yield B.getTokenStore().loadTokens();Yo(i),Gc(i.accessToken)&&(yield Vc({endpointResolver:k({endpointOverride:t})})({region:F(n),userAgentValue:he(Q.SignOut)},{ClientId:o,Token:i.refreshToken}))}catch(t){$c.debug("Client signOut error caught but will proceed with token removal")}})}const Gc=e=>{var t;return!!((t=e==null?void 0:e.payload)!=null&&t.origin_jti)},jc={identityId:"identityId"},Yc=new O("DefaultIdentityIdStore");class di{setAuthConfig(t){Qe(t.Cognito),this.authConfig=t,this._authKeys=Jc("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}loadIdentityId(){return f(this,null,function*(){var t;Qe((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=yield this.keyValueStorage.getItem(this._authKeys.identityId);return n?(this._hasGuestIdentityId=!0,{id:n,type:"guest"}):null}}catch(n){return Yc.log("Error getting stored IdentityId.",n),null}})}storeIdentityId(t){return f(this,null,function*(){var n;Qe((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))})}clearIdentityId(){return f(this,null,function*(){this._primaryIdentityId=void 0,yield this.keyValueStorage.removeItem(this._authKeys.identityId)})}}const Jc=(e,t)=>Ut(jc)(`com.amplify.${e}`,t),Ct=({endpointOverride:e})=>t=>e?{url:new Ke(e)}:hr(t);function ui(e){const t=ue(e).payload.iss,n={};if(!t)throw new I({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const o=t.replace(/(^\w+:|^)\/\//,"");return n[o]=e,n}function Xc(o){return f(this,arguments,function*({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const i=yield n.loadIdentityId();if(i)return i.id;const s=e!=null&&e.idToken?ui(e.idToken.toString()):{},r=yield Zc(s,t);return n.storeIdentityId({id:r,type:e?"primary":"guest"}),r})}function Zc(e,t){return f(this,null,function*(){const n=t==null?void 0:t.identityPoolId,o=Rt(n),i=dr({endpointResolver:Ct({endpointOverride:t.identityPoolEndpoint})});let s;try{s=(yield i({region:o},{IdentityPoolId:n,Logins:e})).IdentityId}catch(r){throw G(r),new I(r)}if(!s)throw new I({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return s})}const Ze=new O("CognitoCredentialsProvider"),To=3e3*1e3;class li{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}clearCredentialsAndIdentityId(){return f(this,null,function*(){Ze.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,yield this._identityIdStore.clearIdentityId()})}clearCredentials(){return f(this,null,function*(){Ze.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0})}getCredentialsAndIdentityId(t){return f(this,null,function*(){const n=t.authenticated,{tokens:o}=t,{authConfig:i}=t;try{Qe(i==null?void 0:i.Cognito)}catch(a){return}if(!n&&!i.Cognito.allowGuestAccess)return;const{forceRefresh:s}=t,r=this.hasTokenChanged(o),d=yield Xc({tokens:o,authConfig:i.Cognito,identityIdStore:this._identityIdStore});return(s||r)&&this.clearCredentials(),n?(Lr(o),this.credsForOIDCTokens(i.Cognito,o,d)):this.getGuestCredentials(d,i.Cognito)})}getGuestCredentials(t,n){return f(this,null,function*(){var r,d;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return Ze.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=Rt(n.identityPoolId),i=Kn({endpointResolver:Ct({endpointOverride:n.identityPoolEndpoint})});let s;try{s=yield i({region:o},{IdentityId:t})}catch(a){throw G(a),new I(a)}if((r=s==null?void 0:s.Credentials)!=null&&r.AccessKeyId&&((d=s==null?void 0:s.Credentials)!=null&&d.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+To;const a={credentials:{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration},identityId:t};return s.IdentityId&&(a.identityId=s.IdentityId,this._identityIdStore.storeIdentityId({id:s.IdentityId,type:"guest"})),this._credentialsAndIdentityId=v(g({},a),{isAuthenticatedCreds:!1}),a}else throw new I({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}credsForOIDCTokens(t,n,o){return f(this,null,function*(){var a,c,u;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return Ze.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const i=n.idToken?ui(n.idToken.toString()):{},s=Rt(t.identityPoolId),r=Kn({endpointResolver:Ct({endpointOverride:t.identityPoolEndpoint})});let d;try{d=yield r({region:s},{IdentityId:o,Logins:i})}catch(h){throw G(h),new I(h)}if((a=d==null?void 0:d.Credentials)!=null&&a.AccessKeyId&&((c=d==null?void 0:d.Credentials)!=null&&c.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+To;const h={credentials:{accessKeyId:d.Credentials.AccessKeyId,secretAccessKey:d.Credentials.SecretKey,sessionToken:d.Credentials.SessionToken,expiration:d.Credentials.Expiration},identityId:o};return d.IdentityId&&(h.identityId=d.IdentityId,this._identityIdStore.storeIdentityId({id:d.IdentityId,type:"primary"})),this._credentialsAndIdentityId=v(g({},h),{isAuthenticatedCreds:!0,associatedIdToken:(u=n.idToken)==null?void 0:u.toString()}),h}else throw new I({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,o;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((o=t.idToken)==null?void 0:o.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const Qc=new li(new di(Be)),cd={configure(e,t){const n=_o(e),o=new Ir({sameSite:"lax"}),i=t!=null&&t.ssr?o:Be,s=t!=null&&t.ssr?new li(new di(o)):Qc;if(!n.Auth){P.configure(n,t);return}if(t!=null&&t.Auth){P.configure(n,t);return}if(!P.libraryOptions.Auth){Ue.setAuthConfig(n.Auth),Ue.setKeyValueStorage(i),P.configure(n,v(g({},t),{Auth:{tokenProvider:Ue,credentialsProvider:s}}));return}if(t){const r=P.libraryOptions.Auth;t.ssr!==void 0&&(Ue.setKeyValueStorage(i),r.credentialsProvider=s),P.configure(n,g({Auth:r},t));return}P.configure(n)},getConfig(){return P.getConfig()}};export{cd as D,rd as a,sd as f,Zo as g,ad as s};
