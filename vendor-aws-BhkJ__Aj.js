var vs=Object.defineProperty,Rs=Object.defineProperties;var xs=Object.getOwnPropertyDescriptors;var Xe=Object.getOwnPropertySymbols;var gn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable;var mn=Math.pow,fn=(e,t,n)=>t in e?vs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))gn.call(t,n)&&fn(e,n,t[n]);if(Xe)for(var n of Xe(t))En.call(t,n)&&fn(e,n,t[n]);return e},C=(e,t)=>Rs(e,xs(t));var In=(e,t)=>{var n={};for(var o in e)gn.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&Xe)for(var o of Xe(e))t.indexOf(o)<0&&En.call(e,o)&&(n[o]=e[o]);return n};var p=(e,t,n)=>new Promise((o,s)=>{var i=a=>{try{c(n.next(a))}catch(d){s(d)}},r=a=>{try{c(n.throw(a))}catch(d){s(d)}},c=a=>a.done?o(a.value):Promise.resolve(a.value).then(i,r);c((n=n.apply(e,t)).next())});import{_ as Ps,a as _s}from"./vendor-cloudscape-CBST2QX0.js";import"./vendor-react-D2p37RnT.js";var St={exports:{}},Oe={};var Sn;function Ns(){if(Sn)return Oe;Sn=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,s,i){var r=null;if(i!==void 0&&(r=""+i),s.key!==void 0&&(r=""+s.key),"key"in s){i={};for(var c in s)c!=="key"&&(i[c]=s[c])}else i=s;return s=i.ref,{$$typeof:e,type:o,key:r,ref:s!==void 0?s:null,props:i}}return Oe.Fragment=t,Oe.jsx=n,Oe.jsxs=n,Oe}var yn;function Ms(){return yn||(yn=1,St.exports=Ns()),St.exports}var Rd=Ms();const Ds="Logging",Us="NoHubcallbackProvidedException";var L;(function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"})(L||(L={}));const wn={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class K{constructor(t,n=L.WARN){this.name=t,this.level=n,this._pluggables=[]}_padding(t){return t<10?"0"+t:""+t}_ts(){const t=new Date;return[this._padding(t.getMinutes()),this._padding(t.getSeconds())].join(":")+"."+t.getMilliseconds()}configure(t){return t?(this._config=t,this._config):this._config}_log(t,...n){let o=this.level;K.LOG_LEVEL&&(o=K.LOG_LEVEL),typeof window!="undefined"&&window.LOG_LEVEL&&(o=window.LOG_LEVEL);const s=wn[o];if(!(wn[t]>=s))return;let r=console.log.bind(console);t===L.ERROR&&console.error&&(r=console.error.bind(console)),t===L.WARN&&console.warn&&(r=console.warn.bind(console)),K.BIND_ALL_LOG_LEVELS&&(t===L.INFO&&console.info&&(r=console.info.bind(console)),t===L.DEBUG&&console.debug&&(r=console.debug.bind(console)));const c=`[${t}] ${this._ts()} ${this.name}`;let a="";if(n.length===1&&typeof n[0]=="string")a=`${c} - ${n[0]}`,r(a);else if(n.length===1)a=`${c} ${n[0]}`,r(c,n[0]);else if(typeof n[0]=="string"){let d=n.slice(1);d.length===1&&(d=d[0]),a=`${c} - ${n[0]} ${d}`,r(`${c} - ${n[0]}`,d)}else a=`${c} ${n}`,r(c,n);for(const d of this._pluggables){const u={message:a,timestamp:Date.now()};d.pushLogs([u])}}log(...t){this._log(L.INFO,...t)}info(...t){this._log(L.INFO,...t)}warn(...t){this._log(L.WARN,...t)}error(...t){this._log(L.ERROR,...t)}debug(...t){this._log(L.DEBUG,...t)}verbose(...t){this._log(L.VERBOSE,...t)}addPluggable(t){t&&t.getCategoryName()===Ds&&(this._pluggables.push(t),t.configure(this._config))}listPluggables(){return this._pluggables}}K.LOG_LEVEL=null;K.BIND_ALL_LOG_LEVELS=!1;class k extends Error{constructor({message:t,name:n,recoverySuggestion:o,underlyingError:s,metadata:i}){if(super(t),this.name=n,this.underlyingError=s,this.recoverySuggestion=o,i){const{extendedRequestId:r,httpStatusCode:c,requestId:a}=i;this.metadata={extendedRequestId:r,httpStatusCode:c,requestId:a}}this.constructor=k,Object.setPrototypeOf(this,k.prototype)}}var Ee;(function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"})(Ee||(Ee={}));const Dt=(e,t=k)=>(n,o,s)=>{const{message:i,recoverySuggestion:r}=e[o];if(!n)throw new t({name:o,message:s?`${i} ${s}`:i,recoverySuggestion:r})},me=typeof Symbol!="undefined"?Symbol("amplify_default"):"@@amplify_default",Fe=new K("Hub");class bs{constructor(t){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=t}_remove(t,n){const o=this.listeners.get(t);if(!o){Fe.warn(`No listeners for ${t}`);return}this.listeners.set(t,[...o.filter(({callback:s})=>s!==n)])}dispatch(t,n,o,s){typeof t=="string"&&this.protectedChannels.indexOf(t)>-1&&(s===me||Fe.warn(`WARNING: ${t} is protected and dispatching on it can have unintended consequences`));const i={channel:t,payload:g({},n),source:o,patternInfo:[]};try{this._toListeners(i)}catch(r){Fe.error(r)}}listen(t,n,o="noname"){let s;if(typeof n!="function")throw new k({name:Us,message:"No callback supplied to Hub"});s=n;let i=this.listeners.get(t);return i||(i=[],this.listeners.set(t,i)),i.push({name:o,callback:s}),()=>{this._remove(t,s)}}_toListeners(t){const{channel:n,payload:o}=t,s=this.listeners.get(n);s&&s.forEach(i=>{Fe.debug(`Dispatching to ${n} with `,o);try{i.callback(t)}catch(r){Fe.error(r)}})}}const xe=new bs("__default__"),Os=()=>{if(typeof window=="object"&&typeof window.crypto=="object")return window.crypto;if(typeof crypto=="object")return crypto;throw new k({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},Fs=()=>{if(typeof window!="undefined"&&typeof window.btoa=="function")return window.btoa;if(typeof btoa=="function")return btoa;throw new k({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},ks=()=>{if(typeof window!="undefined"&&typeof window.atob=="function")return window.atob;if(typeof atob=="function")return atob;throw new k({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},Ut={convert(e,t){let n=e;return t!=null&&t.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),ks()(n)}};var Q;(function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"})(Q||(Q={}));const Ls={[Q.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[Q.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[Q.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[Q.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[Q.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},bt=Dt(Ls);function T(e){let t=!0;e?t=!!e.userPoolId&&!!e.userPoolClientId:t=!1,bt(t,Q.AuthUserPoolException)}function Mo(e){var n,o,s,i,r,c,a,d;const t=!!((o=(n=e==null?void 0:e.loginWith)==null?void 0:n.oauth)!=null&&o.domain)&&!!((i=(s=e==null?void 0:e.loginWith)==null?void 0:s.oauth)!=null&&i.redirectSignOut)&&!!((c=(r=e==null?void 0:e.loginWith)==null?void 0:r.oauth)!=null&&c.redirectSignIn)&&!!((d=(a=e==null?void 0:e.loginWith)==null?void 0:a.oauth)!=null&&d.responseType);bt(t,Q.OAuthNotConfigureException)}function ot(e){const t=!!(e!=null&&e.identityPoolId);bt(t,Q.InvalidIdentityPoolIdException)}function Ie(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid token");try{const o=t[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(Ut.convert(o).split("").map(r=>`%${`00${r.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),i=JSON.parse(s);return{toString:()=>e,payload:i}}catch(n){throw new Error("Invalid token payload")}}const Do=e=>{const t=Reflect.ownKeys(e);for(const n of t){const o=e[n];(o&&typeof o=="object"||typeof o=="function")&&Do(o)}return Object.freeze(e)},Ks=new K("parseAWSExports"),Bs={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},Ws=(e={})=>{var Jt,Xt,Qt,Zt,en,tn,nn,on,sn,rn,an,cn,dn,un,ln;if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new k({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});const{aws_appsync_apiKey:t,aws_appsync_authenticationType:n,aws_appsync_graphqlEndpoint:o,aws_appsync_region:s,aws_bots_config:i,aws_cognito_identity_pool_id:r,aws_cognito_sign_up_verification_method:c,aws_cognito_mfa_configuration:a,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:u,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:h,aws_cognito_social_providers:f,aws_cognito_username_attributes:E,aws_mandatory_sign_in:I,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:w,aws_user_files_s3_bucket:D,aws_user_files_s3_bucket_region:re,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:he,aws_user_pools_id:z,aws_user_pools_web_client_id:Ye,geo:Je,oauth:be,predictions:Y,aws_cloud_logic_custom:It,Notifications:Re,modelIntrospection:Gt}=e,b={};y&&(b.Analytics={Pinpoint:{appId:y,region:w}});const{InAppMessaging:pe,Push:fe}=Re!=null?Re:{};if(pe!=null&&pe.AWSPinpoint||fe!=null&&fe.AWSPinpoint){if(pe!=null&&pe.AWSPinpoint){const{appId:x,region:ge}=pe.AWSPinpoint;b.Notifications={InAppMessaging:{Pinpoint:{appId:x,region:ge}}}}if(fe!=null&&fe.AWSPinpoint){const{appId:x,region:ge}=fe.AWSPinpoint;b.Notifications=C(g({},b.Notifications),{PushNotification:{Pinpoint:{appId:x,region:ge}}})}}if(Array.isArray(i)&&(b.Interactions={LexV1:Object.fromEntries(i.map(x=>[x.name,x]))}),o){const x=Bs[n];x||Ks.debug(`Invalid authentication type ${n}. Falling back to IAM.`),b.API={GraphQL:{endpoint:o,apiKey:t,region:s,defaultAuthMode:x!=null?x:"iam"}},Gt&&(b.API.GraphQL.modelIntrospection=Gt)}const Is=a?{status:a&&a.toLowerCase(),totpEnabled:(Jt=d==null?void 0:d.includes("TOTP"))!=null?Jt:!1,smsEnabled:(Xt=d==null?void 0:d.includes("SMS"))!=null?Xt:!1}:void 0,Ss=u?{minLength:u.passwordPolicyMinLength,requireLowercase:(Zt=(Qt=u.passwordPolicyCharacters)==null?void 0:Qt.includes("REQUIRES_LOWERCASE"))!=null?Zt:!1,requireUppercase:(tn=(en=u.passwordPolicyCharacters)==null?void 0:en.includes("REQUIRES_UPPERCASE"))!=null?tn:!1,requireNumbers:(on=(nn=u.passwordPolicyCharacters)==null?void 0:nn.includes("REQUIRES_NUMBERS"))!=null?on:!1,requireSpecialCharacters:(rn=(sn=u.passwordPolicyCharacters)==null?void 0:sn.includes("REQUIRES_SYMBOLS"))!=null?rn:!1}:void 0,ys=Array.from(new Set([...l!=null?l:[],...h!=null?h:[]])).reduce((x,ge)=>C(g({},x),{[ge.toLowerCase()]:{required:!0}}),{}),jt=(an=E==null?void 0:E.includes("EMAIL"))!=null?an:!1,Yt=(cn=E==null?void 0:E.includes("PHONE_NUMBER"))!=null?cn:!1;(r||z)&&(b.Auth={Cognito:{identityPoolId:r,allowGuestAccess:I!=="enable",signUpVerificationMethod:c,userAttributes:ys,userPoolClientId:Ye,userPoolId:z,mfa:Is,passwordFormat:Ss,loginWith:{username:!(jt||Yt),email:jt,phone:Yt}}});const ws=be?Object.keys(be).length>0:!1,Cs=f?f.length>0:!1;if(b.Auth&&ws&&(b.Auth.Cognito.loginWith=C(g({},b.Auth.Cognito.loginWith),{oauth:g(g({},qs(be)),Cs&&{providers:Vs(f)})})),D&&(b.Storage={S3:{bucket:D,region:re,dangerouslyConnectToHttpEndpointForTesting:he}}),Je){const{amazon_location_service:x}=Je;b.Geo={LocationService:{maps:x.maps,geofenceCollections:x.geofenceCollections,searchIndices:x.search_indices,region:x.region}}}if(It&&(b.API=C(g({},b.API),{REST:It.reduce((x,ge)=>{const{name:As,endpoint:Ts,region:hn,service:pn}=ge;return C(g({},x),{[As]:g(g({endpoint:Ts},pn?{service:pn}:void 0),hn?{region:hn}:void 0)})},{})})),Y){const{VoiceId:x}=(ln=(un=(dn=Y==null?void 0:Y.convert)==null?void 0:dn.speechGenerator)==null?void 0:un.defaults)!=null?ln:{};b.Predictions=x?C(g({},Y),{convert:C(g({},Y.convert),{speechGenerator:C(g({},Y.convert.speechGenerator),{defaults:{voiceId:x}})})}):Y}return b},Cn=e=>{var t;return(t=e==null?void 0:e.split(","))!=null?t:[]},qs=({domain:e,scope:t,redirectSignIn:n,redirectSignOut:o,responseType:s})=>({domain:e,scopes:t,redirectSignIn:Cn(n),redirectSignOut:Cn(o),responseType:s}),Vs=e=>e.map(t=>{const n=t.toLowerCase();return n.charAt(0).toUpperCase()+n.slice(1)}),Hs=Symbol("oauth-listener"),O=[];for(let e=0;e<256;++e)O.push((e+256).toString(16).slice(1));function $s(e,t=0){return(O[e[t+0]]+O[e[t+1]]+O[e[t+2]]+O[e[t+3]]+"-"+O[e[t+4]]+O[e[t+5]]+"-"+O[e[t+6]]+O[e[t+7]]+"-"+O[e[t+8]]+O[e[t+9]]+"-"+O[e[t+10]]+O[e[t+11]]+O[e[t+12]]+O[e[t+13]]+O[e[t+14]]+O[e[t+15]]).toLowerCase()}let yt;const zs=new Uint8Array(16);function Gs(){if(!yt){if(typeof crypto=="undefined"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");yt=crypto.getRandomValues.bind(crypto)}return yt(zs)}const js=typeof crypto!="undefined"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),An={randomUUID:js};function Ys(e,t,n){var s,i,r;if(An.randomUUID&&!t&&!e)return An.randomUUID();e=e||{};const o=(r=(i=e.random)!=null?i:(s=e.rng)==null?void 0:s.call(e))!=null?r:Gs();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(n=n||0,n<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let c=0;c<16;++c)t[n+c]=o[c];return t}return $s(o)}function Js(e){const{version:t}=e;return t?t.startsWith("1"):!1}function Xs(e){if(!e)return;const{bucket_name:t,aws_region:n,buckets:o}=e;return{S3:{bucket:t,region:n,buckets:o&&ci(o)}}}function Qs(e){var f;if(!e)return;const{user_pool_id:t,user_pool_client_id:n,identity_pool_id:o,password_policy:s,mfa_configuration:i,mfa_methods:r,unauthenticated_identities_enabled:c,oauth:a,username_attributes:d,standard_required_attributes:u,groups:l}=e,h={Cognito:{userPoolId:t,userPoolClientId:n,groups:l}};return o&&(h.Cognito=C(g({},h.Cognito),{identityPoolId:o})),s&&(h.Cognito.passwordFormat={requireLowercase:s.require_lowercase,requireNumbers:s.require_numbers,requireUppercase:s.require_uppercase,requireSpecialCharacters:s.require_symbols,minLength:(f=s.min_length)!=null?f:6}),i&&(h.Cognito.mfa={status:ai(i),smsEnabled:r==null?void 0:r.includes("SMS"),totpEnabled:r==null?void 0:r.includes("TOTP")}),c&&(h.Cognito.allowGuestAccess=c),a&&(h.Cognito.loginWith={oauth:{domain:a.domain,redirectSignIn:a.redirect_sign_in_uri,redirectSignOut:a.redirect_sign_out_uri,responseType:a.response_type==="token"?"token":"code",scopes:a.scopes,providers:ri(a.identity_providers)}}),d&&(h.Cognito.loginWith=C(g({},h.Cognito.loginWith),{email:d.includes("email"),phone:d.includes("phone_number"),username:d.includes("username")})),u&&(h.Cognito.userAttributes=u.reduce((E,I)=>C(g({},E),{[I]:{required:!0}}),{})),h}function Zs(e){if(!(e!=null&&e.amazon_pinpoint))return;const{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}function ei(e){if(!e)return;const{aws_region:t,geofence_collections:n,maps:o,search_indices:s}=e;return{LocationService:{region:t,searchIndices:s,geofenceCollections:n,maps:o}}}function ti(e){if(!e)return;const{aws_region:t,default_authorization_type:n,url:o,api_key:s,model_introspection:i}=e;return{GraphQL:{endpoint:o,defaultAuthMode:Uo(n),region:t,apiKey:s,modelIntrospection:i}}}function ni(e){if(!(e!=null&&e.events))return;const{url:t,aws_region:n,api_key:o,default_authorization_type:s}=e.events;return{Events:{endpoint:t,defaultAuthMode:Uo(s),region:n,apiKey:o}}}function oi(e){if(!e)return;const{aws_region:t,channels:n,amazon_pinpoint_app_id:o}=e,s=n.includes("IN_APP_MESSAGING"),i=n.includes("APNS")||n.includes("FCM");if(!(s||i))return;const r={};return s&&(r.InAppMessaging={Pinpoint:{appId:o,region:t}}),i&&(r.PushNotification={Pinpoint:{appId:o,region:t}}),r}function si(e){const t={};if(e.storage&&(t.Storage=Xs(e.storage)),e.auth&&(t.Auth=Qs(e.auth)),e.analytics&&(t.Analytics=Zs(e.analytics)),e.geo&&(t.Geo=ei(e.geo)),e.data&&(t.API=ti(e.data)),e.custom){const n=ni(e.custom);n&&"Events"in n&&(t.API=g(g({},t.API),n))}return e.notifications&&(t.Notifications=oi(e.notifications)),t}const ii={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"};function Uo(e){return ii[e]}const Tn={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"};function ri(e=[]){return e.reduce((t,n)=>(Tn[n]!==void 0&&t.push(Tn[n]),t),[])}function ai(e){return e==="OPTIONAL"?"optional":e==="REQUIRED"?"on":"off"}function ci(e){const t={};return e.forEach(({name:n,bucket_name:o,aws_region:s,paths:i})=>{if(n in t)throw new Error(`Duplicate friendly name found: ${n}. Name must be unique.`);const r=i?Object.entries(i).reduce((c,[a,d])=>(d!==void 0&&(c[a]=d),c),{}):void 0;t[n]={bucketName:o,region:s,paths:r}}),t}const bo=e=>Object.keys(e).some(t=>t.startsWith("aws_"))?Ws(e):Js(e)?si(e):e;var H=64,di=32,ui=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),li=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],hi=Math.pow(2,53)-1,st=(function(){function e(){this.state=Int32Array.from(li),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(t){if(this.finished)throw new Error("Attempted to update an already finished hash.");var n=0,o=t.byteLength;if(this.bytesHashed+=o,this.bytesHashed*8>hi)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;o>0;)this.buffer[this.bufferLength++]=t[n++],o--,this.bufferLength===H&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var t=this.bytesHashed*8,n=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),o=this.bufferLength;if(n.setUint8(this.bufferLength++,128),o%H>=H-8){for(var s=this.bufferLength;s<H;s++)n.setUint8(s,0);this.hashBuffer(),this.bufferLength=0}for(var s=this.bufferLength;s<H-8;s++)n.setUint8(s,0);n.setUint32(H-8,Math.floor(t/4294967296),!0),n.setUint32(H-4,t),this.hashBuffer(),this.finished=!0}for(var i=new Uint8Array(di),s=0;s<8;s++)i[s*4]=this.state[s]>>>24&255,i[s*4+1]=this.state[s]>>>16&255,i[s*4+2]=this.state[s]>>>8&255,i[s*4+3]=this.state[s]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var t=this,n=t.buffer,o=t.state,s=o[0],i=o[1],r=o[2],c=o[3],a=o[4],d=o[5],u=o[6],l=o[7],h=0;h<H;h++){if(h<16)this.temp[h]=(n[h*4]&255)<<24|(n[h*4+1]&255)<<16|(n[h*4+2]&255)<<8|n[h*4+3]&255;else{var f=this.temp[h-2],E=(f>>>17|f<<15)^(f>>>19|f<<13)^f>>>10;f=this.temp[h-15];var I=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3;this.temp[h]=(E+this.temp[h-7]|0)+(I+this.temp[h-16]|0)}var y=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&d^~a&u)|0)+(l+(ui[h]+this.temp[h]|0)|0)|0,w=((s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10))+(s&i^s&r^i&r)|0;l=u,u=d,d=a,a=c+y|0,c=r,r=i,i=s,s=y+w|0}o[0]+=s,o[1]+=i,o[2]+=r,o[3]+=c,o[4]+=a,o[5]+=d,o[6]+=u,o[7]+=l},e})();const pi=e=>new TextEncoder().encode(e);var fi=typeof Buffer!="undefined"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:pi;function Oo(e){return e instanceof Uint8Array?e:typeof e=="string"?fi(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}function gi(e){return typeof e=="string"?e.length===0:e.byteLength===0}var at=(function(){function e(t){this.secret=t,this.hash=new st,this.reset()}return e.prototype.update=function(t){if(!(gi(t)||this.error))try{this.hash.update(Oo(t))}catch(n){this.error=n}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return Ps(this,void 0,void 0,function(){return _s(this,function(t){return[2,this.digestSync()]})})},e.prototype.reset=function(){if(this.hash=new st,this.secret){this.outer=new st;var t=Ei(this.secret),n=new Uint8Array(H);n.set(t);for(var o=0;o<H;o++)t[o]^=54,n[o]^=92;this.hash.update(t),this.outer.update(n);for(var o=0;o<t.byteLength;o++)t[o]=0}},e})();function Ei(e){var t=Oo(e);if(t.byteLength>H){var n=new st;n.update(t),t=n.digest()}var o=new Uint8Array(H);return o.set(t),o}for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`)}var N;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(N||(N={}));var Tt;(function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"})(Tt||(Tt={}));var vn;(function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"})(vn||(vn={}));var Rn;(function(e){e.Record="1",e.IdentifyUser="2"})(Rn||(Rn={}));var xn;(function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"})(xn||(xn={}));var M;(function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"})(M||(M={}));var Pn;(function(e){e.Subscribe="1",e.GraphQl="2"})(Pn||(Pn={}));var _n;(function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"})(_n||(_n={}));var Nn;(function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"})(Nn||(Nn={}));var Mn;(function(e){e.None="0"})(Mn||(Mn={}));var Dn;(function(e){e.Convert="1",e.Identify="2",e.Interpret="3"})(Dn||(Dn={}));var Un;(function(e){e.Subscribe="1"})(Un||(Un={}));var bn;(function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"})(bn||(bn={}));var On;(function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"})(On||(On={}));const mi="6.15.8",lt=()=>typeof global!="undefined",_e=()=>typeof window!="undefined",Fo=()=>typeof document!="undefined",Ot=()=>typeof process!="undefined",We=(e,t)=>!!Object.keys(e).find(n=>n.startsWith(t));var Fn={};function Ii(){const e=o=>o.startsWith("_react")||o.startsWith("__react"),t=o=>Object.keys(o).find(e),n=()=>Array.from(document.querySelectorAll("[id]"));return Fo()&&n().some(t)}function Si(){return Ot()&&typeof Fn!="undefined"&&!!Object.keys(Fn).find(e=>e.includes("react"))}function yi(){return _e()&&We(window,"__VUE")}function wi(){return lt()&&We(global,"__VUE")}var kn={};function Ci(){return _e()&&We(window,"__SVELTE")}function Ai(){return Ot()&&typeof kn!="undefined"&&!!Object.keys(kn).find(e=>e.includes("svelte"))}function Ti(){return _e()&&window.next&&typeof window.next=="object"}function vi(){return lt()&&(We(global,"__next")||We(global,"__NEXT"))}function Ri(){return _e()&&(window.__NUXT__!==void 0||window.$nuxt!==void 0)}function xi(){return lt()&&typeof global.__NUXT_PATHS__!="undefined"}var Ln={};function Pi(){const e=!!(Fo()&&document.querySelector("[ng-version]")),t=!!(_e()&&typeof window.ng!="undefined");return e||t}function _i(){var e;return Ot()&&typeof Ln=="object"&&((e=Ln.npm_lifecycle_script)==null?void 0:e.startsWith("ng "))||!1}function Ni(){return typeof navigator!="undefined"&&typeof navigator.product!="undefined"&&navigator.product==="ReactNative"}function Mi(){return lt()&&typeof global.expo!="undefined"}function Di(){return _e()}const Ui=[{platform:N.Expo,detectionMethod:Mi},{platform:N.ReactNative,detectionMethod:Ni},{platform:N.NextJs,detectionMethod:Ti},{platform:N.Nuxt,detectionMethod:Ri},{platform:N.Angular,detectionMethod:Pi},{platform:N.React,detectionMethod:Ii},{platform:N.VueJs,detectionMethod:yi},{platform:N.Svelte,detectionMethod:Ci},{platform:N.WebUnknown,detectionMethod:Di},{platform:N.NextJsSSR,detectionMethod:vi},{platform:N.NuxtSSR,detectionMethod:xi},{platform:N.ReactSSR,detectionMethod:Si},{platform:N.VueJsSSR,detectionMethod:wi},{platform:N.AngularSSR,detectionMethod:_i},{platform:N.SvelteSSR,detectionMethod:Ai}];function bi(){var e;return((e=Ui.find(t=>t.detectionMethod()))==null?void 0:e.platform)||N.ServerSideUnknown}let Be;const wt=[];let vt=!1;const Oi=10,Fi=10,ki=1e3,ko=()=>{var e;if(!Be){if(Be=bi(),vt)for(;wt.length;)(e=wt.pop())==null||e();else wt.forEach(t=>{t()});Kn(N.ServerSideUnknown,Oi),Kn(N.WebUnknown,Fi)}return Be};function Li(){Be=void 0}function Kn(e,t){Be===e&&!vt&&setTimeout(()=>{Li(),vt=!0,setTimeout(ko,ki)},t)}const Ki={},Bi=(e,t)=>{var n,o;return(o=(n=Ki[e])==null?void 0:n[t])==null?void 0:o.additionalDetails},Wi="aws-amplify",qi=e=>e.replace(/\+.*/,""),Vi=({category:e,action:t}={})=>{const n=[[Wi,qi(mi)]];if(e&&n.push([e,t]),n.push(["framework",ko()]),e&&t){const o=Bi(e,t);o&&o.forEach(s=>{n.push(s)})}return n},ht=e=>Vi(e).map(([o,s])=>o&&s?`${o}/${s}`:o).join(" "),Lo=()=>typeof window!="undefined"&&typeof window.document!="undefined",Bn=new K("Auth");class Hi{configure(t,n){var o,s;this.authConfig=t,this.authOptions=n,t&&((o=t.Cognito)!=null&&o.userPoolEndpoint)&&Bn.warn(Wn("Amazon Cognito User Pool")),t&&((s=t.Cognito)!=null&&s.identityPoolEndpoint)&&Bn.warn(Wn("Amazon Cognito Identity Pool"))}fetchAuthSession(){return p(this,arguments,function*(t={}){var i,r,c,a,d,u;let n,o;const s=yield this.getTokens(t);return s?(o=(r=(i=s.accessToken)==null?void 0:i.payload)==null?void 0:r.sub,n=yield(a=(c=this.authOptions)==null?void 0:c.credentialsProvider)==null?void 0:a.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:s,authenticated:!0,forceRefresh:t.forceRefresh})):n=yield(u=(d=this.authOptions)==null?void 0:d.credentialsProvider)==null?void 0:u.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:t.forceRefresh}),{tokens:s,credentials:n==null?void 0:n.credentials,identityId:n==null?void 0:n.identityId,userSub:o}})}clearCredentials(){return p(this,null,function*(){var t,n;yield(n=(t=this.authOptions)==null?void 0:t.credentialsProvider)==null?void 0:n.clearCredentialsAndIdentityId()})}getTokens(t){return p(this,null,function*(){var n,o,s;return(s=yield(o=(n=this.authOptions)==null?void 0:n.tokenProvider)==null?void 0:o.getTokens(t))!=null?s:void 0})}}const Wn=e=>`You are using a custom Amazon ${e} endpoint, ensure the endpoint is correct.`;class $i{constructor(){this.oAuthListener=void 0,this.isConfigured=!1,this.resourcesConfig={},this.libraryOptions={},this.Auth=new Hi}configure(t,n){const o=bo(t);this.resourcesConfig=o,n&&(this.libraryOptions=n),this.resourcesConfig=Do(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),xe.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",me),this.notifyOAuthListener(),this.isConfigured=!0}getConfig(){return this.isConfigured||console.warn("Amplify has not been configured. Please call Amplify.configure() before using this service."),this.resourcesConfig}[Hs](t){var n,o,s;(o=(n=this.resourcesConfig.Auth)==null?void 0:n.Cognito.loginWith)!=null&&o.oauth?t((s=this.resourcesConfig.Auth)==null?void 0:s.Cognito):this.oAuthListener=t}notifyOAuthListener(){var t,n,o;!((n=(t=this.resourcesConfig.Auth)==null?void 0:t.Cognito.loginWith)!=null&&n.oauth)||!this.oAuthListener||(this.oAuthListener((o=this.resourcesConfig.Auth)==null?void 0:o.Cognito),this.oAuthListener=void 0)}}const _=new $i,Ko=(e,t)=>e.Auth.fetchAuthSession(t),xd=e=>Ko(_,e);function Bo(){return _.Auth.clearCredentials()}const pt=e=>{var o,s;const{headers:t,statusCode:n}=e;return C(g({},zi(e)?e.$metadata:{}),{httpStatusCode:n,requestId:(s=(o=t["x-amzn-requestid"])!=null?o:t["x-amzn-request-id"])!=null?s:t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]})},zi=e=>typeof(e==null?void 0:e.$metadata)=="object",Ve=e=>p(null,null,function*(){var r,c,a,d,u;if(!e||e.statusCode<300)return;const t=yield ft(e),o=(l=>{const[h]=l.toString().split(/[,:]+/);return h.includes("#")?h.split("#")[1]:h})((a=(c=(r=e.headers["x-amzn-errortype"])!=null?r:t.code)!=null?c:t.__type)!=null?a:"UnknownError"),s=(u=(d=t.message)!=null?d:t.Message)!=null?u:"Unknown error",i=new Error(s);return Object.assign(i,{name:o,$metadata:pt(e)})}),ft=e=>p(null,null,function*(){if(!e.body)throw new Error("Missing response payload");const t=yield e.body.json();return Object.assign(t,{$metadata:pt(e)})}),ee=(e,t,n,o)=>(s,i)=>p(null,null,function*(){const r=g(g({},o),s),c=yield r.endpointResolver(r,i),a=yield t(i,c),d=yield e(a,g({},r));return n(d)}),Gi=300*1e3;function ji(e=Gi){return o=>{const s=mn(2,o)*100+100*Math.random();return s>e?!1:s}}const Wo=3,qn="amz-sdk-invocation-id",Yi="amz-sdk-request",Vn=300*1e3,qo=e=>{const n=ji(Vn)(e);return n===!1?Vn:n},Ji=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],Xi=e=>!!e&&Ji.includes(e),Vo=e=>(t,n)=>p(null,null,function*(){var c;const o=(c=n!=null?n:yield e(t))!=null?c:void 0,s=(o==null?void 0:o.code)||(o==null?void 0:o.name),i=t==null?void 0:t.statusCode;return{retryable:tr(n)||er(i,s)||Xi(s)||nr(i,s)}}),Qi=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],Zi=["TimeoutError","RequestTimeout","RequestTimeoutException"],er=(e,t)=>e===429||!!t&&Qi.includes(t),tr=e=>[Ee.NetworkError,"ERR_NETWORK"].includes(e==null?void 0:e.name),nr=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&Zi.includes(t),Ho="cognito-identity",$o={service:Ho,retryDecider:Vo(Ve),computeDelay:qo,cache:"no-store"},or=({maxAttempts:e=Wo,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw new Error("maxAttempts must be greater than 0");return(s,i)=>function(c){return p(this,null,function*(){var h,f,E;let a,d=(h=i.attemptsCount)!=null?h:0,u;const l=()=>{if(u)return Hn(u,d),u;throw Hn(a,d),a};for(;!(o!=null&&o.aborted)&&d<e;){try{u=yield s(c),a=void 0}catch(w){a=w,u=void 0}d=((f=i.attemptsCount)!=null?f:0)>d?(E=i.attemptsCount)!=null?E:0:d+1,i.attemptsCount=d;const{isCredentialsExpiredError:I,retryable:y}=yield t(u,a,i);if(y){if(i.isCredentialsExpired=!!I,!(o!=null&&o.aborted)&&d<e){const w=n(d);yield sr(w,o)}continue}else return l()}if(o!=null&&o.aborted)throw new Error("Request aborted.");return l()})}},sr=(e,t)=>{if(t!=null&&t.aborted)return Promise.resolve();let n,o;const s=new Promise(i=>{o=i,n=setTimeout(i,e)});return t==null||t.addEventListener("abort",function i(r){clearTimeout(n),t==null||t.removeEventListener("abort",i),o()}),s},Hn=(e,t)=>{var n;Object.prototype.toString.call(e)==="[object Object]"&&(e.$metadata=C(g({},(n=e.$metadata)!=null?n:{}),{attempts:t}))},ir=Ys,rr=()=>e=>function(n){return p(this,null,function*(){return n.headers[qn]||(n.headers[qn]=ir()),e(n)})},ar=({maxAttempts:e=Wo})=>(t,n)=>function(s){return p(this,null,function*(){var r;const i=(r=n.attemptsCount)!=null?r:0;return s.headers[Yi]=`attempt=${i+1}; max=${e}`,t(s)})},cr=({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>function(s){return p(this,null,function*(){if(t.trim().length===0)return yield n(s);{const i=e.toLowerCase();return s.headers[i]=s.headers[i]?`${s.headers[i]} ${t}`:t,yield n(s)}})},Ft=(e,t)=>(n,o)=>{const s={};let i=r=>e(r,o);for(let r=t.length-1;r>=0;r--){const c=t[r];i=c(o)(i,s)}return i(n)},Ct=e=>{let t;return()=>(t||(t=e()),t)},dr=e=>!["HEAD","GET"].includes(e.toUpperCase()),ur=(c,a)=>p(null,[c,a],function*({url:e,method:t,headers:n,body:o},{abortSignal:s,cache:i,withCrossDomainCredentials:r}){var f,E;let d;try{d=yield fetch(e,{method:t,headers:n,body:dr(t)?o:void 0,signal:s,cache:i,credentials:r?"include":"same-origin"})}catch(I){throw I instanceof TypeError?new k({name:Ee.NetworkError,message:"A network error has occurred.",underlyingError:I}):I}const u={};(f=d.headers)==null||f.forEach((I,y)=>{u[y.toLowerCase()]=I});const l={statusCode:d.status,headers:u,body:null},h=Object.assign((E=d.body)!=null?E:{},{text:Ct(()=>d.text()),blob:Ct(()=>d.blob()),json:Ct(()=>d.json())});return C(g({},l),{body:h})}),zo=Ft(ur,[cr,rr,or,ar]),lr=()=>e=>function(n){return p(this,null,function*(){return n.headers["cache-control"]="no-store",e(n)})},Go=Ft(zo,[lr]),jo=e=>(t,n)=>{const o=hr(e),s=JSON.stringify(t);return pr(n,o,s)},hr=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),pr=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),$n=e=>ee(Go,jo("GetCredentialsForIdentity"),fr,C(g(g({},$o),e),{userAgentValue:ht()})),fr=e=>p(null,null,function*(){if(e.statusCode>=300)throw yield Ve(e);const t=yield ft(e);return{IdentityId:t.IdentityId,Credentials:gr(t.Credentials),$metadata:pt(e)}}),gr=(n={})=>{var o=n,{Expiration:e}=o,t=In(o,["Expiration"]);return C(g({},t),{Expiration:e&&new Date(e*1e3)})},Er=e=>ee(Go,jo("GetId"),mr,C(g(g({},$o),e),{userAgentValue:ht()})),mr=e=>p(null,null,function*(){if(e.statusCode>=300)throw yield Ve(e);return{IdentityId:(yield ft(e)).IdentityId,$metadata:pt(e)}}),Yo={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},Ir={partitions:[Yo,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},Jo=e=>{const{partitions:t}=Ir;for(const{regions:n,outputs:o,regionRegex:s}of t){const i=new RegExp(s);if(n.includes(e)||i.test(e))return o.dnsSuffix}return Yo.outputs.dnsSuffix},He=URL,Sr=({region:e})=>({url:new He(`https://${Ho}.${e}.${Jo(e)}`)});class Le extends k{constructor(){super({name:Ee.PlatformNotSupported,message:"Function not supported on current platform"})}}class Xo{constructor(t){this.storage=t}setItem(t,n){return p(this,null,function*(){if(!this.storage)throw new Le;this.storage.setItem(t,n)})}getItem(t){return p(this,null,function*(){if(!this.storage)throw new Le;return this.storage.getItem(t)})}removeItem(t){return p(this,null,function*(){if(!this.storage)throw new Le;this.storage.removeItem(t)})}clear(){return p(this,null,function*(){if(!this.storage)throw new Le;this.storage.clear()})}}class Qo{constructor(){this.storage=new Map}get length(){return this.storage.size}key(t){return t>this.length-1?null:Array.from(this.storage.keys())[t]}setItem(t,n){this.storage.set(t,n)}getItem(t){var n;return(n=this.storage.get(t))!=null?n:null}removeItem(t){this.storage.delete(t)}clear(){this.storage.clear()}}const Zo=new K("CoreStorageUtils"),yr=()=>{try{if(typeof window!="undefined"&&window.localStorage)return window.localStorage}catch(e){Zo.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new Qo},es=()=>{try{if(typeof window!="undefined"&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw new Error("sessionStorage is not defined")}catch(e){return Zo.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new Qo}};class wr extends Xo{constructor(){super(yr())}}class Cr extends Xo{constructor(){super(es())}}class Ar{constructor(t){this._storage=t}get storage(){if(!this._storage)throw new Le;return this._storage}setItem(t,n){this.storage.setItem(t,n)}getItem(t){return this.storage.getItem(t)}removeItem(t){this.storage.removeItem(t)}clear(){this.storage.clear()}}class Tr extends Ar{constructor(){super(es())}}function Qe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var vr={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Rt(e,t){function n(s,i,r){if(typeof document!="undefined"){r=Qe({},t,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var a in r)r[a]&&(c+="; "+a,r[a]!==!0&&(c+="="+r[a].split(";")[0]));return document.cookie=s+"="+e.write(i,s)+c}}function o(s){if(!(typeof document=="undefined"||arguments.length&&!s)){for(var i=document.cookie?document.cookie.split("; "):[],r={},c=0;c<i.length;c++){var a=i[c].split("="),d=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(r[u]=e.read(d,u),s===u)break}catch(l){}}return s?r[s]:r}}return Object.create({set:n,get:o,remove:function(s,i){n(s,"",Qe({},i,{expires:-1}))},withAttributes:function(s){return Rt(this.converter,Qe({},this.attributes,s))},withConverter:function(s){return Rt(Qe({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Ze=Rt(vr,{path:"/"});class Rr{constructor(t={}){const{path:n,domain:o,expires:s,sameSite:i,secure:r}=t;if(this.domain=o,this.path=n||"/",this.expires=Object.prototype.hasOwnProperty.call(t,"expires")?s:365,this.secure=Object.prototype.hasOwnProperty.call(t,"secure")?r:!0,Object.prototype.hasOwnProperty.call(t,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw new Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if(i==="none"&&!this.secure)throw new Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}setItem(t,n){return p(this,null,function*(){Ze.set(t,n,this.getData())})}getItem(t){return p(this,null,function*(){const n=Ze.get(t);return n!=null?n:null})}removeItem(t){return p(this,null,function*(){Ze.remove(t,this.getData())})}clear(){return p(this,null,function*(){const t=Ze.get(),n=Object.keys(t).map(o=>this.removeItem(o));yield Promise.all(n)})}getData(){return g({path:this.path,expires:this.expires,domain:this.domain,secure:this.secure},this.sameSite&&{sameSite:this.sameSite})}}const $e=new wr;new Cr;const ne=new Tr,xr=e=>{let t;return(...n)=>p(null,null,function*(){return t||(t=new Promise((o,s)=>{e(...n).then(i=>{o(i)}).catch(i=>{s(i)}).finally(()=>{t=void 0})}),t)})};function zn({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}const Pr=()=>p(null,null,function*(){const{userAgentData:e}=navigator;if(!e)return navigator.userAgent;const{platform:t="",platformVersion:n="",model:o="",architecture:s="",fullVersionList:i=[]}=yield e.getHighEntropyValues(["platform","platformVersion","architecture","model","fullVersionList"]),r=i.map(a=>`${a.brand}/${a.version}`).join(";");return[t,n,s,o,t,r].filter(a=>a).join(" ")||navigator.userAgent});function _r(e){return Array.from(e,t=>String.fromCodePoint(t)).join("")}const qe={convert(e,t={urlSafe:!1,skipPadding:!1}){const n=typeof e=="string"?e:_r(e);let o=Fs()(n);return t.urlSafe&&(o=o.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(o=o.replace(/=/g,"")),o}};function Nr(){return Os().getRandomValues(new Uint32Array(1))[0]}function Mr(e){const{words:t}=e,{sigBytes:n}=e,o=[];for(let s=0;s<n;s++){const i=t[s>>>2]>>>24-s%4*8&255;o.push((i>>>4).toString(16)),o.push((i&15).toString(16))}return o.join("")}class kt{constructor(t,n){this.words=[];let o=t;o=this.words=o||[],n!==void 0?this.sigBytes=n:this.sigBytes=o.length*4}random(t){const n=[];for(let o=0;o<t;o+=4)n.push(Nr());return new kt(n,t)}toString(){return Mr(this)}}var A;(function(e){e.EmptySignInUsername="EmptySignInUsername",e.EmptySignInPassword="EmptySignInPassword",e.CustomAuthSignInPassword="CustomAuthSignInPassword",e.EmptySignUpUsername="EmptySignUpUsername",e.EmptySignUpPassword="EmptySignUpPassword",e.EmptyConfirmSignUpUsername="EmptyConfirmSignUpUsername",e.EmptyConfirmSignUpCode="EmptyConfirmSignUpCode",e.EmptyResendSignUpCodeUsername="EmptyresendSignUpCodeUsername",e.EmptyChallengeResponse="EmptyChallengeResponse",e.EmptyConfirmResetPasswordUsername="EmptyConfirmResetPasswordUsername",e.EmptyConfirmResetPasswordNewPassword="EmptyConfirmResetPasswordNewPassword",e.EmptyConfirmResetPasswordConfirmationCode="EmptyConfirmResetPasswordConfirmationCode",e.EmptyResetPasswordUsername="EmptyResetPasswordUsername",e.EmptyVerifyTOTPSetupCode="EmptyVerifyTOTPSetupCode",e.EmptyConfirmUserAttributeCode="EmptyConfirmUserAttributeCode",e.IncorrectMFAMethod="IncorrectMFAMethod",e.EmptyUpdatePassword="EmptyUpdatePassword"})(A||(A={}));const Dr={[A.EmptyChallengeResponse]:{message:"challengeResponse is required to confirmSignIn"},[A.EmptyConfirmResetPasswordUsername]:{message:"username is required to confirmResetPassword"},[A.EmptyConfirmSignUpCode]:{message:"code is required to confirmSignUp"},[A.EmptyConfirmSignUpUsername]:{message:"username is required to confirmSignUp"},[A.EmptyConfirmResetPasswordConfirmationCode]:{message:"confirmationCode is required to confirmResetPassword"},[A.EmptyConfirmResetPasswordNewPassword]:{message:"newPassword is required to confirmResetPassword"},[A.EmptyResendSignUpCodeUsername]:{message:"username is required to confirmSignUp"},[A.EmptyResetPasswordUsername]:{message:"username is required to resetPassword"},[A.EmptySignInPassword]:{message:"password is required to signIn"},[A.EmptySignInUsername]:{message:"username is required to signIn"},[A.EmptySignUpPassword]:{message:"password is required to signUp"},[A.EmptySignUpUsername]:{message:"username is required to signUp"},[A.CustomAuthSignInPassword]:{message:"A password is not needed when signing in with CUSTOM_WITHOUT_SRP",recoverySuggestion:"Do not include a password in your signIn call."},[A.IncorrectMFAMethod]:{message:"Incorrect MFA method was chosen. It should be either SMS, TOTP, or EMAIL",recoverySuggestion:"Try to pass SMS, TOTP, or EMAIL as the challengeResponse"},[A.EmptyVerifyTOTPSetupCode]:{message:"code is required to verifyTotpSetup"},[A.EmptyUpdatePassword]:{message:"oldPassword and newPassword are required to changePassword"},[A.EmptyConfirmUserAttributeCode]:{message:"confirmation code is required to confirmUserAttribute"}};var Gn;(function(e){e.DEFAULT_MSG="Authentication Error",e.EMPTY_EMAIL="Email cannot be empty",e.EMPTY_PHONE="Phone number cannot be empty",e.EMPTY_USERNAME="Username cannot be empty",e.INVALID_USERNAME="The username should either be a string or one of the sign in types",e.EMPTY_PASSWORD="Password cannot be empty",e.EMPTY_CODE="Confirmation code cannot be empty",e.SIGN_UP_ERROR="Error creating account",e.NO_MFA="No valid MFA method provided",e.INVALID_MFA="Invalid MFA type",e.EMPTY_CHALLENGE="Challenge response cannot be empty",e.NO_USER_SESSION="Failed to get the session because the user is empty",e.NETWORK_ERROR="Network Error",e.DEVICE_CONFIG="Device tracking has not been configured in this User Pool",e.AUTOSIGNIN_ERROR="Please use your credentials to sign in",e.OAUTH_ERROR="Couldn't finish OAuth flow, check your User Pool HostedUI settings"})(Gn||(Gn={}));var ie;(function(e){e.SignInException="SignInException",e.OAuthSignInError="OAuthSignInException"})(ie||(ie={}));class S extends k{constructor(t){super(t),this.constructor=S,Object.setPrototypeOf(this,S.prototype)}}function B(e,t){const{message:n,recoverySuggestion:o}=Dr[t];if(!e)throw new S({name:t,message:n,recoverySuggestion:o})}function v(e){const t=e==null?void 0:e.split("_")[0];if(!e||e.indexOf("_")<0||!t||typeof t!="string")throw new S({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function xt(e){if(!e||!e.includes(":"))throw new S({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}function Ur(e){const t={};return e==null||e.forEach(n=>{n.Name&&(t[n.Name]=n.Value)}),t}var jn;(function(e){e.ConcurrentModificationException="ConcurrentModificationException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException"})(jn||(jn={}));var Yn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Yn||(Yn={}));var Jn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UsernameExistsException="UsernameExistsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Jn||(Jn={}));var Xn;(function(e){e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Xn||(Xn={}));var Qn;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyFailedAttemptsException="TooManyFailedAttemptsException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(Qn||(Qn={}));var Zn;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Zn||(Zn={}));var eo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(eo||(eo={}));var to;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(to||(to={}));var no;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(no||(no={}));var oo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(oo||(oo={}));var so;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(so||(so={}));var io;(function(e){e.ExternalServiceException="ExternalServiceException",e.InternalErrorException="InternalErrorException",e.InvalidIdentityPoolConfigurationException="InvalidIdentityPoolConfigurationException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceConflictException="ResourceConflictException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException"})(io||(io={}));var ro;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ro||(ro={}));var ao;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException"})(ao||(ao={}));var ct;(function(e){e.PasswordResetRequiredException="PasswordResetRequiredException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(ct||(ct={}));var co;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotFoundException="UserNotFoundException"})(co||(co={}));var uo;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.MFAMethodNotFoundException="MFAMethodNotFoundException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(uo||(uo={}));var lo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(lo||(lo={}));var ho;(function(e){e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidPasswordException="InvalidPasswordException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UsernameExistsException="UsernameExistsException"})(ho||(ho={}));var po;(function(e){e.AliasExistsException="AliasExistsException",e.CodeDeliveryFailureException="CodeDeliveryFailureException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidEmailRoleAccessPolicyException="InvalidEmailRoleAccessPolicyException",e.InvalidLambdaResponseException="InvalidLambdaResponseException",e.InvalidParameterException="InvalidParameterException",e.InvalidSmsRoleAccessPolicyException="InvalidSmsRoleAccessPolicyException",e.InvalidSmsRoleTrustRelationshipException="InvalidSmsRoleTrustRelationshipException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UnexpectedLambdaException="UnexpectedLambdaException",e.UserLambdaValidationException="UserLambdaValidationException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(po||(po={}));var fo;(function(e){e.CodeMismatchException="CodeMismatchException",e.EnableSoftwareTokenMFAException="EnableSoftwareTokenMFAException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.SoftwareTokenMFANotFoundException="SoftwareTokenMFANotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(fo||(fo={}));var go;(function(e){e.AliasExistsException="AliasExistsException",e.CodeMismatchException="CodeMismatchException",e.ExpiredCodeException="ExpiredCodeException",e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.LimitExceededException="LimitExceededException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(go||(go={}));var Eo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(Eo||(Eo={}));var mo;(function(e){e.ForbiddenException="ForbiddenException",e.InternalErrorException="InternalErrorException",e.InvalidParameterException="InvalidParameterException",e.InvalidUserPoolConfigurationException="InvalidUserPoolConfigurationException",e.NotAuthorizedException="NotAuthorizedException",e.PasswordResetRequiredException="PasswordResetRequiredException",e.ResourceNotFoundException="ResourceNotFoundException",e.TooManyRequestsException="TooManyRequestsException",e.UserNotConfirmedException="UserNotConfirmedException",e.UserNotFoundException="UserNotFoundException"})(mo||(mo={}));const gt="UserUnAuthenticatedException",br="UserAlreadyAuthenticatedException",Or="DeviceMetadataNotFoundException",Fr="InvalidRedirectException",kr="InvalidAppSchemeException",Lr="InvalidPreferredRedirectUrlException",Kr=new S({name:Fr,message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new S({name:kr,message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});new S({name:Lr,message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."});const Br="InvalidOriginException",Wr=new S({name:Br,message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),qr="OAuthSignOutException",Vr="TokenRefreshException",Hr="UnexpectedSignInInterruptionException";function ts(e){if(!e||!e.accessToken)throw new S({name:gt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function $r(e){if(!e||!e.idToken)throw new S({name:gt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}const zr=new S({name:Vr,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),Gr=new S({name:gt,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function ns(e){if(Jr(e))throw zr;if(!Yr(e))throw Gr}function os(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new S({name:Or,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}const jr={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function ss(e){return(e==null?void 0:e.accessToken)||(e==null?void 0:e.idToken)}function Yr(e){return ss(e)&&(e==null?void 0:e.refreshToken)}function Jr(e){return ss(e)&&!(e!=null&&e.refreshToken)}const Xr=e=>p(null,null,function*(){var c,a,d;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;T(t);const n=yield e.Auth.getTokens({forceRefresh:!1});ts(n);const{"cognito:username":o,sub:s}=(d=(a=n.idToken)==null?void 0:a.payload)!=null?d:{},i={username:o,userId:s},r=Qr(n);return r&&(i.signInDetails=r),i});function Qr(e){return e==null?void 0:e.signInDetails}const is=()=>p(null,null,function*(){return Xr(_)}),U=(e,t)=>ht(g({category:Tt.Auth,action:e},t)),ce=e=>(t,n)=>{const o=Zr(e),s=JSON.stringify(t);return ea(n,o,s)},Zr=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),ea=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"});function G(e){if(!e||e.name==="Error"||e instanceof TypeError)throw new S({name:Ee.Unknown,message:"An unknown error has occurred.",underlyingError:e})}const de=()=>e=>p(null,null,function*(){if(e.statusCode>=300){const t=yield Ve(e);throw G(t),new S({name:t.name,message:t.message,metadata:t.$metadata})}return ft(e)}),ta=()=>(e,t)=>function(o){return p(this,null,function*(){return o.headers["cache-control"]="no-store",e(o)})},ue=Ft(zo,[ta]),rs="cognito-idp",le={service:rs,retryDecider:Vo(Ve),computeDelay:qo,get userAgentValue(){return ht()},cache:"no-store"},ze=e=>ee(ue,ce("InitiateAuth"),de(),g(g({},le),e)),W=e=>ee(ue,ce("RespondToAuthChallenge"),de(),g(g({},le),e)),na=e=>ee(ue,ce("VerifySoftwareToken"),de(),g(g({},le),e)),oa=e=>ee(ue,ce("AssociateSoftwareToken"),de(),g(g({},le),e)),sa=({region:e})=>({url:new He(`https://${rs}.${e}.${Jo(e)}`)}),R=({endpointOverride:e})=>t=>e?{url:new He(e)}:sa(t),ia=e=>ee(ue,ce("GetTokensFromRefreshToken"),de(),g(g({},le),e)),ra=s=>p(null,[s],function*({tokens:e,authConfig:t,username:n,clientMetadata:o}){var I,y,w;T(t==null?void 0:t.Cognito);const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c}=t.Cognito,a=v(i);ns(e);const d=ia({endpointResolver:R({endpointOverride:c})}),{AuthenticationResult:u}=yield d({region:a},{ClientId:r,RefreshToken:e.refreshToken,DeviceKey:(I=e.deviceMetadata)==null?void 0:I.deviceKey,ClientMetadata:o}),l=Ie((y=u==null?void 0:u.AccessToken)!=null?y:""),h=u!=null&&u.IdToken?Ie(u.IdToken):void 0,{iat:f}=l.payload;if(!f)throw new S({name:"iatNotFoundException",message:"iat not found in access token"});const E=f*1e3-new Date().getTime();return{accessToken:l,idToken:h,clockDrift:E,refreshToken:(w=u==null?void 0:u.RefreshToken)!=null?w:e.refreshToken,username:n}}),aa=xr(ra),ca={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var dt;(function(e){e.InvalidAuthTokens="InvalidAuthTokens"})(dt||(dt={}));const da={[dt.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},ua=Dt(da),Io="CognitoIdentityServiceProvider";class la{getKeyValueStorage(){if(!this.keyValueStorage)throw new S({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(t){this.keyValueStorage=t}setAuthConfig(t){this.authConfig=t}loadTokens(){return p(this,null,function*(){var t,n,o;try{const s=yield this.getAuthKeys(),i=yield this.getKeyValueStorage().getItem(s.accessToken);if(!i)throw new S({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});const r=Ie(i),c=yield this.getKeyValueStorage().getItem(s.idToken),a=c?Ie(c):void 0,d=(t=yield this.getKeyValueStorage().getItem(s.refreshToken))!=null?t:void 0,u=(n=yield this.getKeyValueStorage().getItem(s.clockDrift))!=null?n:"0",l=Number.parseInt(u),h=yield this.getKeyValueStorage().getItem(s.signInDetails),f={accessToken:r,idToken:a,refreshToken:d,deviceMetadata:(o=yield this.getDeviceMetadata())!=null?o:void 0,clockDrift:l,username:yield this.getLastAuthUser()};return h&&(f.signInDetails=JSON.parse(h)),f}catch(s){return null}})}storeTokens(t){return p(this,null,function*(){ua(t!==void 0,dt.InvalidAuthTokens);const n=t.username;yield this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),n);const o=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(o.accessToken,t.accessToken.toString()),t.idToken?yield this.getKeyValueStorage().setItem(o.idToken,t.idToken.toString()):yield this.getKeyValueStorage().removeItem(o.idToken),t.refreshToken?yield this.getKeyValueStorage().setItem(o.refreshToken,t.refreshToken):yield this.getKeyValueStorage().removeItem(o.refreshToken),t.deviceMetadata&&(t.deviceMetadata.deviceKey&&(yield this.getKeyValueStorage().setItem(o.deviceKey,t.deviceMetadata.deviceKey)),t.deviceMetadata.deviceGroupKey&&(yield this.getKeyValueStorage().setItem(o.deviceGroupKey,t.deviceMetadata.deviceGroupKey)),yield this.getKeyValueStorage().setItem(o.randomPasswordKey,t.deviceMetadata.randomPassword)),t.signInDetails?yield this.getKeyValueStorage().setItem(o.signInDetails,JSON.stringify(t.signInDetails)):yield this.getKeyValueStorage().removeItem(o.signInDetails),yield this.getKeyValueStorage().setItem(o.clockDrift,`${t.clockDrift}`)})}clearTokens(){return p(this,null,function*(){const t=yield this.getAuthKeys();yield Promise.all([this.getKeyValueStorage().removeItem(t.accessToken),this.getKeyValueStorage().removeItem(t.idToken),this.getKeyValueStorage().removeItem(t.clockDrift),this.getKeyValueStorage().removeItem(t.refreshToken),this.getKeyValueStorage().removeItem(t.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(t.oauthMetadata)])})}getDeviceMetadata(t){return p(this,null,function*(){const n=yield this.getAuthKeys(t),o=yield this.getKeyValueStorage().getItem(n.deviceKey),s=yield this.getKeyValueStorage().getItem(n.deviceGroupKey),i=yield this.getKeyValueStorage().getItem(n.randomPasswordKey);return i&&s&&o?{deviceKey:o,deviceGroupKey:s,randomPassword:i}:null})}clearDeviceMetadata(t){return p(this,null,function*(){const n=yield this.getAuthKeys(t);yield Promise.all([this.getKeyValueStorage().removeItem(n.deviceKey),this.getKeyValueStorage().removeItem(n.deviceGroupKey),this.getKeyValueStorage().removeItem(n.randomPasswordKey)])})}getAuthKeys(t){return p(this,null,function*(){var o;T((o=this.authConfig)==null?void 0:o.Cognito);const n=t!=null?t:yield this.getLastAuthUser();return ha(Io,`${this.authConfig.Cognito.userPoolClientId}.${n}`)})}getLastAuthUserKey(){var n;T((n=this.authConfig)==null?void 0:n.Cognito);const t=this.authConfig.Cognito.userPoolClientId;return`${Io}.${t}.LastAuthUser`}getLastAuthUser(){return p(this,null,function*(){var n;return(n=yield this.getKeyValueStorage().getItem(this.getLastAuthUserKey()))!=null?n:"username"})}setOAuthMetadata(t){return p(this,null,function*(){const{oauthMetadata:n}=yield this.getAuthKeys();yield this.getKeyValueStorage().setItem(n,JSON.stringify(t))})}getOAuthMetadata(){return p(this,null,function*(){const{oauthMetadata:t}=yield this.getAuthKeys(),n=yield this.getKeyValueStorage().getItem(t);return n&&JSON.parse(n)})}}const ha=(e,t)=>Lt(ca)(`${e}`,t);function Lt(e){const t=Object.values(g({},e));return(n,o)=>t.reduce((s,i)=>C(g({},s),{[i]:`${n}.${o}.${i}`}),{})}const So="amplify-signin-with-hostedUI",J="CognitoIdentityServiceProvider";class as{constructor(t){this.keyValueStorage=t}clearOAuthInflightData(){return p(this,null,function*(){T(this.cognitoConfig);const t=X(J,this.cognitoConfig.userPoolClientId);yield Promise.all([this.keyValueStorage.removeItem(t.inflightOAuth),this.keyValueStorage.removeItem(t.oauthPKCE),this.keyValueStorage.removeItem(t.oauthState)])})}clearOAuthData(){return p(this,null,function*(){T(this.cognitoConfig);const t=X(J,this.cognitoConfig.userPoolClientId);return yield this.clearOAuthInflightData(),yield this.keyValueStorage.removeItem(So),this.keyValueStorage.removeItem(t.oauthSignIn)})}loadOAuthState(){T(this.cognitoConfig);const t=X(J,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthState)}storeOAuthState(t){T(this.cognitoConfig);const n=X(J,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthState,t)}loadPKCE(){T(this.cognitoConfig);const t=X(J,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(t.oauthPKCE)}storePKCE(t){T(this.cognitoConfig);const n=X(J,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(n.oauthPKCE,t)}setAuthConfig(t){this.cognitoConfig=t}loadOAuthInFlight(){return p(this,null,function*(){T(this.cognitoConfig);const t=X(J,this.cognitoConfig.userPoolClientId);return(yield this.keyValueStorage.getItem(t.inflightOAuth))==="true"})}storeOAuthInFlight(t){return p(this,null,function*(){T(this.cognitoConfig);const n=X(J,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(n.inflightOAuth,`${t}`)})}loadOAuthSignIn(){return p(this,null,function*(){var i,r;T(this.cognitoConfig);const t=X(J,this.cognitoConfig.userPoolClientId),n=yield this.keyValueStorage.getItem(So),[o,s]=(r=(i=yield this.keyValueStorage.getItem(t.oauthSignIn))==null?void 0:i.split(","))!=null?r:[];return{isOAuthSignIn:o==="true"||n==="true",preferPrivateSession:s==="true"}})}storeOAuthSignIn(t,n=!1){return p(this,null,function*(){T(this.cognitoConfig);const o=X(J,this.cognitoConfig.userPoolClientId);yield this.keyValueStorage.setItem(o.oauthSignIn,`${t},${n}`)})}}const X=(e,t)=>Lt(jr)(e,t),yo=new as($e);class pa{constructor(){this.waitForInflightOAuth=Lo()?()=>p(this,null,function*(){if(yield yo.loadOAuthInFlight())return this.inflightPromise?this.inflightPromise:(this.inflightPromise=new Promise((t,n)=>{}),this.inflightPromise)}):()=>p(this,null,function*(){})}setAuthConfig(t){yo.setAuthConfig(t.Cognito),this.authConfig=t}setTokenRefresher(t){this.tokenRefresher=t}setAuthTokenStore(t){this.tokenStore=t}getTokenStore(){if(!this.tokenStore)throw new S({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new S({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}setClientMetadataProvider(t){this.clientMetadataProvider=t}getTokens(t){return p(this,null,function*(){var r,c,a,d,u,l,h,f,E,I,y;let n;try{T((r=this.authConfig)==null?void 0:r.Cognito)}catch(w){return null}yield this.waitForInflightOAuth(),this.inflightPromise=void 0,n=yield this.getTokenStore().loadTokens();const o=yield this.getTokenStore().getLastAuthUser();if(n===null)return null;const s=!!(n!=null&&n.idToken)&&zn({expiresAt:((d=(a=(c=n.idToken)==null?void 0:c.payload)==null?void 0:a.exp)!=null?d:0)*1e3,clockDrift:(u=n.clockDrift)!=null?u:0}),i=zn({expiresAt:((f=(h=(l=n.accessToken)==null?void 0:l.payload)==null?void 0:h.exp)!=null?f:0)*1e3,clockDrift:(E=n.clockDrift)!=null?E:0});return(t!=null&&t.forceRefresh||s||i)&&(n=yield this.refreshTokens({tokens:n,username:o,clientMetadata:(y=t==null?void 0:t.clientMetadata)!=null?y:yield(I=this.clientMetadataProvider)==null?void 0:I.call(this)}),n===null)?null:{accessToken:n==null?void 0:n.accessToken,idToken:n==null?void 0:n.idToken,signInDetails:n==null?void 0:n.signInDetails}})}refreshTokens(s){return p(this,arguments,function*({tokens:t,username:n,clientMetadata:o}){try{const{signInDetails:i}=t,r=yield this.getTokenRefresher()({tokens:t,authConfig:this.authConfig,username:n,clientMetadata:o});return r.signInDetails=i,yield this.setTokens({tokens:r}),xe.dispatch("auth",{event:"tokenRefresh"},"Auth",me),r}catch(i){return this.handleErrors(i)}})}handleErrors(t){if(G(t),this.isAuthenticationError(t)&&this.clearTokens(),xe.dispatch("auth",{event:"tokenRefresh_failure",data:{error:t}},"Auth",me),t.name.startsWith("NotAuthorizedException"))return null;throw t}isAuthenticationError(t){return["NotAuthorizedException","TokenRevokedException","UserNotFoundException","PasswordResetRequiredException","UserNotConfirmedException","RefreshTokenReuseException"].some(o=>{var s,i;return(i=(s=t==null?void 0:t.name)==null?void 0:s.startsWith)==null?void 0:i.call(s,o)})}setTokens(n){return p(this,arguments,function*({tokens:t}){return this.getTokenStore().storeTokens(t)})}clearTokens(){return p(this,null,function*(){return this.getTokenStore().clearTokens()})}getDeviceMetadata(t){return this.getTokenStore().getDeviceMetadata(t)}clearDeviceMetadata(t){return this.getTokenStore().clearDeviceMetadata(t)}setOAuthMetadata(t){return this.getTokenStore().setOAuthMetadata(t)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class fa{constructor(){this.authTokenStore=new la,this.authTokenStore.setKeyValueStorage($e),this.tokenOrchestrator=new pa,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(aa)}getTokens(t={}){return this.tokenOrchestrator.getTokens(t)}setKeyValueStorage(t){this.authTokenStore.setKeyValueStorage(t)}setClientMetadataProvider(t){this.tokenOrchestrator.setClientMetadataProvider(t)}setAuthConfig(t){this.authTokenStore.setAuthConfig(t),this.tokenOrchestrator.setAuthConfig(t)}}const Ke=new fa,{tokenOrchestrator:q}=Ke;function ye(e){return p(this,null,function*(){if(e.AccessToken){const t=Ie(e.AccessToken),n=(t.payload.iat||0)*1e3,o=new Date().getTime(),s=n>0?n-o:0;let i,r,c;e.RefreshToken&&(r=e.RefreshToken),e.IdToken&&(i=Ie(e.IdToken)),e!=null&&e.NewDeviceMetadata&&(c=e.NewDeviceMetadata);const a={accessToken:t,idToken:i,refreshToken:r,clockDrift:s,deviceMetadata:c,username:e.username};e!=null&&e.signInDetails&&(a.signInDetails=e.signInDetails),yield q.setTokens({tokens:a})}else throw new k({message:"Invalid tokens",name:"InvalidTokens",recoverySuggestion:"Check Cognito UserPool settings"})})}const ga="Unable to get user session following successful sign-in.",we=()=>p(null,null,function*(){try{xe.dispatch("auth",{event:"signedIn",data:yield is()},"Auth",me)}catch(e){throw e.name===gt?new S({name:Hr,message:ga,recoverySuggestion:"This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server."}):e}});function cs(){return{active:!1}}const Ea=(e,t)=>{switch(t.type){case"SET_USERNAME":return C(g({},e),{username:t.value});case"SET_SESSION":return C(g({},e),{session:t.value});case"START":return C(g({},e),{active:!0});case"RESET":return cs();default:return e}},ma=e=>{let t=e(cs(),{type:"RESET"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},ds=ma(Ea),Ia=180*1e3,et="CognitoSignInState",oe={username:`${et}.username`,challengeName:`${et}.challengeName`,signInSession:`${et}.signInSession`,expiry:`${et}.expiry`},Sa=(e,t)=>{switch(t.type){case"SET_SIGN_IN_SESSION":return tt({signInSession:t.value}),C(g({},e),{signInSession:t.value});case"SET_SIGN_IN_STATE":return tt(t.value),g({},t.value);case"SET_CHALLENGE_NAME":return tt({challengeName:t.value}),C(g({},e),{challengeName:t.value});case"SET_USERNAME":return tt({username:t.value}),C(g({},e),{username:t.value});case"SET_INITIAL_STATE":return wa();case"RESET_STATE":return us(),Kt();default:return e}},ya=e=>{const t=Number(e),n=Date.now();return t<=n},j=()=>{Z.dispatch({type:"RESET_STATE"})},us=()=>{for(const e of Object.values(oe))ne.removeItem(e)},Kt=()=>({username:void 0,challengeName:void 0,signInSession:void 0}),wa=()=>{var s,i,r;const e=ne.getItem(oe.expiry);if(!e||ya(e))return us(),Kt();const t=(s=ne.getItem(oe.username))!=null?s:void 0,n=(i=ne.getItem(oe.challengeName))!=null?i:void 0,o=(r=ne.getItem(oe.signInSession))!=null?r:void 0;return{username:t,challengeName:n,signInSession:o}},Ca=e=>{let t=e(Kt(),{type:"SET_INITIAL_STATE"});return{getState:()=>t,dispatch:n=>{t=e(t,n)}}},Z=Ca(Sa);function Ce(e){Z.dispatch({type:"SET_SIGN_IN_STATE",value:e})}const tt=({challengeName:e,signInSession:t,username:n})=>{n&&ne.setItem(oe.username,n),e&&ne.setItem(oe.challengeName,e),t&&(ne.setItem(oe.signInSession,t),ne.setItem(oe.expiry,String(Date.now()+Ia)))},wo="Passkeys may not be supported on this device. Ensure your application is running in a secure context (HTTPS) and Web Authentication API is supported.";class se extends k{constructor(t){super(t),this.constructor=se,Object.setPrototypeOf(this,se.prototype)}}var P;(function(e){e.PasskeyNotSupported="PasskeyNotSupported",e.PasskeyAlreadyExists="PasskeyAlreadyExists",e.InvalidPasskeyRegistrationOptions="InvalidPasskeyRegistrationOptions",e.InvalidPasskeyAuthenticationOptions="InvalidPasskeyAuthenticationOptions",e.RelyingPartyMismatch="RelyingPartyMismatch",e.PasskeyRegistrationFailed="PasskeyRegistrationFailed",e.PasskeyRetrievalFailed="PasskeyRetrievalFailed",e.PasskeyRegistrationCanceled="PasskeyRegistrationCanceled",e.PasskeyAuthenticationCanceled="PasskeyAuthenticationCanceled",e.PasskeyOperationAborted="PasskeyOperationAborted"})(P||(P={}));const At="User may have canceled the ceremony or another interruption has occurred. Check underlying error for details.",Co="Ensure your user pool is configured to support the WEB_AUTHN as an authentication factor.",ut={[P.PasskeyNotSupported]:{message:"Passkeys may not be supported on this device.",recoverySuggestion:wo},[P.InvalidPasskeyRegistrationOptions]:{message:"Invalid passkey registration options.",recoverySuggestion:Co},[P.InvalidPasskeyAuthenticationOptions]:{message:"Invalid passkey authentication options.",recoverySuggestion:Co},[P.PasskeyRegistrationFailed]:{message:"Device failed to create passkey.",recoverySuggestion:wo},[P.PasskeyRetrievalFailed]:{message:"Device failed to retrieve passkey.",recoverySuggestion:"Passkeys may not be available on this device. Try an alternative authentication factor like PASSWORD, EMAIL_OTP, or SMS_OTP."},[P.PasskeyAlreadyExists]:{message:"Passkey already exists in authenticator.",recoverySuggestion:"Proceed with existing passkey or try again after deleting the credential."},[P.PasskeyRegistrationCanceled]:{message:"Passkey registration ceremony has been canceled.",recoverySuggestion:At},[P.PasskeyAuthenticationCanceled]:{message:"Passkey authentication ceremony has been canceled.",recoverySuggestion:At},[P.PasskeyOperationAborted]:{message:"Passkey operation has been aborted.",recoverySuggestion:At},[P.RelyingPartyMismatch]:{message:"Relying party does not match current domain.",recoverySuggestion:"Ensure relying party identifier matches current domain."}},Bt=Dt(ut,se),Aa=e=>{if(e instanceof Error){if(e.name==="AbortError"){const{message:t,recoverySuggestion:n}=ut[P.PasskeyOperationAborted];return new se({name:P.PasskeyOperationAborted,message:t,recoverySuggestion:n,underlyingError:e})}if(e.name==="SecurityError"){const{message:t,recoverySuggestion:n}=ut[P.RelyingPartyMismatch];return new se({name:P.RelyingPartyMismatch,message:t,recoverySuggestion:n,underlyingError:e})}}return new se({name:Ee.Unknown,message:"An unknown error has occurred.",underlyingError:e})},Ta=e=>{if(e instanceof se)return e;if(e instanceof Error&&e.name==="NotAllowedError"){const{message:t,recoverySuggestion:n}=ut[P.PasskeyAuthenticationCanceled];return new se({name:P.PasskeyAuthenticationCanceled,message:t,recoverySuggestion:n,underlyingError:e})}return Aa(e)},va=()=>Lo()&&window.isSecureContext&&"credentials"in navigator&&typeof window.PublicKeyCredential=="function",ke=e=>qe.convert(new Uint8Array(e),{urlSafe:!0,skipPadding:!0}),Ao=e=>Uint8Array.from(Ut.convert(e,{urlSafe:!0}),t=>t.charCodeAt(0)).buffer,Ra=e=>{const t=Ao(e.challenge),n=(e.allowCredentials||[]).map(o=>C(g({},o),{id:Ao(o.id)}));return C(g({},e),{challenge:t,allowCredentials:n})},xa=e=>{const t={clientDataJSON:ke(e.response.clientDataJSON),authenticatorData:ke(e.response.authenticatorData),signature:ke(e.response.signature)};e.response.userHandle&&(t.userHandle=ke(e.response.userHandle));const n={id:e.id,rawId:ke(e.rawId),type:e.type,clientExtensionResults:e.getClientExtensionResults(),response:t};return e.authenticatorAttachment&&(n.authenticatorAttachment=e.authenticatorAttachment),n};function Pa(e){Bt(e&&e instanceof PublicKeyCredential&&e.response instanceof AuthenticatorAssertionResponse,P.PasskeyRetrievalFailed)}const _a=e=>p(null,null,function*(){try{const t=va();Bt(t,P.PasskeyNotSupported);const n=Ra(e),o=yield navigator.credentials.get({publicKey:n});return Pa(o),xa(o)}catch(t){throw Ta(t)}}),Na=e=>ee(ue,ce("ConfirmDevice"),de(),g(g({},le),e)),it={convert(e){return new TextEncoder().encode(e)}};function m(e,t){e!=null&&this.fromString(e,t)}function F(){return new m(null,null)}let ae;const Ma=0xdeadbeefcafe,To=(Ma&16777215)===15715070;function Da(e,t,n,o,s,i){for(;--i>=0;){const r=t*this[e++]+n[o]+s;s=Math.floor(r/67108864),n[o++]=r&67108863}return s}function Ua(e,t,n,o,s,i){const r=t&32767,c=t>>15;for(;--i>=0;){let a=this[e]&32767;const d=this[e++]>>15,u=c*a+d*r;a=r*a+((u&32767)<<15)+n[o]+(s&1073741823),s=(a>>>30)+(u>>>15)+c*d+(s>>>30),n[o++]=a&1073741823}return s}function ba(e,t,n,o,s,i){const r=t&16383,c=t>>14;for(;--i>=0;){let a=this[e]&16383;const d=this[e++]>>14,u=c*a+d*r;a=r*a+((u&16383)<<14)+n[o]+s,s=(a>>28)+(u>>14)+c*d,n[o++]=a&268435455}return s}const vo=typeof navigator!="undefined";vo&&To&&navigator.appName==="Microsoft Internet Explorer"?(m.prototype.am=Ua,ae=30):vo&&To&&navigator.appName!=="Netscape"?(m.prototype.am=Da,ae=26):(m.prototype.am=ba,ae=28);m.prototype.DB=ae;m.prototype.DM=(1<<ae)-1;m.prototype.DV=1<<ae;const Wt=52;m.prototype.FV=Math.pow(2,Wt);m.prototype.F1=Wt-ae;m.prototype.F2=2*ae-Wt;const Oa="0123456789abcdefghijklmnopqrstuvwxyz",Et=[];let Ne,$;Ne=48;for($=0;$<=9;++$)Et[Ne++]=$;Ne=97;for($=10;$<36;++$)Et[Ne++]=$;Ne=65;for($=10;$<36;++$)Et[Ne++]=$;function Ro(e){return Oa.charAt(e)}function Fa(e,t){const n=Et[e.charCodeAt(t)];return n==null?-1:n}function ka(e){for(let t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function La(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function qt(e){const t=F();return t.fromInt(e),t}function Ka(e,t){let n;if(t===16)n=4;else if(t===8)n=3;else if(t===2)n=1;else if(t===32)n=5;else if(t===4)n=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");this.t=0,this.s=0;let o=e.length,s=!1,i=0;for(;--o>=0;){const r=Fa(e,o);if(r<0){e.charAt(o)==="-"&&(s=!0);continue}s=!1,i===0?this[this.t++]=r:i+n>this.DB?(this[this.t-1]|=(r&(1<<this.DB-i)-1)<<i,this[this.t++]=r>>this.DB-i):this[this.t-1]|=r<<i,i+=n,i>=this.DB&&(i-=this.DB)}this.clamp(),s&&m.ZERO.subTo(this,this)}function Ba(){const e=this.s&this.DM;for(;this.t>0&&this[this.t-1]==e;)--this.t}function Wa(e){if(this.s<0)return"-"+this.negate().toString(e);let t;if(e==16)t=4;else if(e===8)t=3;else if(e===2)t=1;else if(e===32)t=5;else if(e===4)t=2;else throw new Error("Only radix 2, 4, 8, 16, 32 are supported");const n=(1<<t)-1;let o,s=!1,i="",r=this.t,c=this.DB-r*this.DB%t;if(r-- >0)for(c<this.DB&&(o=this[r]>>c)>0&&(s=!0,i=Ro(o));r>=0;)c<t?(o=(this[r]&(1<<c)-1)<<t-c,o|=this[--r]>>(c+=this.DB-t)):(o=this[r]>>(c-=t)&n,c<=0&&(c+=this.DB,--r)),o>0&&(s=!0),s&&(i+=Ro(o));return s?i:"0"}function qa(){const e=F();return m.ZERO.subTo(this,e),e}function Va(){return this.s<0?this.negate():this}function Ha(e){let t=this.s-e.s;if(t!=0)return t;let n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this[n]-e[n])!=0)return t;return 0}function Vt(e){let t=1,n;return(n=e>>>16)!==0&&(e=n,t+=16),(n=e>>8)!==0&&(e=n,t+=8),(n=e>>4)!==0&&(e=n,t+=4),(n=e>>2)!==0&&(e=n,t+=2),(n=e>>1)!==0&&(e=n,t+=1),t}function $a(){return this.t<=0?0:this.DB*(this.t-1)+Vt(this[this.t-1]^this.s&this.DM)}function za(e,t){let n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function Ga(e,t){for(let n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function ja(e,t){const n=e%this.DB,o=this.DB-n,s=(1<<o)-1,i=Math.floor(e/this.DB);let r=this.s<<n&this.DM,c;for(c=this.t-1;c>=0;--c)t[c+i+1]=this[c]>>o|r,r=(this[c]&s)<<n;for(c=i-1;c>=0;--c)t[c]=0;t[i]=r,t.t=this.t+i+1,t.s=this.s,t.clamp()}function Ya(e,t){t.s=this.s;const n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}const o=e%this.DB,s=this.DB-o,i=(1<<o)-1;t[0]=this[n]>>o;for(let r=n+1;r<this.t;++r)t[r-n-1]|=(this[r]&i)<<s,t[r-n]=this[r]>>o;o>0&&(t[this.t-n-1]|=(this.s&i)<<s),t.t=this.t-n,t.clamp()}function Ja(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]-e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o-=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o-=e[n],t[n++]=o&this.DM,o>>=this.DB;o-=e.s}t.s=o<0?-1:0,o<-1?t[n++]=this.DV+o:o>0&&(t[n++]=o),t.t=n,t.clamp()}function Xa(e,t){const n=this.abs(),o=e.abs();let s=n.t;for(t.t=s+o.t;--s>=0;)t[s]=0;for(s=0;s<o.t;++s)t[s+n.t]=n.am(0,o[s],t,s,0,n.t);t.s=0,t.clamp(),this.s!==e.s&&m.ZERO.subTo(t,t)}function Qa(e){const t=this.abs();let n=e.t=2*t.t;for(;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){const o=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,o,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function Za(e,t,n){const o=e.abs();if(o.t<=0)return;const s=this.abs();if(s.t<o.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n===null&&(n=F());const i=F(),r=this.s,c=e.s,a=this.DB-Vt(o[o.t-1]);a>0?(o.lShiftTo(a,i),s.lShiftTo(a,n)):(o.copyTo(i),s.copyTo(n));const d=i.t,u=i[d-1];if(u===0)return;const l=u*(1<<this.F1)+(d>1?i[d-2]>>this.F2:0),h=this.FV/l,f=(1<<this.F1)/l,E=1<<this.F2;let I=n.t,y=I-d;const w=t===null?F():t;for(i.dlShiftTo(y,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),m.ONE.dlShiftTo(d,w),w.subTo(i,i);i.t<d;)i[i.t++]=0;for(;--y>=0;){let D=n[--I]===u?this.DM:Math.floor(n[I]*h+(n[I-1]+E)*f);if((n[I]+=i.am(0,D,n,y,0,d))<D)for(i.dlShiftTo(y,w),n.subTo(w,n);n[I]<--D;)n.subTo(w,n)}t!==null&&(n.drShiftTo(d,t),r!==c&&m.ZERO.subTo(t,t)),n.t=d,n.clamp(),a>0&&n.rShiftTo(a,n),r<0&&m.ZERO.subTo(n,n)}function ec(e){const t=F();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(m.ZERO)>0&&e.subTo(t,t),t}function tc(){if(this.t<1)return 0;const e=this[0];if((e&1)===0)return 0;let t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function nc(e){return this.compareTo(e)===0}function oc(e,t){let n=0,o=0;const s=Math.min(e.t,this.t);for(;n<s;)o+=this[n]+e[n],t[n++]=o&this.DM,o>>=this.DB;if(e.t<this.t){for(o+=e.s;n<this.t;)o+=this[n],t[n++]=o&this.DM,o>>=this.DB;o+=this.s}else{for(o+=this.s;n<e.t;)o+=e[n],t[n++]=o&this.DM,o>>=this.DB;o+=e.s}t.s=o<0?-1:0,o>0?t[n++]=o:o<-1&&(t[n++]=this.DV+o),t.t=n,t.clamp()}function sc(e){const t=F();return this.addTo(e,t),t}function ic(e){const t=F();return this.subTo(e,t),t}function rc(e){const t=F();return this.multiplyTo(e,t),t}function ac(e){const t=F();return this.divRemTo(e,t,null),t}function Me(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function cc(e){const t=F();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(m.ZERO)>0&&this.m.subTo(t,t),t}function dc(e){const t=F();return e.copyTo(t),this.reduce(t),t}function uc(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(let t=0;t<this.m.t;++t){let n=e[t]&32767;const o=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e[n]+=this.m.am(0,o,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function lc(e,t){e.squareTo(t),this.reduce(t)}function hc(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Me.prototype.convert=cc;Me.prototype.revert=dc;Me.prototype.reduce=uc;Me.prototype.mulTo=hc;Me.prototype.sqrTo=lc;function pc(e,t,n){let o=e.bitLength(),s,i=qt(1);const r=new Me(t);if(o<=0)return i;o<18?s=1:o<48?s=3:o<144?s=4:o<768?s=5:s=6;const c=[];let a=3;const d=s-1,u=(1<<s)-1;if(c[1]=r.convert(this),s>1){const w=F();for(r.sqrTo(c[1],w);a<=u;)c[a]=F(),r.mulTo(w,c[a-2],c[a]),a+=2}let l=e.t-1,h,f=!0,E=F(),I;for(o=Vt(e[l])-1;l>=0;){for(o>=d?h=e[l]>>o-d&u:(h=(e[l]&(1<<o+1)-1)<<d-o,l>0&&(h|=e[l-1]>>this.DB+o-d)),a=s;(h&1)===0;)h>>=1,--a;if((o-=a)<0&&(o+=this.DB,--l),f)c[h].copyTo(i),f=!1;else{for(;a>1;)r.sqrTo(i,E),r.sqrTo(E,i),a-=2;a>0?r.sqrTo(i,E):(I=i,i=E,E=I),r.mulTo(E,c[h],i)}for(;l>=0&&(e[l]&1<<o)===0;)r.sqrTo(i,E),I=i,i=E,E=I,--o<0&&(o=this.DB-1,--l)}const y=r.revert(i);return n(null,y),y}m.prototype.copyTo=ka;m.prototype.fromInt=La;m.prototype.fromString=Ka;m.prototype.clamp=Ba;m.prototype.dlShiftTo=za;m.prototype.drShiftTo=Ga;m.prototype.lShiftTo=ja;m.prototype.rShiftTo=Ya;m.prototype.subTo=Ja;m.prototype.multiplyTo=Xa;m.prototype.squareTo=Qa;m.prototype.divRemTo=Za;m.prototype.invDigit=tc;m.prototype.addTo=oc;m.prototype.toString=Wa;m.prototype.negate=qa;m.prototype.abs=Va;m.prototype.compareTo=Ha;m.prototype.bitLength=$a;m.prototype.mod=ec;m.prototype.equals=nc;m.prototype.add=sc;m.prototype.subtract=ic;m.prototype.multiply=rc;m.prototype.divide=ac;m.prototype.modPow=pc;m.ZERO=qt(0);m.ONE=qt(1);const fc=c=>p(null,[c],function*({a:e,g:t,k:n,x:o,B:s,N:i,U:r}){return new Promise((a,d)=>{t.modPow(o,i,(u,l)=>{if(u){d(u);return}s.subtract(n.multiply(l)).modPow(e.add(r.multiply(o)),i,(h,f)=>{if(h){d(h);return}a(f.mod(i))})})})}),gc="FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD129024E088A67CC74020BBEA63B139B22514A08798E3404DDEF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7EDEE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3DC2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F83655D23DCA3AD961C62F356208552BB9ED529077096966D670C354E4ABC9804F1746C08CA18217C32905E462E36CE3BE39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9DE2BCBF6955817183995497CEA956AE515D2261898FA051015728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6BF12FFA06D98A0864D87602733EC86A64521F2B18177B200CBBE117577A615D6C770988C0BAD946E208E24FA074E5AB3143DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF",ls={},Pt={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),ls[e]=t,Pt[t]=e}const Pe=e=>{if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2){const o=e.slice(n,n+2).toLowerCase();if(o in Pt)t[n/2]=Pt[o];else throw new Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return t},Ht=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=ls[e[n]];return t},_t=e=>{const t=new at;t.update(e);const n=t.digestSync(),o=Ht(n);return new Array(64-o.length).join("0")+o},rt=e=>_t(Pe(e)),Ec=/^[89a-f]/i,te=e=>{if(!(e instanceof m))throw new Error("Not a BigInteger");const t=e.compareTo(m.ZERO)<0;let n=e.abs().toString(16);if(n=n.length%2!==0?`0${n}`:n,n=Ec.test(n)?`00${n}`:n,t){const o=n.split("").map(i=>{const r=~parseInt(i,16)&15;return"0123456789ABCDEF".charAt(r)}).join("");n=new m(o,16).add(m.ONE).toString(16),n.toUpperCase().startsWith("FF8")&&(n=n.substring(2))}return n},mc=({A:e,B:t})=>{const n=new m(rt(te(e)+te(t)),16);if(n.equals(m.ZERO))throw new Error("U cannot be zero.");return n},Ic=(e,t,n)=>{const o=new at(t);o.update(e);const s=o.digestSync(),i=new at(s);return i.update(n),i.digestSync().slice(0,16)},$t=e=>{const t=new kt().random(e).toString();return Pe(t)},Sc=()=>qe.convert($t(40));class yc{constructor({userPoolName:t,a:n,g:o,A:s,N:i}){this.encoder=it,this.userPoolName=t,this.a=n,this.g=o,this.A=s,this.N=i,this.k=new m(rt(`${te(i)}${te(o)}`),16)}getRandomPassword(){if(!this.randomPassword)throw new S({name:"EmptyBigIntegerRandomPassword",message:"random password is empty"});return this.randomPassword}getSaltToHashDevices(){if(!this.saltToHashDevices)throw new S({name:"EmptyBigIntegersaltToHashDevices",message:"saltToHashDevices is empty"});return this.saltToHashDevices}getVerifierDevices(){if(!this.verifierDevices)throw new S({name:"EmptyBigIntegerVerifierDevices",message:"verifyDevices is empty"});return this.verifierDevices}generateHashDevice(t,n){return p(this,null,function*(){this.randomPassword=Sc();const o=`${t}${n}:${this.randomPassword}`,s=_t(o),i=Ht($t(16));return this.saltToHashDevices=te(new m(i,16)),new Promise((r,c)=>{this.g.modPow(new m(rt(this.saltToHashDevices+s),16),this.N,(a,d)=>{if(a){c(a);return}this.verifierDevices=te(d),r()})})})}getPasswordAuthenticationKey(i){return p(this,arguments,function*({username:t,password:n,serverBValue:o,salt:s}){if(o.mod(this.N).equals(m.ZERO))throw new Error("B cannot be zero.");const r=mc({A:this.A,B:o}),c=`${this.userPoolName}${t}:${n}`,a=_t(c),d=new m(rt(te(s)+a),16),u=yield fc({a:this.a,g:this.g,k:this.k,x:d,B:o,N:this.N,U:r}),l=this.encoder.convert("Caldera Derived Key"),h=this.encoder.convert(""),f=new Uint8Array(l.byteLength+h.byteLength);return f.set(l,0),f.set(h,l.byteLength),Ic(Pe(te(u)),Pe(te(r)),f)})}}const wc=o=>p(null,[o],function*({a:e,g:t,N:n}){return new Promise((s,i)=>{t.modPow(e,n,(r,c)=>{if(r){i(r);return}if(c.mod(n).equals(m.ZERO)){i(new Error("Illegal parameter. A mod N cannot be 0."));return}s(c)})})}),Ge=e=>p(null,null,function*(){const t=new m(gc,16),n=new m("2",16),o=Cc(),s=yield wc({a:o,g:n,N:t});return new yc({userPoolName:e,a:o,g:n,A:s,N:t})}),Cc=()=>{const e=Ht($t(128));return new m(e,16)};function Ae(s){return p(this,arguments,function*({userPoolId:e,userPoolEndpoint:t,newDeviceMetadata:n,accessToken:o}){if(!n)return;const i=e.split("_")[1]||"",r=yield Ge(i),c=n==null?void 0:n.DeviceKey,a=n==null?void 0:n.DeviceGroupKey;try{yield r.generateHashDevice(a!=null?a:"",c!=null?c:"")}catch(l){return}const d={Salt:qe.convert(Pe(r.getSaltToHashDevices())),PasswordVerifier:qe.convert(Pe(r.getVerifierDevices()))},u=r.getRandomPassword();try{return yield Na({endpointResolver:R({endpointOverride:t})})({region:v(e)},{AccessToken:o,DeviceName:yield Pr(),DeviceKey:n==null?void 0:n.DeviceKey,DeviceSecretVerifierConfig:d}),{deviceKey:c,deviceGroupKey:a,randomPassword:u}}catch(l){return}})}function Ac(e){return p(this,null,function*(){var f;const t=(f=_.getConfig().Auth)==null?void 0:f.Cognito;T(t);const{username:n,signInSession:o,signInDetails:s,challengeName:i}=Z.getState();if(i!=="WEB_AUTHN"||!n)throw new S({name:ie.SignInException,message:"Unable to proceed due to invalid sign in state."});const{CREDENTIAL_REQUEST_OPTIONS:r}=e;Bt(!!r,P.InvalidPasskeyAuthenticationOptions);const c=yield _a(JSON.parse(r)),a=W({endpointResolver:R({endpointOverride:t.userPoolEndpoint})}),{ChallengeName:d,ChallengeParameters:u,AuthenticationResult:l,Session:h}=yield a({region:v(t.userPoolId),userAgentValue:U(M.ConfirmSignIn)},{ChallengeName:"WEB_AUTHN",ChallengeResponses:{USERNAME:n,CREDENTIAL:JSON.stringify(c)},ClientId:t.userPoolClientId,Session:o});if(Ce({signInSession:h,username:n,challengeName:d,signInDetails:s}),l)return yield ye(C(g({},l),{username:n,NewDeviceMetadata:yield Ae({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:l.NewDeviceMetadata,accessToken:l.AccessToken}),signInDetails:s})),Z.dispatch({type:"RESET_STATE"}),yield we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}};if(d==="WEB_AUTHN")throw new S({name:ie.SignInException,message:"Sequential WEB_AUTHN challenges returned from underlying service cannot be handled."});return{challengeName:d,challengeParameters:u}})}function V({username:e,userPoolId:t,userPoolClientId:n}){if(typeof window=="undefined")return;const o=window.AmazonCognitoAdvancedSecurityData;if(typeof o=="undefined")return;const s=o.getData(e,t,n);return s?{EncodedData:s}:{}}const Tc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],hs=()=>{const e=new Date,t=vc[e.getUTCDay()],n=Tc[e.getUTCMonth()],o=e.getUTCDate();let s=e.getUTCHours();s<10&&(s=`0${s}`);let i=e.getUTCMinutes();i<10&&(i=`0${i}`);let r=e.getUTCSeconds();r<10&&(r=`0${r}`);const c=e.getUTCFullYear();return`${t} ${n} ${o} ${s}:${i}:${r} UTC ${c}`},ps=({userPoolName:e,username:t,challengeParameters:n,dateNow:o,hkdf:s})=>{const i=it.convert(e),r=it.convert(t),c=Rc(n.SECRET_BLOCK),a=it.convert(o),d=new Uint8Array(i.byteLength+r.byteLength+c.byteLength+a.byteLength);d.set(i,0),d.set(r,i.byteLength),d.set(c,i.byteLength+r.byteLength),d.set(a,i.byteLength+r.byteLength+c.byteLength);const u=new at(s);u.update(d);const l=u.digestSync();return qe.convert(l)},Rc=e=>{const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),o=Ut.convert(n),s=new Uint8Array(o.length);for(let i=0;i<o.length;++i)s[i]=o.charCodeAt(i);return s};function mt(i){return p(this,arguments,function*({username:e,config:t,clientMetadata:n,session:o,tokenOrchestrator:s}){const{userPoolId:r,userPoolEndpoint:c}=t,a=t.userPoolClientId,d=yield s==null?void 0:s.getDeviceMetadata(e);os(d);const u=yield Ge(d.deviceGroupKey),l={USERNAME:e,SRP_A:u.A.toString(16),DEVICE_KEY:d.deviceKey},h={ChallengeName:"DEVICE_SRP_AUTH",ClientId:a,ChallengeResponses:l,ClientMetadata:n,Session:o},f=W({endpointResolver:R({endpointOverride:c})}),{ChallengeParameters:E,Session:I}=yield f({region:v(r)},h);return xc(e,E,n,I,u,t,s)})}function xc(d,u,l,h,f,E,I){return p(this,arguments,function*(e,t,n,o,s,{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c},a){var Re;const y=yield a==null?void 0:a.getDeviceMetadata(e);os(y);const w=new m(t==null?void 0:t.SRP_B,16),D=new m(t==null?void 0:t.SALT,16),{deviceKey:re}=y,{deviceGroupKey:he}=y,z=yield s.getPasswordAuthenticationKey({username:y.deviceKey,password:y.randomPassword,serverBValue:w,salt:D}),Ye=hs(),Je={USERNAME:(Re=t==null?void 0:t.USERNAME)!=null?Re:e,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:Ye,PASSWORD_CLAIM_SIGNATURE:ps({username:re,userPoolName:he,challengeParameters:t,dateNow:Ye,hkdf:z}),DEVICE_KEY:re},be=V({username:e,userPoolId:i,userPoolClientId:r}),Y={ChallengeName:"DEVICE_PASSWORD_VERIFIER",ClientId:r,ChallengeResponses:Je,Session:o,ClientMetadata:n,UserContextData:be};return W({endpointResolver:R({endpointOverride:c})})({region:v(i)},Y)})}function zt(e,t,n,o,s,i,r){return p(this,null,function*(){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=i,u=(c==null?void 0:c.split("_")[1])||"",l=new m(t==null?void 0:t.SRP_B,16),h=new m(t==null?void 0:t.SALT,16),f=t==null?void 0:t.USER_ID_FOR_SRP;if(!f)throw new S({name:"EmptyUserIdForSRPException",message:"USER_ID_FOR_SRP was not found in challengeParameters"});const E=yield s.getPasswordAuthenticationKey({username:f,password:e,serverBValue:l,salt:h}),I=hs(),y={USERNAME:f,PASSWORD_CLAIM_SECRET_BLOCK:t==null?void 0:t.SECRET_BLOCK,TIMESTAMP:I,PASSWORD_CLAIM_SIGNATURE:ps({username:f,userPoolName:u,challengeParameters:t,dateNow:I,hkdf:E})},w=yield r.getDeviceMetadata(f);w&&w.deviceKey&&(y.DEVICE_KEY=w.deviceKey);const D=V({username:f,userPoolId:c,userPoolClientId:a}),re={ChallengeName:"PASSWORD_VERIFIER",ChallengeResponses:y,ClientMetadata:n,Session:o,ClientId:a,UserContextData:D},z=yield W({endpointResolver:R({endpointOverride:d})})({region:v(c)},re);return z.ChallengeName==="DEVICE_SRP_AUTH"?mt({username:f,config:i,clientMetadata:n,session:z.Session,tokenOrchestrator:r}):z})}function De(e,t,n,o){return p(this,null,function*(){try{return yield e(...t)}catch(s){if(s instanceof S&&s.name==="ResourceNotFoundException"&&s.message.includes("Device does not exist."))return yield o.clearDeviceMetadata(n),e(...t);throw s}})}function Te(e){const{dispatch:t}=Z;t({type:"SET_USERNAME",value:e})}function fs(c){return p(this,arguments,function*({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:s,authFlow:i,preferredChallenge:r}){var z;const{userPoolId:a,userPoolClientId:d,userPoolEndpoint:u}=o,l=(a==null?void 0:a.split("_")[1])||"",h=yield Ge(l),f={USERNAME:e,SRP_A:h.A.toString(16)};i==="USER_AUTH"&&r&&(f.PREFERRED_CHALLENGE=r);const E=V({username:e,userPoolId:a,userPoolClientId:d}),I={AuthFlow:i,AuthParameters:f,ClientMetadata:n,ClientId:d,UserContextData:E},w=yield ze({endpointResolver:R({endpointOverride:u})})({region:v(a),userAgentValue:U(M.SignIn)},I),{ChallengeParameters:D,Session:re}=w,he=(z=D==null?void 0:D.USERNAME)!=null?z:e;return Te(he),w.ChallengeName==="PASSWORD_VERIFIER"?De(zt,[t,D,n,re,h,o,s],he,s):w})}function Pc(i){return p(this,arguments,function*({username:e,session:t,selectedChallenge:n,config:o,clientMetadata:s}){return W({endpointResolver:R({endpointOverride:o.userPoolEndpoint})})({region:v(o.userPoolId),userAgentValue:U(M.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:{USERNAME:e,ANSWER:n},ClientId:o.userPoolClientId,Session:t,ClientMetadata:s})})}function _c(e,t,n,o,s){return p(this,null,function*(){var f,E;const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c}=o,a={ANSWER:"PASSWORD",USERNAME:e,PASSWORD:t},d=V({username:e,userPoolId:i,userPoolClientId:r}),l=yield W({endpointResolver:R({endpointOverride:c})})({region:v(i),userAgentValue:U(M.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:a,ClientId:r,ClientMetadata:n,Session:s,UserContextData:d}),h=(E=(f=l.ChallengeParameters)==null?void 0:f.USERNAME)!=null?E:e;return Te(h),l})}function Nc(e,t,n,o,s,i){return p(this,null,function*(){var y,w;const{userPoolId:r,userPoolClientId:c,userPoolEndpoint:a}=o,d=r.split("_")[1]||"",u=yield Ge(d),l={ANSWER:"PASSWORD_SRP",USERNAME:e,SRP_A:u.A.toString(16)},h=V({username:e,userPoolId:r,userPoolClientId:c}),E=yield W({endpointResolver:R({endpointOverride:a})})({region:v(r),userAgentValue:U(M.ConfirmSignIn)},{ChallengeName:"SELECT_CHALLENGE",ChallengeResponses:l,ClientId:c,ClientMetadata:n,Session:s,UserContextData:h}),I=(w=(y=E.ChallengeParameters)==null?void 0:y.USERNAME)!=null?w:e;return Te(I),E.ChallengeName==="PASSWORD_VERIFIER"?De(zt,[t,E.ChallengeParameters,n,E.Session,u,o,i],I,i):E})}const Nt="userAttributes.";function Mc(e){return"isSignedIn"in e&&"nextStep"in e}function Dc(r){return p(this,arguments,function*({challengeResponse:e,clientMetadata:t,session:n,username:o,config:s,tokenOrchestrator:i}){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=s,u={USERNAME:o,ANSWER:e},l=yield i==null?void 0:i.getDeviceMetadata(o);l&&l.deviceKey&&(u.DEVICE_KEY=l.deviceKey);const h=V({username:o,userPoolId:c,userPoolClientId:a}),f={ChallengeName:"CUSTOM_CHALLENGE",ChallengeResponses:u,Session:n,ClientMetadata:t,ClientId:a,UserContextData:h},I=yield W({endpointResolver:R({endpointOverride:d})})({region:v(c),userAgentValue:U(M.ConfirmSignIn)},f);return I.ChallengeName==="DEVICE_SRP_AUTH"?mt({username:o,config:s,clientMetadata:t,session:I.Session,tokenOrchestrator:i}):I})}function Uc(r){return p(this,arguments,function*({challengeResponse:e,username:t,clientMetadata:n,session:o,deviceName:s,config:i}){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=i;if(e==="EMAIL")return{ChallengeName:"MFA_SETUP",Session:o,ChallengeParameters:{MFAS_CAN_SETUP:'["EMAIL_OTP"]'},$metadata:{}};if(e==="TOTP")return{ChallengeName:"MFA_SETUP",Session:o,ChallengeParameters:{MFAS_CAN_SETUP:'["SOFTWARE_TOKEN_MFA"]'},$metadata:{}};const u={USERNAME:t};if(/^\d+$/.test(e)){const f=na({endpointResolver:R({endpointOverride:d})}),{Session:E}=yield f({region:v(c),userAgentValue:U(M.ConfirmSignIn)},{UserCode:e,Session:o,FriendlyDeviceName:s});Z.dispatch({type:"SET_SIGN_IN_SESSION",value:E});const I={ChallengeName:"MFA_SETUP",ChallengeResponses:u,Session:E,ClientMetadata:n,ClientId:a};return W({endpointResolver:R({endpointOverride:d})})({region:v(c),userAgentValue:U(M.ConfirmSignIn)},I)}if(e.includes("@")){u.EMAIL=e;const f={ChallengeName:"MFA_SETUP",ChallengeResponses:u,Session:o,ClientMetadata:n,ClientId:a};return W({endpointResolver:R({endpointOverride:d})})({region:v(c),userAgentValue:U(M.ConfirmSignIn)},f)}throw new S({name:ie.SignInException,message:`Cannot proceed with MFA setup using challengeResponse: ${e}`,recoverySuggestion:'Try passing "EMAIL", "TOTP", a valid email, or OTP code as the challengeResponse.'})})}function bc(i){return p(this,arguments,function*({challengeResponse:e,username:t,clientMetadata:n,session:o,config:s}){const{userPoolId:r,userPoolClientId:c,userPoolEndpoint:a}=s;B(e==="TOTP"||e==="SMS"||e==="EMAIL",A.IncorrectMFAMethod);const d={USERNAME:t,ANSWER:Hc(e)},u=V({username:t,userPoolId:r,userPoolClientId:c}),l={ChallengeName:"SELECT_MFA_TYPE",ChallengeResponses:d,Session:o,ClientMetadata:n,ClientId:c,UserContextData:u};return W({endpointResolver:R({endpointOverride:a})})({region:v(r),userAgentValue:U(M.ConfirmSignIn)},l)})}function Oc(r){return p(this,arguments,function*({challengeResponse:e,clientMetadata:t,session:n,username:o,requiredAttributes:s,config:i}){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=i,u=C(g({},qc(s)),{NEW_PASSWORD:e,USERNAME:o}),l=V({username:o,userPoolId:c,userPoolClientId:a}),h={ChallengeName:"NEW_PASSWORD_REQUIRED",ChallengeResponses:u,ClientMetadata:t,Session:n,ClientId:a,UserContextData:l};return W({endpointResolver:R({endpointOverride:d})})({region:v(c),userAgentValue:U(M.ConfirmSignIn)},h)})}function Fc(e,t,n,o,s){return p(this,null,function*(){var I,y,w,D;const{userPoolClientId:i,userPoolId:r,userPoolEndpoint:c}=o,a={USERNAME:e,PASSWORD:t},d=yield s.getDeviceMetadata(e);d&&d.deviceKey&&(a.DEVICE_KEY=d.deviceKey);const u=V({username:e,userPoolId:r,userPoolClientId:i}),l={AuthFlow:"USER_PASSWORD_AUTH",AuthParameters:a,ClientMetadata:n,ClientId:i,UserContextData:u},f=yield ze({endpointResolver:R({endpointOverride:c})})({region:v(r),userAgentValue:U(M.SignIn)},l),E=(D=(w=(I=f.ChallengeParameters)==null?void 0:I.USERNAME)!=null?w:(y=f.ChallengeParameters)==null?void 0:y.USER_ID_FOR_SRP)!=null?D:e;return Te(E),f.ChallengeName==="DEVICE_SRP_AUTH"?mt({username:E,config:o,clientMetadata:n,session:f.Session,tokenOrchestrator:s}):f})}function kc(e,t,n,o,s){return p(this,null,function*(){return fs({username:e,password:t,clientMetadata:n,config:o,tokenOrchestrator:s,authFlow:"USER_SRP_AUTH"})})}function Lc(e,t,n,o){return p(this,null,function*(){var E,I;const{userPoolClientId:s,userPoolId:i,userPoolEndpoint:r}=n,c={USERNAME:e},a=yield o.getDeviceMetadata(e);a&&a.deviceKey&&(c.DEVICE_KEY=a.deviceKey);const d=V({username:e,userPoolId:i,userPoolClientId:s}),u={AuthFlow:"CUSTOM_AUTH",AuthParameters:c,ClientMetadata:t,ClientId:s,UserContextData:d},h=yield ze({endpointResolver:R({endpointOverride:r})})({region:v(i),userAgentValue:U(M.SignIn)},u),f=(I=(E=h.ChallengeParameters)==null?void 0:E.USERNAME)!=null?I:e;return Te(f),h.ChallengeName==="DEVICE_SRP_AUTH"?mt({username:f,config:n,clientMetadata:t,session:h.Session,tokenOrchestrator:o}):h})}function Kc(e,t,n,o,s){return p(this,null,function*(){var w;T(o);const{userPoolId:i,userPoolClientId:r,userPoolEndpoint:c}=o,a=(i==null?void 0:i.split("_")[1])||"",d=yield Ge(a),u={USERNAME:e,SRP_A:d.A.toString(16),CHALLENGE_NAME:"SRP_A"},l=V({username:e,userPoolId:i,userPoolClientId:r}),h={AuthFlow:"CUSTOM_AUTH",AuthParameters:u,ClientMetadata:n,ClientId:r,UserContextData:l},f=ze({endpointResolver:R({endpointOverride:c})}),{ChallengeParameters:E,Session:I}=yield f({region:v(i),userAgentValue:U(M.SignIn)},h),y=(w=E==null?void 0:E.USERNAME)!=null?w:e;return Te(y),De(zt,[t,E,n,I,d,o,s],y,s)})}function ve(e){return p(this,null,function*(){var i;const{challengeName:t,challengeParameters:n,availableChallenges:o}=e,s=(i=_.getConfig().Auth)==null?void 0:i.Cognito;switch(T(s),t){case"CUSTOM_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE",additionalInfo:n}};case"MFA_SETUP":{const{signInSession:r,username:c}=Z.getState(),a=xo(Po(n.MFAS_CAN_SETUP))||[],d=zc(a),u=d.includes("TOTP"),l=d.includes("EMAIL");if(u&&l)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SETUP_SELECTION",allowedMFATypes:d}};if(l)return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_EMAIL_SETUP"}};if(u){const h=oa({endpointResolver:R({endpointOverride:s.userPoolEndpoint})}),{Session:f,SecretCode:E}=yield h({region:v(s.userPoolId)},{Session:r});return Z.dispatch({type:"SET_SIGN_IN_SESSION",value:f}),{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_TOTP_SETUP",totpSetupDetails:Bc(E,c)}}}throw new S({name:ie.SignInException,message:`Cannot initiate MFA setup from available types: ${a}`})}case"NEW_PASSWORD_REQUIRED":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED",missingAttributes:Wc(n.requiredAttributes)}};case"SELECT_MFA_TYPE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_MFA_SELECTION",allowedMFATypes:xo(Po(n.MFAS_CAN_CHOOSE))}};case"SMS_OTP":case"SMS_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_SMS_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"SOFTWARE_TOKEN_MFA":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_TOTP_CODE"}};case"EMAIL_OTP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_EMAIL_CODE",codeDeliveryDetails:{deliveryMedium:n.CODE_DELIVERY_DELIVERY_MEDIUM,destination:n.CODE_DELIVERY_DESTINATION}}};case"WEB_AUTHN":{const r=yield Ac(n);return Mc(r)?r:ve(r)}case"PASSWORD":case"PASSWORD_SRP":return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_IN_WITH_PASSWORD"}};case"SELECT_CHALLENGE":return{isSignedIn:!1,nextStep:{signInStep:"CONTINUE_SIGN_IN_WITH_FIRST_FACTOR_SELECTION",availableChallenges:o}}}throw new S({name:ie.SignInException,message:`An error occurred during the sign in process. ${t} challengeName returned by the underlying service was not addressed.`})})}function Bc(e,t){return{sharedSecret:e,getSetupUri:(n,o)=>{const s=`otpauth://totp/${n}:${o!=null?o:t}?secret=${e}&issuer=${n}`;return new He(s)}}}function Ue(e){if(e===ct.PasswordResetRequiredException)return{isSignedIn:!1,nextStep:{signInStep:"RESET_PASSWORD"}};if(e===ct.UserNotConfirmedException)return{isSignedIn:!1,nextStep:{signInStep:"CONFIRM_SIGN_UP"}}}function Wc(e){return e?JSON.parse(e).map(n=>n.includes(Nt)?n.replace(Nt,""):n):[]}function qc(e){if(!e)return{};const t={};return Object.entries(e).forEach(([n,o])=>{o&&(t[`${Nt}${n}`]=o)}),t}function Vc(e,t,n,o,s,i,r,c){return p(this,null,function*(){const a=c==null?void 0:c.userAttributes,d=c==null?void 0:c.friendlyDeviceName;switch(t){case"WEB_AUTHN":case"SELECT_CHALLENGE":return o==="PASSWORD_SRP"||o==="PASSWORD"?{ChallengeName:o,Session:n,$metadata:{}}:Pc({username:e,session:n,selectedChallenge:o,config:s,clientMetadata:r});case"SELECT_MFA_TYPE":return bc({challengeResponse:o,clientMetadata:r,session:n,username:e,config:s});case"MFA_SETUP":return Uc({challengeResponse:o,clientMetadata:r,session:n,username:e,deviceName:d,config:s});case"NEW_PASSWORD_REQUIRED":return Oc({challengeResponse:o,clientMetadata:r,session:n,username:e,requiredAttributes:a,config:s});case"CUSTOM_CHALLENGE":return De(Dc,[{challengeResponse:o,clientMetadata:r,session:n,username:e,config:s,tokenOrchestrator:i}],e,i);case"SMS_MFA":case"SOFTWARE_TOKEN_MFA":case"SMS_OTP":case"EMAIL_OTP":return jc({challengeName:t,challengeResponse:o,clientMetadata:r,session:n,username:e,config:s});case"PASSWORD":return _c(e,o,r,s,n);case"PASSWORD_SRP":return Nc(e,o,r,s,n,i)}throw new S({name:ie.SignInException,message:`An error occurred during the sign in process.
		${t} challengeName returned by the underlying service was not addressed.`})})}function Hc(e){let t="SMS_MFA";return e==="TOTP"&&(t="SOFTWARE_TOKEN_MFA"),e==="EMAIL"&&(t="EMAIL_OTP"),t}function $c(e){if(e==="SMS_MFA")return"SMS";if(e==="SOFTWARE_TOKEN_MFA")return"TOTP";if(e==="EMAIL_OTP")return"EMAIL"}function xo(e){if(e)return e.map($c).filter(Boolean)}function Po(e){return e?JSON.parse(e):[]}function zc(e){return e.filter(t=>t==="EMAIL"||t==="TOTP")}function Gc(){return p(this,null,function*(){let e;try{e=yield is()}catch(t){}if(e&&e.userId&&e.username)throw new S({name:br,message:"There is already a signed in user.",recoverySuggestion:"Call signOut before calling signIn again."})})}function je(e){var n;return(n=Z.getState().username)!=null?n:e}function jc(r){return p(this,arguments,function*({challengeName:e,challengeResponse:t,clientMetadata:n,session:o,username:s,config:i}){const{userPoolId:c,userPoolClientId:a,userPoolEndpoint:d}=i,u={USERNAME:s};e==="EMAIL_OTP"&&(u.EMAIL_OTP_CODE=t),e==="SMS_MFA"&&(u.SMS_MFA_CODE=t),e==="SMS_OTP"&&(u.SMS_OTP_CODE=t),e==="SOFTWARE_TOKEN_MFA"&&(u.SOFTWARE_TOKEN_MFA_CODE=t);const l=V({username:s,userPoolId:c,userPoolClientId:a}),h={ChallengeName:e,ChallengeResponses:u,Session:o,ClientMetadata:n,ClientId:a,UserContextData:l};return W({endpointResolver:R({endpointOverride:d})})({region:v(c),userAgentValue:U(M.ConfirmSignIn)},h)})}function Yc(e){return p(this,null,function*(){var c;const t=(c=_.getConfig().Auth)==null?void 0:c.Cognito;T(t);const{username:n,password:o,options:s}=e,i={loginId:n,authFlowType:"CUSTOM_WITHOUT_SRP"},r=s==null?void 0:s.clientMetadata;B(!!n,A.EmptySignInUsername),B(!o,A.CustomAuthSignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=yield De(Lc,[n,r,t,q],n,q),h=je(n);return Ce({signInSession:l,username:h,challengeName:a,signInDetails:i}),u?(yield ye(C(g({username:h},u),{NewDeviceMetadata:yield Ae({userPoolId:t.userPoolId,userPoolEndpoint:t.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i})),j(),yield we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ve({challengeName:a,challengeParameters:d})}catch(a){j(),G(a);const d=Ue(a.name);if(d)return d;throw a}})}function Jc(e){return p(this,null,function*(){var c;const{username:t,password:n,options:o}=e,s={loginId:t,authFlowType:"CUSTOM_WITH_SRP"},i=(c=_.getConfig().Auth)==null?void 0:c.Cognito;T(i);const r=o==null?void 0:o.clientMetadata;B(!!t,A.EmptySignInUsername),B(!!n,A.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=yield Kc(t,n,r,i,q),h=je(t);return Ce({signInSession:l,username:h,challengeName:a,signInDetails:s}),u?(yield ye(C(g({username:h},u),{NewDeviceMetadata:yield Ae({userPoolId:i.userPoolId,userPoolEndpoint:i.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s})),j(),yield we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ve({challengeName:a,challengeParameters:d})}catch(a){j(),G(a);const d=Ue(a.name);if(d)return d;throw a}})}function Se(e=!0){ds.dispatch({type:"RESET"})}function _o(e){return p(this,null,function*(){var r,c;const{username:t,password:n}=e,o=(r=_.getConfig().Auth)==null?void 0:r.Cognito,s={loginId:t,authFlowType:"USER_SRP_AUTH"};T(o);const i=(c=e.options)==null?void 0:c.clientMetadata;B(!!t,A.EmptySignInUsername),B(!!n,A.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=yield kc(t,n,i,o,q),h=je(t);return Ce({signInSession:l,username:h,challengeName:a,signInDetails:s}),u?(yield ye(C(g({username:h},u),{NewDeviceMetadata:yield Ae({userPoolId:o.userPoolId,userPoolEndpoint:o.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:s})),j(),yield we(),Se(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ve({challengeName:a,challengeParameters:d})}catch(a){j(),Se(),G(a);const d=Ue(a.name);if(d)return d;throw a}})}function Xc(e){return p(this,null,function*(){var c;const{username:t,password:n,options:o}=e,s=(c=_.getConfig().Auth)==null?void 0:c.Cognito,i={loginId:t,authFlowType:"USER_PASSWORD_AUTH"};T(s);const r=o==null?void 0:o.clientMetadata;B(!!t,A.EmptySignInUsername),B(!!n,A.EmptySignInPassword);try{const{ChallengeName:a,ChallengeParameters:d,AuthenticationResult:u,Session:l}=yield De(Fc,[t,n,r,s,q],t,q),h=je(t);return Ce({signInSession:l,username:h,challengeName:a,signInDetails:i}),u?(yield ye(C(g({},u),{username:h,NewDeviceMetadata:yield Ae({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:u.NewDeviceMetadata,accessToken:u.AccessToken}),signInDetails:i})),j(),yield we(),Se(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ve({challengeName:a,challengeParameters:d})}catch(a){j(),Se(),G(a);const d=Ue(a.name);if(d)return d;throw a}})}function Qc(c){return p(this,arguments,function*({username:e,clientMetadata:t,config:n,tokenOrchestrator:o,preferredChallenge:s,password:i,session:r}){const{userPoolId:a,userPoolClientId:d,userPoolEndpoint:u}=n,l=V({username:e,userPoolId:a,userPoolClientId:d}),h={USERNAME:e};if(s){if(s==="PASSWORD_SRP")return B(!!i,A.EmptySignInPassword),fs({username:e,password:i,clientMetadata:t,config:n,tokenOrchestrator:o,authFlow:"USER_AUTH",preferredChallenge:s});s==="PASSWORD"&&(B(!!i,A.EmptySignInPassword),h.PASSWORD=i),h.PREFERRED_CHALLENGE=s}const f={AuthFlow:"USER_AUTH",AuthParameters:h,ClientMetadata:t,ClientId:d,UserContextData:l};r&&(f.Session=r);const I=yield ze({endpointResolver:R({endpointOverride:u})})({region:v(a),userAgentValue:U(M.SignIn)},f);return Te(e),I})}function Zc(e){return p(this,null,function*(){var a;const{username:t,password:n,options:o}=e,s=(a=_.getConfig().Auth)==null?void 0:a.Cognito,i={loginId:t,authFlowType:"USER_AUTH"};T(s);const r=o==null?void 0:o.clientMetadata,c=o==null?void 0:o.preferredChallenge;B(!!t,A.EmptySignInUsername);try{const d={username:t,config:s,tokenOrchestrator:q,clientMetadata:r,preferredChallenge:c,password:n},u=ds.getState();u.active&&u.username===t&&(d.session=u.session);const l=yield Qc(d),h=je(t);return Ce({signInSession:l.Session,username:h,challengeName:l.ChallengeName,signInDetails:i}),l.AuthenticationResult?(yield ye(C(g({username:h},l.AuthenticationResult),{NewDeviceMetadata:yield Ae({userPoolId:s.userPoolId,userPoolEndpoint:s.userPoolEndpoint,newDeviceMetadata:l.AuthenticationResult.NewDeviceMetadata,accessToken:l.AuthenticationResult.AccessToken}),signInDetails:i})),j(),yield we(),Se(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ve({challengeName:l.ChallengeName,challengeParameters:l.ChallengeParameters,availableChallenges:"AvailableChallenges"in l?l.AvailableChallenges:void 0})}catch(d){j(),Se(),G(d);const u=Ue(d.name);if(u)return u;throw d}})}function Pd(e){return p(this,null,function*(){var n;Se(!1);const t=(n=e.options)==null?void 0:n.authFlowType;switch(yield Gc(),t){case"USER_SRP_AUTH":return _o(e);case"USER_PASSWORD_AUTH":return Xc(e);case"CUSTOM_WITHOUT_SRP":return Yc(e);case"CUSTOM_WITH_SRP":return Jc(e);case"USER_AUTH":return Zc(e);default:return _o(e)}})}function _d(e){return p(this,null,function*(){var d;const{challengeResponse:t,options:n}=e,{username:o,challengeName:s,signInSession:i,signInDetails:r}=Z.getState(),c=(d=_.getConfig().Auth)==null?void 0:d.Cognito;T(c);const a=n==null?void 0:n.clientMetadata;if(B(!!t,A.EmptyChallengeResponse),!o||!s||!i)throw new S({name:ie.SignInException,message:`
			An error occurred during the sign in process.

			This most likely occurred due to:
			1. signIn was not called before confirmSignIn.
			2. signIn threw an exception.
			3. page was refreshed during the sign in flow and session has expired.
			`,recoverySuggestion:"Make sure a successful call to signIn is made before calling confirmSignInand that the session has not expired."});try{const{Session:u,ChallengeName:l,AuthenticationResult:h,ChallengeParameters:f}=yield Vc(o,s,i,t,c,q,a,n);return Ce({signInSession:u,username:o,challengeName:l,signInDetails:r}),h?(yield ye(C(g({username:o},h),{NewDeviceMetadata:yield Ae({userPoolId:c.userPoolId,userPoolEndpoint:c.userPoolEndpoint,newDeviceMetadata:h.NewDeviceMetadata,accessToken:h.AccessToken}),signInDetails:r})),j(),yield we(),{isSignedIn:!0,nextStep:{signInStep:"DONE"}}):ve({challengeName:l,challengeParameters:f})}catch(u){G(u);const l=Ue(u.name);if(l)return l;throw u}})}const ed=e=>ee(ue,ce("GetUser"),de(),g(g({},le),e));function td(e,t){var n,o;{const s=(n=e==null?void 0:e.find(nd))!=null?n:e==null?void 0:e.find(od),i=(o=e==null?void 0:e.find(id))!=null?o:e==null?void 0:e.find(sd);if(s)return s;throw i?Wr:Kr}}const nd=e=>e.startsWith(String(window.location.origin+(window.location.pathname||"/"))),od=e=>e.includes(String(window.location.hostname)),sd=e=>e.startsWith("http://"),id=e=>e.startsWith("https://"),rd=e=>p(null,null,function*(){window!=null&&window.location&&(window.location.href=e.replace("http://","https://"))}),ad=e=>p(null,null,function*(){var c;const t=(c=e.getConfig().Auth)==null?void 0:c.Cognito;T(t);const{userPoolEndpoint:n,userPoolId:o}=t,{tokens:s}=yield Ko(e,{forceRefresh:!1});ts(s);const i=ed({endpointResolver:R({endpointOverride:n})}),{UserAttributes:r}=yield i({region:v(o),userAgentValue:U(M.FetchUserAttributes)},{AccessToken:s.accessToken.toString()});return Ur(r)}),Nd=()=>ad(_),cd=e=>p(null,null,function*(){yield e.clearOAuthData(),q.clearTokens(),yield Bo(),xe.dispatch("auth",{event:"signedOut"},"Auth",me)}),dd=(e,t=!1,n)=>p(null,null,function*(){Mo(e);const{loginWith:o,userPoolClientId:s}=e,{domain:i,redirectSignOut:r}=o.oauth,c=td(r),a=`https://${i}/logout?${Object.entries({client_id:s,logout_uri:encodeURIComponent(c)}).map(([d,u])=>`${d}=${u}`).join("&")}`;return rd(a)}),ud=(e,t,n,o)=>p(null,null,function*(){const{isOAuthSignIn:s}=yield t.loadOAuthSignIn(),i=yield n.getOAuthMetadata();if(yield cd(t),s||i!=null&&i.oauthSignIn)return dd(e,!1)}),ld=e=>ee(ue,ce("RevokeToken"),de(),g(g({},le),e)),hd=new K("Auth");function Md(e){return p(this,null,function*(){var o,s;const t=(o=_.getConfig().Auth)==null?void 0:o.Cognito;T(t),yield pd(t);let n;try{Mo(t),n=!0}catch(i){n=!1}if(n){const i=new as($e);i.setAuthConfig(t);const{type:r}=(s=yield ud(t,i,q))!=null?s:{};if(r==="error")throw new S({name:qr,message:"An error occurred when attempting to log out from OAuth provider."})}else q.clearTokens(),yield Bo(),xe.dispatch("auth",{event:"signedOut"},"Auth",me)})}function pd(e){return p(this,null,function*(){try{const{userPoolEndpoint:t,userPoolId:n,userPoolClientId:o}=e,s=yield q.getTokenStore().loadTokens();ns(s),fd(s.accessToken)&&(yield ld({endpointResolver:R({endpointOverride:t})})({region:v(n),userAgentValue:U(M.SignOut)},{ClientId:o,Token:s.refreshToken}))}catch(t){hd.debug("Client signOut error caught but will proceed with token removal")}})}const fd=e=>{var t;return!!((t=e==null?void 0:e.payload)!=null&&t.origin_jti)},gd={identityId:"identityId"},Ed=new K("DefaultIdentityIdStore");class gs{setAuthConfig(t){ot(t.Cognito),this.authConfig=t,this._authKeys=md("Cognito",t.Cognito.identityPoolId)}constructor(t){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=t}loadIdentityId(){return p(this,null,function*(){var t;ot((t=this.authConfig)==null?void 0:t.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{const n=yield this.keyValueStorage.getItem(this._authKeys.identityId);return n?(this._hasGuestIdentityId=!0,{id:n,type:"guest"}):null}}catch(n){return Ed.log("Error getting stored IdentityId.",n),null}})}storeIdentityId(t){return p(this,null,function*(){var n;ot((n=this.authConfig)==null?void 0:n.Cognito),t.type==="guest"?(this.keyValueStorage.setItem(this._authKeys.identityId,t.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=t.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))})}clearIdentityId(){return p(this,null,function*(){this._primaryIdentityId=void 0,yield this.keyValueStorage.removeItem(this._authKeys.identityId)})}}const md=(e,t)=>Lt(gd)(`com.amplify.${e}`,t),Mt=({endpointOverride:e})=>t=>e?{url:new He(e)}:Sr(t);function Es(e){const t=Ie(e).payload.iss,n={};if(!t)throw new S({name:"InvalidIdTokenException",message:"Invalid Idtoken."});const o=t.replace(/(^\w+:|^)\/\//,"");return n[o]=e,n}function Id(o){return p(this,arguments,function*({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});const s=yield n.loadIdentityId();if(s)return s.id;const i=e!=null&&e.idToken?Es(e.idToken.toString()):{},r=yield Sd(i,t);return n.storeIdentityId({id:r,type:e?"primary":"guest"}),r})}function Sd(e,t){return p(this,null,function*(){const n=t==null?void 0:t.identityPoolId,o=xt(n),s=Er({endpointResolver:Mt({endpointOverride:t.identityPoolEndpoint})});let i;try{i=(yield s({region:o},{IdentityPoolId:n,Logins:e})).IdentityId}catch(r){throw G(r),new S(r)}if(!i)throw new S({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return i})}const nt=new K("CognitoCredentialsProvider"),No=3e3*1e3;class ms{constructor(t){this._nextCredentialsRefresh=0,this._identityIdStore=t}clearCredentialsAndIdentityId(){return p(this,null,function*(){nt.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,yield this._identityIdStore.clearIdentityId()})}clearCredentials(){return p(this,null,function*(){nt.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0})}getCredentialsAndIdentityId(t){return p(this,null,function*(){const n=t.authenticated,{tokens:o}=t,{authConfig:s}=t;try{ot(s==null?void 0:s.Cognito)}catch(a){return}if(!n&&!s.Cognito.allowGuestAccess)return;const{forceRefresh:i}=t,r=this.hasTokenChanged(o),c=yield Id({tokens:o,authConfig:s.Cognito,identityIdStore:this._identityIdStore});return(i||r)&&this.clearCredentials(),n?($r(o),this.credsForOIDCTokens(s.Cognito,o,c)):this.getGuestCredentials(c,s.Cognito)})}getGuestCredentials(t,n){return p(this,null,function*(){var r,c;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!1)return nt.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const o=xt(n.identityPoolId),s=$n({endpointResolver:Mt({endpointOverride:n.identityPoolEndpoint})});let i;try{i=yield s({region:o},{IdentityId:t})}catch(a){throw G(a),new S(a)}if((r=i==null?void 0:i.Credentials)!=null&&r.AccessKeyId&&((c=i==null?void 0:i.Credentials)!=null&&c.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+No;const a={credentials:{accessKeyId:i.Credentials.AccessKeyId,secretAccessKey:i.Credentials.SecretKey,sessionToken:i.Credentials.SessionToken,expiration:i.Credentials.Expiration},identityId:t};return i.IdentityId&&(a.identityId=i.IdentityId,this._identityIdStore.storeIdentityId({id:i.IdentityId,type:"guest"})),this._credentialsAndIdentityId=C(g({},a),{isAuthenticatedCreds:!1}),a}else throw new S({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}credsForOIDCTokens(t,n,o){return p(this,null,function*(){var a,d,u;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&this._credentialsAndIdentityId.isAuthenticatedCreds===!0)return nt.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();const s=n.idToken?Es(n.idToken.toString()):{},i=xt(t.identityPoolId),r=$n({endpointResolver:Mt({endpointOverride:t.identityPoolEndpoint})});let c;try{c=yield r({region:i},{IdentityId:o,Logins:s})}catch(l){throw G(l),new S(l)}if((a=c==null?void 0:c.Credentials)!=null&&a.AccessKeyId&&((d=c==null?void 0:c.Credentials)!=null&&d.SecretKey)){this._nextCredentialsRefresh=new Date().getTime()+No;const l={credentials:{accessKeyId:c.Credentials.AccessKeyId,secretAccessKey:c.Credentials.SecretKey,sessionToken:c.Credentials.SessionToken,expiration:c.Credentials.Expiration},identityId:o};return c.IdentityId&&(l.identityId=c.IdentityId,this._identityIdStore.storeIdentityId({id:c.IdentityId,type:"primary"})),this._credentialsAndIdentityId=C(g({},l),{isAuthenticatedCreds:!0,associatedIdToken:(u=n.idToken)==null?void 0:u.toString()}),l}else throw new S({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})})}isPastTTL(){return this._nextCredentialsRefresh===void 0?!0:this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(t){var n,o;return!!t&&!!((n=this._credentialsAndIdentityId)!=null&&n.associatedIdToken)&&((o=t.idToken)==null?void 0:o.toString())!==this._credentialsAndIdentityId.associatedIdToken}}const yd=new ms(new gs($e)),wd={configure(e,t){const n=bo(e),o=new Rr({sameSite:"lax"}),s=t!=null&&t.ssr?o:$e,i=t!=null&&t.ssr?new ms(new gs(o)):yd;if(!n.Auth){_.configure(n,t);return}if(t!=null&&t.Auth){_.configure(n,t);return}if(!_.libraryOptions.Auth){Ke.setAuthConfig(n.Auth),Ke.setKeyValueStorage(s),_.configure(n,C(g({},t),{Auth:{tokenProvider:Ke,credentialsProvider:i}}));return}if(t){const r=_.libraryOptions.Auth;t.ssr!==void 0&&(Ke.setKeyValueStorage(s),r.credentialsProvider=i),_.configure(n,g({Auth:r},t));return}_.configure(n)},getConfig(){return _.getConfig()}},Dd=Object.freeze(Object.defineProperty({__proto__:null,Amplify:wd},Symbol.toStringTag,{value:"Module"}));export{wd as D,Nd as a,Pd as b,_d as c,xd as f,is as g,Dd as i,Rd as j,Md as s};
