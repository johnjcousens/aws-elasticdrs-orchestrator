{
  "$schema": "https://dr-orchestration.aws.com/manifest/v1.0",
  "manifest_version": "1.0",
  "manifest_id": "prod-3tier-dr-plan-v1",
  "created_at": "2026-01-31T00:00:00Z",
  "created_by": "ops-team",
  "description": "Production 3-tier application DR plan with multi-technology support",
  
  "sla_targets": {
    "rto_minutes": 60,
    "rpo_minutes": 15,
    "description": "Tier 1 application - 1 hour RTO, 15 minute RPO"
  },
  
  "approval_config": {
    "required": true,
    "sns_topic_arn": "arn:aws:sns:us-east-1:777788889999:dr-approvals",
    "timeout_minutes": 30,
    "auto_approve_drills": false,
    "approvers": [
      "ops-team@example.com",
      "platform-team@example.com"
    ]
  },
  
  "source_region": "us-east-1",
  "target_region": "us-west-2",
  "source_account": "777788889999",
  "target_account": "777788889999",
  
  "layers": [
    {
      "layer_id": "layer-1-network",
      "layer_name": "Network Infrastructure",
      "layer_description": "DNS and network routing",
      "execution_order": 1,
      "parallel_execution": true,
      "dependencies": [],
      
      "resources": [
        {
          "resource_id": "route53-primary-zone",
          "resource_name": "Primary DNS Zone",
          "technology": "Route53",
          "resource_type": "HostedZone",
          "enabled": true,
          
          "configuration": {
            "hosted_zone_id": "Z1234567890ABC",
            "hosted_zone_name": "example.com",
            "failover_type": "PRIMARY_TO_SECONDARY",
            "health_check_id": "hc-abc123",
            "records": [
              {
                "name": "app.example.com",
                "type": "A",
                "primary_value": "10.0.1.100",
                "secondary_value": "10.100.1.100",
                "ttl": 60
              }
            ]
          },
          
          "sla_override": {
            "rto_minutes": 5,
            "rpo_minutes": 0
          },
          
          "tags": {
            "dr:layer": "network",
            "dr:priority": "critical",
            "dr:technology": "route53"
          }
        }
      ]
    },
    
    {
      "layer_id": "layer-2-data",
      "layer_name": "Data Layer",
      "layer_description": "Databases and persistent storage",
      "execution_order": 2,
      "parallel_execution": true,
      "dependencies": ["layer-1-network"],
      
      "resources": [
        {
          "resource_id": "aurora-primary-cluster",
          "resource_name": "Primary Aurora Cluster",
          "technology": "Aurora",
          "resource_type": "GlobalDatabase",
          "enabled": true,
          
          "configuration": {
            "global_cluster_id": "global-cluster-prod",
            "primary_cluster_id": "aurora-cluster-us-east-1",
            "secondary_cluster_id": "aurora-cluster-us-west-2",
            "primary_region": "us-east-1",
            "secondary_region": "us-west-2",
            "engine": "aurora-postgresql",
            "engine_version": "15.4",
            "promotion_tier": 0,
            "backup_retention_days": 7
          },
          
          "sla_override": {
            "rto_minutes": 15,
            "rpo_minutes": 5
          },
          
          "tags": {
            "dr:layer": "data",
            "dr:priority": "critical",
            "dr:technology": "aurora",
            "dr:wave": "0"
          }
        },
        
        {
          "resource_id": "drs-database-servers",
          "resource_name": "Database EC2 Servers (DRS)",
          "technology": "DRS",
          "resource_type": "SourceServerGroup",
          "enabled": true,
          
          "configuration": {
            "source_server_ids": [
              "s-569b0c7877c6b6e29",
              "s-51b12197c9ad51796"
            ],
            "staging_accounts": [
              "111111111111",
              "222222222222"
            ],
            "target_account": "777788889999",
            "launch_configuration": {
              "subnet_id": "subnet-070c0fc9869103ab2",
              "security_group_ids": ["sg-00d3ed189b8073ea4"],
              "instance_type": "r7a.large",
              "instance_profile_name": "demo-ec2-profile",
              "copy_tags": true,
              "copy_private_ip": false,
              "target_instance_type_right_sizing": "NONE",
              "launch_disposition": "STARTED",
              "licensing": {
                "os_byol": false
              }
            },
            "per_server_overrides": [
              {
                "source_server_id": "s-569b0c7877c6b6e29",
                "subnet_id": "subnet-05271904a7c44689f",
                "static_private_ip": "10.100.56.13",
                "instance_type": "r7a.large"
              },
              {
                "source_server_id": "s-51b12197c9ad51796",
                "subnet_id": "subnet-05271904a7c44689f",
                "static_private_ip": "10.100.56.132",
                "instance_type": "r7a.large"
              }
            ]
          },
          
          "tags": {
            "dr:layer": "data",
            "dr:priority": "critical",
            "dr:technology": "drs",
            "dr:wave": "0",
            "dr:server-type": "database"
          }
        }
      ]
    },
    
    {
      "layer_id": "layer-3-application",
      "layer_name": "Application Layer",
      "layer_description": "Application servers and middleware",
      "execution_order": 3,
      "parallel_execution": true,
      "dependencies": ["layer-2-data"],
      
      "resources": [
        {
          "resource_id": "drs-app-servers",
          "resource_name": "Application EC2 Servers (DRS)",
          "technology": "DRS",
          "resource_type": "SourceServerGroup",
          "enabled": true,
          
          "configuration": {
            "source_server_ids": [
              "s-5d4ac077408e03d02",
              "s-57eae3bdae1f0179b"
            ],
            "staging_accounts": [
              "111111111111",
              "222222222222"
            ],
            "target_account": "777788889999",
            "launch_configuration": {
              "subnet_id": "subnet-0f9cff0f59f317d1e",
              "security_group_ids": ["sg-00d3ed189b8073ea4"],
              "instance_type": "c6a.large",
              "instance_profile_name": "demo-ec2-profile",
              "copy_tags": true,
              "copy_private_ip": false,
              "target_instance_type_right_sizing": "NONE",
              "launch_disposition": "STARTED",
              "licensing": {
                "os_byol": false
              }
            },
            "per_server_overrides": [
              {
                "source_server_id": "s-57eae3bdae1f0179b",
                "subnet_id": "subnet-05769f447acc4e332",
                "static_private_ip": "10.100.216.147",
                "instance_type": "c6a.large"
              },
              {
                "source_server_id": "s-5d4ac077408e03d02",
                "subnet_id": "subnet-05769f447acc4e332",
                "static_private_ip": "10.100.216.65",
                "instance_type": "r6a.large"
              }
            ]
          },
          
          "tags": {
            "dr:layer": "application",
            "dr:priority": "high",
            "dr:technology": "drs",
            "dr:wave": "1",
            "dr:server-type": "application"
          }
        },
        
        {
          "resource_id": "ecs-app-service",
          "resource_name": "ECS Application Service",
          "technology": "ECS",
          "resource_type": "Service",
          "enabled": true,
          
          "configuration": {
            "cluster_name": "prod-cluster",
            "service_name": "app-service",
            "task_definition": "app-task:latest",
            "desired_count": 10,
            "launch_type": "FARGATE",
            "network_configuration": {
              "subnets": [
                "subnet-0f9cff0f59f317d1e",
                "subnet-05769f447acc4e332"
              ],
              "security_groups": ["sg-00d3ed189b8073ea4"],
              "assign_public_ip": false
            },
            "load_balancers": [
              {
                "target_group_arn": "arn:aws:elasticloadbalancing:us-west-2:777788889999:targetgroup/app-tg/abc123",
                "container_name": "app",
                "container_port": 8080
              }
            ]
          },
          
          "tags": {
            "dr:layer": "application",
            "dr:priority": "high",
            "dr:technology": "ecs",
            "dr:wave": "1"
          }
        }
      ]
    },
    
    {
      "layer_id": "layer-4-presentation",
      "layer_name": "Presentation Layer",
      "layer_description": "Web servers and load balancers",
      "execution_order": 4,
      "parallel_execution": true,
      "dependencies": ["layer-3-application"],
      
      "resources": [
        {
          "resource_id": "drs-web-servers",
          "resource_name": "Web EC2 Servers (DRS)",
          "technology": "DRS",
          "resource_type": "SourceServerGroup",
          "enabled": true,
          
          "configuration": {
            "source_server_ids": [
              "s-5269b54cb5881e759",
              "s-5c98c830e6c5e5fea"
            ],
            "staging_accounts": [
              "111111111111"
            ],
            "target_account": "777788889999",
            "launch_configuration": {
              "launch_disposition": "STARTED",
              "copy_tags": true,
              "copy_private_ip": false,
              "target_instance_type_right_sizing": "NONE",
              "licensing": {
                "os_byol": false
              }
            }
          },
          
          "tags": {
            "dr:layer": "presentation",
            "dr:priority": "medium",
            "dr:technology": "drs",
            "dr:wave": "2",
            "dr:server-type": "web"
          }
        }
      ]
    }
  ],
  
  "lifecycle_phases": {
    "instantiate": {
      "enabled": true,
      "skip_on_emergency": true,
      "description": "Pre-warm secondary region infrastructure"
    },
    "activate": {
      "enabled": true,
      "skip_on_emergency": false,
      "description": "Execute failover to secondary region",
      "approval_required": true
    },
    "cleanup": {
      "enabled": true,
      "skip_on_emergency": true,
      "defer_on_emergency": true,
      "description": "Clean up old primary region resources"
    },
    "replicate": {
      "enabled": true,
      "skip_on_emergency": true,
      "defer_on_emergency": true,
      "description": "Re-establish replication for failback"
    }
  },
  
  "rollback_config": {
    "enabled": true,
    "automatic": false,
    "preserve_data": true,
    "rollback_timeout_minutes": 120
  },
  
  "notification_config": {
    "sns_topic_arn": "arn:aws:sns:us-east-1:777788889999:dr-notifications",
    "notify_on_start": true,
    "notify_on_complete": true,
    "notify_on_failure": true,
    "notify_on_approval_required": true,
    "notify_on_phase_complete": true,
    "email_recipients": [
      "ops-team@example.com",
      "platform-team@example.com"
    ]
  },
  
  "metadata": {
    "application": "3-tier-web-app",
    "environment": "production",
    "cost_center": "engineering",
    "compliance": ["sox", "hipaa"],
    "last_tested": "2026-01-15T00:00:00Z",
    "test_frequency_days": 90,
    "owner_team": "platform-engineering"
  }
}
